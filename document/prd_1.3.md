# CommitLog 项目开发计划 1.3

## 背景

目前阶段博客系统达到可用阶段，不仅有交互良好的后台系统，前端博客页面也有不错的展示，而且也完成了在云上的自动化部署，同时也实现了用 AI 来辅助写作、基础的全文纠偏润色和全文摘要。

接下来要做更加细致化的东西，这个版本来大幅度提升在线写作的体验，达到飞书、Notion 级别的编辑体验。在此之上，结合 AI 划词局部润色，提升整体的编辑效率。



## 版本目标

1. **创作后台大改版**：文章管理、编辑交互改变，加入更加好的交互体验，提升写作热情。
2. **AI 融合颗粒度升级：** 不再只对全文赋予 AI 能力，针对划此段落也能使用 AI 能力。 



## 产品规划

### P0 文章管理交互逻辑升级

* [x] 调研并使用业界交互体验更好的文章管理交互方式

草稿主导、发布派生（Draft-driven publishing）

| 概念                | 定义                   | 存储逻辑                           |
| ----------------- | -------------------- | ------------------------------ |
| **草稿（draft）**     | 永远是最新编辑版本，可随时修改保存    | 存在数据库 `posts` 表中（状态 = draft）   |
| **发布（published）** | 某个草稿在发布时的快照副本，用于线上展示 | 存在数据库 `post_publications` 表中（snapshot，包含标签快照，关联原始 `post_id`） |


- 保存操作只更新 `posts` 表中的草稿版本，随时可继续编辑。
- 发布操作会生成新的 `post_publications` 快照，并刷新 `posts.latest_publication_id` 与 `published_at` 字段，线上页面永远基于最近一次发布。
- 草稿的标签、摘要等信息在发布时同步写入快照，后续编辑草稿不会影响已发布版本。




### P0 网站文章内容页优化

* [ ] 优化网站文章内容页，引入预期阅读时间、全文摘要等信息



### P0 全面提升 Markdown 编辑器体验

* [x] 替换 Milkdown Markdown 编辑器框架
* [x] Crepe Editor 支持字数统计功能


### P1 提升 AI 能力以及体验

* [x] 支持段落级 AI Chat

* [x] 优化 Prompt 提升 AI 效果
