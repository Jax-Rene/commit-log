{{template "base" .}}

{{define "content"}}
<section class="mx-auto max-w-3xl space-y-8">
	<header class="space-y-3 text-center">
		<p class="text-sm font-medium text-blue-600 dark:text-blue-400">About Me</p>
		<h1 class="text-4xl font-semibold text-slate-900 dark:text-slate-100">{{.page.Title}}</h1>
		{{if .page.Summary}}
		<p class="text-sm text-slate-600 dark:text-slate-400">{{.page.Summary}}</p>
		{{end}}
	</header>

	<section class="post-content">
		{{.content}}
	</section>

	{{with .heatmap}}
	<section class="space-y-6 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm transition-colors dark:border-slate-800 dark:bg-slate-900/70">
		<header class="flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between">
			<div class="space-y-1">
				<h2 class="text-xl font-semibold text-slate-900 dark:text-slate-100">习惯活动热力图</h2>
				<p class="text-xs text-slate-500 dark:text-slate-400">统计区间：{{.RangeStart}} ~ {{.RangeEnd}}</p>
				{{if .GeneratedAt}}
				<p class="text-xs text-slate-400 dark:text-slate-500">更新于 {{.GeneratedAt}}</p>
				{{end}}
			</div>
			<div class="text-right text-xs text-slate-500 dark:text-slate-400">
				<p><span class="text-base font-semibold text-slate-900 dark:text-slate-100">{{.Summary.TotalLogs}}</span> 次打卡</p>
				<p class="mt-1">{{.Summary.ActiveDays}} 个活跃日 · {{.Summary.HabitCount}} 个习惯</p>
			</div>
		</header>

		{{if gt .Summary.HabitCount 0}}
		<ul class="flex flex-wrap gap-2 text-[11px] text-slate-500 dark:text-slate-400">
			{{range .Habits}}
			<li class="inline-flex items-center gap-1 rounded-full border border-slate-200 px-3 py-1 dark:border-slate-700">
				<span class="font-medium text-slate-700 dark:text-slate-200">{{.Name}}</span>
				{{if .TypeTag}}
				<span class="text-slate-400 dark:text-slate-500">· {{.TypeTag}}</span>
				{{end}}
			</li>
			{{end}}
		</ul>
		{{end}}

		<!-- Tailwind safelist：确保服务端动态类被生成 -->
		<span class="hidden bg-slate-200 dark:bg-slate-700/60 bg-emerald-200 dark:bg-emerald-700/60 bg-emerald-300 dark:bg-emerald-600/70 bg-emerald-400 dark:bg-emerald-500/80 bg-emerald-600 dark:bg-emerald-400/80 opacity-30"></span>

		{{if gt .Summary.TotalLogs 0}}
		<div class="space-y-3">
			<div class="flex items-center gap-4">
				<div class="flex w-10 flex-col justify-between py-1 text-[11px] font-medium uppercase tracking-wide text-slate-400 dark:text-slate-500">
					<span>周一</span>
					<span>周三</span>
					<span>周五</span>
					<span>周日</span>
				</div>
				<div class="overflow-x-auto">
					<div class="mb-2 flex gap-1 text-[11px] font-medium uppercase tracking-wide text-slate-400 dark:text-slate-500">
						{{range .Weeks}}
						<span class="flex h-4 w-8 items-center justify-center">{{.MonthLabel}}</span>
						{{end}}
					</div>
					<div class="flex gap-1">
						{{range .Weeks}}
						<div class="grid grid-rows-7 gap-1">
							{{range .Days}}
							<div class="h-3 w-3 rounded {{.Class}} {{if .Muted}}opacity-30{{end}}" title="{{.Tooltip}}">
								<span class="sr-only">{{.Tooltip}}</span>
							</div>
							{{end}}
						</div>
						{{end}}
					</div>
				</div>
			</div>
			<p class="text-xs text-slate-400 dark:text-slate-500">颜色越深代表当天打卡次数越多。</p>
		</div>
		{{else}}
		<div class="flex h-28 items-center justify-center rounded-xl border border-dashed border-slate-200 bg-slate-50/70 text-xs text-slate-500 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-400">暂无打卡数据，欢迎回来继续坚持。</div>
		{{end}}
	</section>
	{{end}}
</section>
{{end}}
