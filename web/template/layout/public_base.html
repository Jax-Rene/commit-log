{{define "base"}}
<!doctype html>
<html lang="zh-CN" class="scroll-smooth">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="color-scheme" content="light dark" />
        {{ $seo := .seo }} {{ $site := .site }}
        <title>
            {{if $seo.fullTitle}}{{$seo.fullTitle}}{{else if $seo.title}}{{if
            $site.name}}{{$seo.title}} ·
            {{$site.name}}{{else}}{{$seo.title}}{{end}}{{else if
            $site.name}}{{$site.name}}{{else}}CommitLog{{end}}
        </title>
        {{with $seo.description}}
        <meta name="description" content="{{.}}">
        {{end}} {{with $seo.keywords}}
        <meta name="keywords" content="{{.}}" />
        {{end}} {{with $seo.robots}}
        <meta name="robots" content="{{.}}" />
        {{end}} {{if $site.avatar}}
        <link rel="icon" href="{{$site.avatar}}" />
        {{end}} {{with $seo.canonical}}
        <link rel="canonical" href="{{.}}">
        {{end}} {{if $site.name}}
        <meta property="og:site_name" content="{{$site.name}}" />
        {{end}} {{with $seo.ogTitle}}
        <meta property="og:title" content="{{.}}" />
        {{end}} {{with $seo.ogDescription}}
        <meta property="og:description" content="{{.}}" />
        {{end}} {{with $seo.ogType}}
        <meta property="og:type" content="{{.}}" />
        {{end}} {{with $seo.ogURL}}
        <meta property="og:url" content="{{.}}" />
        {{end}} {{with $seo.ogImage}}
        <meta property="og:image" content="{{.}}" />
        {{end}} {{with $seo.locale}}
        <meta property="og:locale" content="{{.}}" />
        {{end}} {{with $seo.published}}
        <meta property="article:published_time" content="{{.}}" />
        {{end}} {{with $seo.modified}}
        <meta property="article:modified_time" content="{{.}}" />
        {{end}}
        <meta
            name="twitter:card"
            content="{{if $seo.twitterCard}}{{$seo.twitterCard}}{{else}}summary{{end}}"
        />
        {{with $seo.twitterTitle}}
        <meta name="twitter:title" content="{{.}}" />
        {{end}} {{with $seo.twitterDescription}}
        <meta name="twitter:description" content="{{.}}" />
        {{end}} {{with $seo.twitterImage}}
        <meta name="twitter:image" content="{{.}}" />
        {{end}}
        <link rel="preconnect" href="https://cdn.jsdelivr.net" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/style.css"
        />
        <link rel="stylesheet" href="/static/dist/assets/input.css" />
        <script type="module" src="/static/dist/assets/public.js"></script>
        <style>
            body {
                font-family: var(--font-body);
            }
        </style>
        {{with $seo.siteJsonld}}
        <script type="application/ld+json">
            {{.}}
        </script>
        {{end}} {{with $seo.jsonld}}
        <script type="application/ld+json">
            {{.}}
        </script>
        {{end}}
    </head>

    <body
        class="bg-white text-slate-900 antialiased transition-colors duration-200 dark:bg-slate-950 dark:text-slate-100"
    >
        <header
            class="sticky top-0 z-40 bg-white/80 backdrop-blur supports-backdrop-blur:bg-white/60 dark:border-slate-800 dark:bg-slate-950/70"
        >
            <nav
                class="mx-auto flex max-w-6xl flex-col gap-3 px-4 py-3 sm:flex-row sm:items-center sm:gap-6"
            >
                <div class="hidden flex-1 items-center gap-3 sm:flex">
                    <a href="/" class="flex items-center gap-3">
                        {{if or .site.logoUrlLight .site.logoUrlDark}}
                        <div
                            class="relative flex h-11 w-11 items-center justify-center overflow-hidden rounded-2xl"
                        >
                            {{if .site.logoUrlLight}}
                            <img
                                src="{{.site.logoUrlLight}}"
                                alt="{{.site.name}} Logo"
                                class="h-11 w-11 border-0 object-contain dark:hidden"
                            />
                            {{end}} {{if .site.logoUrlDark}}
                            <img
                                src="{{.site.logoUrlDark}}"
                                alt="{{.site.name}} Logo"
                                class="hidden h-11 w-11 border-0 object-contain dark:block"
                            />
                            {{end}}
                        </div>
                        {{else}}
                        <div
                            class="relative flex h-11 w-11 items-center justify-center overflow-hidden rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-500 text-white"
                        >
                            <span class="text-lg font-semibold"
                                >{{initials .site.name}}</span
                            >
                        </div>
                        {{end}}
                        <span
                            class="text-lg font-semibold text-slate-900 dark:text-slate-100"
                            >{{.site.name}}</span
                        >
                    </a>
                </div>

                <div class="w-full sm:flex-1 sm:px-4">
                    <form method="GET" action="/" class="w-full sm:max-w-md">
                        <label class="relative block">
                            <input
                                type="search"
                                name="search"
                                value="{{.search}}"
                                placeholder="搜索文章"
                                class="w-full rounded-full bg-slate-100 px-4 py-2 pr-10 text-sm text-slate-900 placeholder-slate-400 shadow-sm transition-colors focus:border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:border-blue-500/50 dark:focus:ring-blue-500/30"
                            />
                            <span
                                class="pointer-events-none absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500"
                            >
                                <svg
                                    class="h-5 w-5"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke="currentColor"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18a7.5 7.5 0 006.15-3.35z"
                                    />
                                </svg>
                            </span>
                        </label>
                    </form>
                </div>

                <div
                    class="hidden flex-1 items-center justify-end text-sm font-medium text-slate-600 dark:text-slate-400 sm:flex"
                >
                    <a
                        href="/about"
                        class="transition-colors hover:text-slate-900 dark:hover:text-slate-200"
                        >关于我</a
                    >
                </div>
            </nav>
        </header>

        <main class="mx-auto min-h-screen w-full max-w-6xl px-4 pb-16 pt-2">
            {{block "content" .}}{{end}}
        </main>

        <footer
            class="border-slate-200 bg-white/90 backdrop-blur supports-backdrop-blur:bg-white/70 dark:border-slate-800 dark:bg-slate-950/80"
        >
            <div
                class="mx-auto flex max-w-6xl flex-col items-center gap-2 px-4 py-8 text-center text-sm text-slate-500 dark:text-slate-400 sm:flex-row sm:items-center sm:justify-between sm:text-left"
            >
                <span
                    >© {{if .year}}{{.year}} ·
                    {{.site.name}}{{else}}{{.site.name}}{{end}}</span
                >
                {{if .site.publicFooter}}
                <span>{{.site.publicFooter}}</span>
                {{end}}
            </div>
        </footer>
    </body>
</html>
{{end}}
