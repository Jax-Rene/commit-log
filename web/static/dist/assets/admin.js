var Nx=Object.defineProperty;var Np=n=>{throw TypeError(n)};var Tx=(n,t,e)=>t in n?Nx(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Ke=(n,t,e)=>Tx(n,typeof t!="symbol"?t+"":t,e),xc=(n,t,e)=>t.has(n)||Np("Cannot "+e);var M=(n,t,e)=>(xc(n,t,"read from private field"),e?e.call(n):t.get(n)),Q=(n,t,e)=>t.has(n)?Np("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),q=(n,t,e,r)=>(xc(n,t,"write to private field"),r?r.call(n,e):t.set(n,e),e),La=(n,t,e)=>(xc(n,t,"access private method"),e);import{h as Mx,m as zb}from"./input-D-HjKJEa.js";var Ec=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],co={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var t=new Date(n.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Ps={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var t=n%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Vt=function(n,t){return t===void 0&&(t=2),("000"+n).slice(t*-1)},gn=function(n){return n===!0?1:0};function Tp(n,t){var e;return function(){var r=this,i=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(r,i)},t)}}var Cc=function(n){return n instanceof Array?n:[n]};function Dt(n,t,e){if(e===!0)return n.classList.add(t);n.classList.remove(t)}function Ae(n,t,e){var r=window.document.createElement(n);return t=t||"",e=e||"",r.className=t,e!==void 0&&(r.textContent=e),r}function Pa(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Fb(n,t){if(t(n))return n;if(n.parentNode)return Fb(n.parentNode,t)}function Ba(n,t){var e=Ae("div","numInputWrapper"),r=Ae("input","numInput "+n),i=Ae("span","arrowUp"),o=Ae("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),t!==void 0)for(var s in t)r.setAttribute(s,t[s]);return e.appendChild(r),e.appendChild(i),e.appendChild(o),e}function rn(n){try{if(typeof n.composedPath=="function"){var t=n.composedPath();return t[0]}return n.target}catch{return n.target}}var Sc=function(){},wl=function(n,t,e){return e.months[t?"shorthand":"longhand"][n]},Ax={D:Sc,F:function(n,t,e){n.setMonth(e.months.longhand.indexOf(t))},G:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},H:function(n,t){n.setHours(parseFloat(t))},J:function(n,t){n.setDate(parseFloat(t))},K:function(n,t,e){n.setHours(n.getHours()%12+12*gn(new RegExp(e.amPM[1],"i").test(t)))},M:function(n,t,e){n.setMonth(e.months.shorthand.indexOf(t))},S:function(n,t){n.setSeconds(parseFloat(t))},U:function(n,t){return new Date(parseFloat(t)*1e3)},W:function(n,t,e){var r=parseInt(t),i=new Date(n.getFullYear(),0,2+(r-1)*7,0,0,0,0);return i.setDate(i.getDate()-i.getDay()+e.firstDayOfWeek),i},Y:function(n,t){n.setFullYear(parseFloat(t))},Z:function(n,t){return new Date(t)},d:function(n,t){n.setDate(parseFloat(t))},h:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},i:function(n,t){n.setMinutes(parseFloat(t))},j:function(n,t){n.setDate(parseFloat(t))},l:Sc,m:function(n,t){n.setMonth(parseFloat(t)-1)},n:function(n,t){n.setMonth(parseFloat(t)-1)},s:function(n,t){n.setSeconds(parseFloat(t))},u:function(n,t){return new Date(parseFloat(t))},w:Sc,y:function(n,t){n.setFullYear(2e3+parseFloat(t))}},mi={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},ys={Z:function(n){return n.toISOString()},D:function(n,t,e){return t.weekdays.shorthand[ys.w(n,t,e)]},F:function(n,t,e){return wl(ys.n(n,t,e)-1,!1,t)},G:function(n,t,e){return Vt(ys.h(n,t,e))},H:function(n){return Vt(n.getHours())},J:function(n,t){return t.ordinal!==void 0?n.getDate()+t.ordinal(n.getDate()):n.getDate()},K:function(n,t){return t.amPM[gn(n.getHours()>11)]},M:function(n,t){return wl(n.getMonth(),!0,t)},S:function(n){return Vt(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,t,e){return e.getWeek(n)},Y:function(n){return Vt(n.getFullYear(),4)},d:function(n){return Vt(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return Vt(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,t){return t.weekdays.longhand[n.getDay()]},m:function(n){return Vt(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},$b=function(n){var t=n.config,e=t===void 0?co:t,r=n.l10n,i=r===void 0?Ps:r,o=n.isMobile,s=o===void 0?!1:o;return function(a,l,c){var u=c||i;return e.formatDate!==void 0&&!s?e.formatDate(a,l,u):l.split("").map(function(d,f,h){return ys[d]&&h[f-1]!=="\\"?ys[d](a,u,e):d!=="\\"?d:""}).join("")}},od=function(n){var t=n.config,e=t===void 0?co:t,r=n.l10n,i=r===void 0?Ps:r;return function(o,s,a,l){if(!(o!==0&&!o)){var c=l||i,u,d=o;if(o instanceof Date)u=new Date(o.getTime());else if(typeof o!="string"&&o.toFixed!==void 0)u=new Date(o);else if(typeof o=="string"){var f=s||(e||co).dateFormat,h=String(o).trim();if(h==="today")u=new Date,a=!0;else if(e&&e.parseDate)u=e.parseDate(o,f);else if(/Z$/.test(h)||/GMT$/.test(h))u=new Date(o);else{for(var p=void 0,g=[],y=0,k=0,v="";y<f.length;y++){var E=f[y],R=E==="\\",A=f[y-1]==="\\"||R;if(mi[E]&&!A){v+=mi[E];var w=new RegExp(v).exec(o);w&&(p=!0)&&g[E!=="Y"?"push":"unshift"]({fn:Ax[E],val:w[++k]})}else R||(v+=".")}u=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),g.forEach(function(T){var I=T.fn,F=T.val;return u=I(u,F,c)||u}),u=p?u:void 0}}if(!(u instanceof Date&&!isNaN(u.getTime()))){e.errorHandler(new Error("Invalid date provided: "+d));return}return a===!0&&u.setHours(0,0,0,0),u}}};function on(n,t,e){return e===void 0&&(e=!0),e!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):n.getTime()-t.getTime()}var Ox=function(n,t,e){return n>Math.min(t,e)&&n<Math.max(t,e)},vc=function(n,t,e){return n*3600+t*60+e},Ix=function(n){var t=Math.floor(n/3600),e=(n-t*3600)/60;return[t,e,n-t*3600-e*60]},Dx={DAY:864e5};function _c(n){var t=n.defaultHour,e=n.defaultMinute,r=n.defaultSeconds;if(n.minDate!==void 0){var i=n.minDate.getHours(),o=n.minDate.getMinutes(),s=n.minDate.getSeconds();t<i&&(t=i),t===i&&e<o&&(e=o),t===i&&e===o&&r<s&&(r=n.minDate.getSeconds())}if(n.maxDate!==void 0){var a=n.maxDate.getHours(),l=n.maxDate.getMinutes();t=Math.min(t,a),t===a&&(e=Math.min(l,e)),t===a&&e===l&&(r=n.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:r}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var r=function(a){a&&Object.keys(a).forEach(function(l){return n[l]=a[l]})},i=0,o=t;i<o.length;i++){var s=o[i];r(s)}return n});var _t=function(){return _t=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_t.apply(this,arguments)},Mp=function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var r=Array(n),i=0,t=0;t<e;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},Rx=300;function Lx(n,t){var e={config:_t(_t({},co),rt.defaultConfig),l10n:Ps};e.parseDate=od({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=g,e._setHoursFromDate=f,e._positionCalendar=_n,e.changeMonth=Le,e.changeYear=ve,e.clear=Xe,e.close=S,e.onMouseOver=it,e._createElement=Ae,e.createDay=w,e.destroy=Be,e.isEnabled=pe,e.jumpToDate=v,e.updateValue=Ct,e.open=Ar,e.redraw=Or,e.set=O,e.setDate=se,e.toggle=pn;function r(){e.utils={getDaysInMonth:function(m,b){return m===void 0&&(m=e.currentMonth),b===void 0&&(b=e.currentYear),m===1&&(b%4===0&&b%100!==0||b%400===0)?29:e.l10n.daysInMonth[m]}}}function i(){e.element=e.input=n,e.isOpen=!1,Pn(),ir(),mt(),we(),r(),e.isMobile||A(),k(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&f(e.config.noCalendar?e.latestSelectedDateObj:void 0),Ct(!1)),a();var m=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&m&&_n(),_e("onReady")}function o(){var m;return((m=e.calendarContainer)===null||m===void 0?void 0:m.getRootNode()).activeElement||document.activeElement}function s(m){return m.bind(e)}function a(){var m=e.config;m.weekNumbers===!1&&m.showMonths===1||m.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var b=(e.days.offsetWidth+1)*m.showMonths;e.daysContainer.style.width=b+"px",e.calendarContainer.style.width=b+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function l(m){if(e.selectedDates.length===0){var b=e.config.minDate===void 0||on(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),x=_c(e.config);b.setHours(x.hours,x.minutes,x.seconds,b.getMilliseconds()),e.selectedDates=[b],e.latestSelectedDateObj=b}m!==void 0&&m.type!=="blur"&&$n(m);var _=e._input.value;d(),Ct(),e._input.value!==_&&e._debouncedChange()}function c(m,b){return m%12+12*gn(b===e.l10n.amPM[1])}function u(m){switch(m%24){case 0:case 12:return 12;default:return m%12}}function d(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var m=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,b=(parseInt(e.minuteElement.value,10)||0)%60,x=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(m=c(m,e.amPM.textContent));var _=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&on(e.latestSelectedDateObj,e.config.minDate,!0)===0,P=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&on(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var H=vc(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),z=vc(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),D=vc(m,b,x);if(D>z&&D<H){var V=Ix(H);m=V[0],b=V[1],x=V[2]}}else{if(P){var Y=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;m=Math.min(m,Y.getHours()),m===Y.getHours()&&(b=Math.min(b,Y.getMinutes())),b===Y.getMinutes()&&(x=Math.min(x,Y.getSeconds()))}if(_){var X=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;m=Math.max(m,X.getHours()),m===X.getHours()&&b<X.getMinutes()&&(b=X.getMinutes()),b===X.getMinutes()&&(x=Math.max(x,X.getSeconds()))}}h(m,b,x)}}function f(m){var b=m||e.latestSelectedDateObj;b&&b instanceof Date&&h(b.getHours(),b.getMinutes(),b.getSeconds())}function h(m,b,x){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(m%24,b,x||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=Vt(e.config.time_24hr?m:(12+m)%12+12*gn(m%12===0)),e.minuteElement.value=Vt(b),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[gn(m>=12)]),e.secondElement!==void 0&&(e.secondElement.value=Vt(x)))}function p(m){var b=rn(m),x=parseInt(b.value)+(m.delta||0);(x/1e3>1||m.key==="Enter"&&!/[^\d]/.test(x.toString()))&&ve(x)}function g(m,b,x,_){if(b instanceof Array)return b.forEach(function(P){return g(m,P,x,_)});if(m instanceof Array)return m.forEach(function(P){return g(P,b,x,_)});m.addEventListener(b,x,_),e._handlers.push({remove:function(){return m.removeEventListener(b,x,_)}})}function y(){_e("onChange")}function k(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(x){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+x+"]"),function(_){return g(_,"click",e[x])})}),e.isMobile){It();return}var m=Tp(At,50);if(e._debouncedChange=Tp(y,Rx),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&g(e.daysContainer,"mouseover",function(x){e.config.mode==="range"&&it(rn(x))}),g(e._input,"keydown",Ze),e.calendarContainer!==void 0&&g(e.calendarContainer,"keydown",Ze),!e.config.inline&&!e.config.static&&g(window,"resize",m),window.ontouchstart!==void 0?g(window.document,"touchstart",Me):g(window.document,"mousedown",Me),g(window.document,"focus",Me,{capture:!0}),e.config.clickOpens===!0&&(g(e._input,"focus",e.open),g(e._input,"click",e.open)),e.daysContainer!==void 0&&(g(e.monthNav,"click",Fn),g(e.monthNav,["keyup","increment"],p),g(e.daysContainer,"click",zt)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var b=function(x){return rn(x).select()};g(e.timeContainer,["increment"],l),g(e.timeContainer,"blur",l,{capture:!0}),g(e.timeContainer,"click",E),g([e.hourElement,e.minuteElement],["focus","click"],b),e.secondElement!==void 0&&g(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&g(e.amPM,"click",function(x){l(x)})}e.config.allowInput&&g(e._input,"blur",$e)}function v(m,b){var x=m!==void 0?e.parseDate(m):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),_=e.currentYear,P=e.currentMonth;try{x!==void 0&&(e.currentYear=x.getFullYear(),e.currentMonth=x.getMonth())}catch(H){H.message="Invalid date supplied: "+x,e.config.errorHandler(H)}b&&e.currentYear!==_&&(_e("onYearChange"),Z()),b&&(e.currentYear!==_||e.currentMonth!==P)&&_e("onMonthChange"),e.redraw()}function E(m){var b=rn(m);~b.className.indexOf("arrow")&&R(m,b.classList.contains("arrowUp")?1:-1)}function R(m,b,x){var _=m&&rn(m),P=x||_&&_.parentNode&&_.parentNode.firstChild,H=nt("increment");H.delta=b,P&&P.dispatchEvent(H)}function A(){var m=window.document.createDocumentFragment();if(e.calendarContainer=Ae("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(m.appendChild(oe()),e.innerContainer=Ae("div","flatpickr-innerContainer"),e.config.weekNumbers){var b=C(),x=b.weekWrapper,_=b.weekNumbers;e.innerContainer.appendChild(x),e.weekNumbers=_,e.weekWrapper=x}e.rContainer=Ae("div","flatpickr-rContainer"),e.rContainer.appendChild(ye()),e.daysContainer||(e.daysContainer=Ae("div","flatpickr-days"),e.daysContainer.tabIndex=-1),K(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),m.appendChild(e.innerContainer)}e.config.enableTime&&m.appendChild(de()),Dt(e.calendarContainer,"rangeMode",e.config.mode==="range"),Dt(e.calendarContainer,"animate",e.config.animate===!0),Dt(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(m);var P=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!P&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var H=Ae("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(H,e.element),H.appendChild(e.element),e.altInput&&H.appendChild(e.altInput),H.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function w(m,b,x,_){var P=pe(b,!0),H=Ae("span",m,b.getDate().toString());return H.dateObj=b,H.$i=_,H.setAttribute("aria-label",e.formatDate(b,e.config.ariaDateFormat)),m.indexOf("hidden")===-1&&on(b,e.now)===0&&(e.todayDateElem=H,H.classList.add("today"),H.setAttribute("aria-current","date")),P?(H.tabIndex=-1,$t(b)&&(H.classList.add("selected"),e.selectedDateElem=H,e.config.mode==="range"&&(Dt(H,"startRange",e.selectedDates[0]&&on(b,e.selectedDates[0],!0)===0),Dt(H,"endRange",e.selectedDates[1]&&on(b,e.selectedDates[1],!0)===0),m==="nextMonthDay"&&H.classList.add("inRange")))):H.classList.add("flatpickr-disabled"),e.config.mode==="range"&&gt(b)&&!$t(b)&&H.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&m!=="prevMonthDay"&&_%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(b)+"</span>"),_e("onDayCreate",H),H}function T(m){m.focus(),e.config.mode==="range"&&it(m)}function I(m){for(var b=m>0?0:e.config.showMonths-1,x=m>0?e.config.showMonths:-1,_=b;_!=x;_+=m)for(var P=e.daysContainer.children[_],H=m>0?0:P.children.length-1,z=m>0?P.children.length:-1,D=H;D!=z;D+=m){var V=P.children[D];if(V.className.indexOf("hidden")===-1&&pe(V.dateObj))return V}}function F(m,b){for(var x=m.className.indexOf("Month")===-1?m.dateObj.getMonth():e.currentMonth,_=b>0?e.config.showMonths:-1,P=b>0?1:-1,H=x-e.currentMonth;H!=_;H+=P)for(var z=e.daysContainer.children[H],D=x-e.currentMonth===H?m.$i+b:b<0?z.children.length-1:0,V=z.children.length,Y=D;Y>=0&&Y<V&&Y!=(b>0?V:-1);Y+=P){var X=z.children[Y];if(X.className.indexOf("hidden")===-1&&pe(X.dateObj)&&Math.abs(m.$i-Y)>=Math.abs(b))return T(X)}e.changeMonth(P),N(I(P),0)}function N(m,b){var x=o(),_=Fe(x||document.body),P=m!==void 0?m:_?x:e.selectedDateElem!==void 0&&Fe(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Fe(e.todayDateElem)?e.todayDateElem:I(b>0?1:-1);P===void 0?e._input.focus():_?F(P,b):T(P)}function $(m,b){for(var x=(new Date(m,b,1).getDay()-e.l10n.firstDayOfWeek+7)%7,_=e.utils.getDaysInMonth((b-1+12)%12,m),P=e.utils.getDaysInMonth(b,m),H=window.document.createDocumentFragment(),z=e.config.showMonths>1,D=z?"prevMonthDay hidden":"prevMonthDay",V=z?"nextMonthDay hidden":"nextMonthDay",Y=_+1-x,X=0;Y<=_;Y++,X++)H.appendChild(w("flatpickr-day "+D,new Date(m,b-1,Y),Y,X));for(Y=1;Y<=P;Y++,X++)H.appendChild(w("flatpickr-day",new Date(m,b,Y),Y,X));for(var Te=P+1;Te<=42-x&&(e.config.showMonths===1||X%7!==0);Te++,X++)H.appendChild(w("flatpickr-day "+V,new Date(m,b+1,Te%P),Te,X));var Ht=Ae("div","dayContainer");return Ht.appendChild(H),Ht}function K(){if(e.daysContainer!==void 0){Pa(e.daysContainer),e.weekNumbers&&Pa(e.weekNumbers);for(var m=document.createDocumentFragment(),b=0;b<e.config.showMonths;b++){var x=new Date(e.currentYear,e.currentMonth,1);x.setMonth(e.currentMonth+b),m.appendChild($(x.getFullYear(),x.getMonth()))}e.daysContainer.appendChild(m),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&it()}}function Z(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var m=function(_){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&_<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&_>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var b=0;b<12;b++)if(m(b)){var x=Ae("option","flatpickr-monthDropdown-month");x.value=new Date(e.currentYear,b).getMonth().toString(),x.textContent=wl(b,e.config.shorthandCurrentMonth,e.l10n),x.tabIndex=-1,e.currentMonth===b&&(x.selected=!0),e.monthsDropdownContainer.appendChild(x)}}}function te(){var m=Ae("div","flatpickr-month"),b=window.document.createDocumentFragment(),x;e.config.showMonths>1||e.config.monthSelectorType==="static"?x=Ae("span","cur-month"):(e.monthsDropdownContainer=Ae("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),g(e.monthsDropdownContainer,"change",function(z){var D=rn(z),V=parseInt(D.value,10);e.changeMonth(V-e.currentMonth),_e("onMonthChange")}),Z(),x=e.monthsDropdownContainer);var _=Ba("cur-year",{tabindex:"-1"}),P=_.getElementsByTagName("input")[0];P.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&P.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(P.setAttribute("max",e.config.maxDate.getFullYear().toString()),P.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var H=Ae("div","flatpickr-current-month");return H.appendChild(x),H.appendChild(_),b.appendChild(H),m.appendChild(b),{container:m,yearElement:P,monthElement:x}}function j(){Pa(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var m=e.config.showMonths;m--;){var b=te();e.yearElements.push(b.yearElement),e.monthElements.push(b.monthElement),e.monthNav.appendChild(b.container)}e.monthNav.appendChild(e.nextMonthNav)}function oe(){return e.monthNav=Ae("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=Ae("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=Ae("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,j(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(m){e.__hidePrevMonthArrow!==m&&(Dt(e.prevMonthNav,"flatpickr-disabled",m),e.__hidePrevMonthArrow=m)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(m){e.__hideNextMonthArrow!==m&&(Dt(e.nextMonthNav,"flatpickr-disabled",m),e.__hideNextMonthArrow=m)}}),e.currentYearElement=e.yearElements[0],ar(),e.monthNav}function de(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var m=_c(e.config);e.timeContainer=Ae("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var b=Ae("span","flatpickr-time-separator",":"),x=Ba("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=x.getElementsByTagName("input")[0];var _=Ba("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=_.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=Vt(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?m.hours:u(m.hours)),e.minuteElement.value=Vt(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():m.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(x),e.timeContainer.appendChild(b),e.timeContainer.appendChild(_),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var P=Ba("flatpickr-second");e.secondElement=P.getElementsByTagName("input")[0],e.secondElement.value=Vt(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():m.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(Ae("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(P)}return e.config.time_24hr||(e.amPM=Ae("span","flatpickr-am-pm",e.l10n.amPM[gn((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function ye(){e.weekdayContainer?Pa(e.weekdayContainer):e.weekdayContainer=Ae("div","flatpickr-weekdays");for(var m=e.config.showMonths;m--;){var b=Ae("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(b)}return Ge(),e.weekdayContainer}function Ge(){if(e.weekdayContainer){var m=e.l10n.firstDayOfWeek,b=Mp(e.l10n.weekdays.shorthand);m>0&&m<b.length&&(b=Mp(b.splice(m,b.length),b.splice(0,m)));for(var x=e.config.showMonths;x--;)e.weekdayContainer.children[x].innerHTML=`
      <span class='flatpickr-weekday'>
        `+b.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function C(){e.calendarContainer.classList.add("hasWeeks");var m=Ae("div","flatpickr-weekwrapper");m.appendChild(Ae("span","flatpickr-weekday",e.l10n.weekAbbreviation));var b=Ae("div","flatpickr-weeks");return m.appendChild(b),{weekWrapper:m,weekNumbers:b}}function Le(m,b){b===void 0&&(b=!0);var x=b?m:m-e.currentMonth;x<0&&e._hidePrevMonthArrow===!0||x>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=x,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,_e("onYearChange"),Z()),K(),_e("onMonthChange"),ar())}function Xe(m,b){if(m===void 0&&(m=!0),b===void 0&&(b=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,b===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var x=_c(e.config),_=x.hours,P=x.minutes,H=x.seconds;h(_,P,H)}e.redraw(),m&&_e("onChange")}function S(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),_e("onClose")}function Be(){e.config!==void 0&&_e("onDestroy");for(var m=e._handlers.length;m--;)e._handlers[m].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var b=e.calendarContainer.parentNode;if(b.lastChild&&b.removeChild(b.lastChild),b.parentNode){for(;b.firstChild;)b.parentNode.insertBefore(b.firstChild,b);b.parentNode.removeChild(b)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(x){try{delete e[x]}catch{}})}function ze(m){return e.calendarContainer.contains(m)}function Me(m){if(e.isOpen&&!e.config.inline){var b=rn(m),x=ze(b),_=b===e.input||b===e.altInput||e.element.contains(b)||m.path&&m.path.indexOf&&(~m.path.indexOf(e.input)||~m.path.indexOf(e.altInput)),P=!_&&!x&&!ze(m.relatedTarget),H=!e.config.ignoredFocusElements.some(function(z){return z.contains(b)});P&&H&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&l(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function ve(m){if(!(!m||e.config.minDate&&m<e.config.minDate.getFullYear()||e.config.maxDate&&m>e.config.maxDate.getFullYear())){var b=m,x=e.currentYear!==b;e.currentYear=b||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),x&&(e.redraw(),_e("onYearChange"),Z())}}function pe(m,b){var x;b===void 0&&(b=!0);var _=e.parseDate(m,void 0,b);if(e.config.minDate&&_&&on(_,e.config.minDate,b!==void 0?b:!e.minDateHasTime)<0||e.config.maxDate&&_&&on(_,e.config.maxDate,b!==void 0?b:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(_===void 0)return!1;for(var P=!!e.config.enable,H=(x=e.config.enable)!==null&&x!==void 0?x:e.config.disable,z=0,D=void 0;z<H.length;z++){if(D=H[z],typeof D=="function"&&D(_))return P;if(D instanceof Date&&_!==void 0&&D.getTime()===_.getTime())return P;if(typeof D=="string"){var V=e.parseDate(D,void 0,!0);return V&&V.getTime()===_.getTime()?P:!P}else if(typeof D=="object"&&_!==void 0&&D.from&&D.to&&_.getTime()>=D.from.getTime()&&_.getTime()<=D.to.getTime())return P}return!P}function Fe(m){return e.daysContainer!==void 0?m.className.indexOf("hidden")===-1&&m.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(m):!1}function $e(m){var b=m.target===e._input,x=e._input.value.trimEnd()!==Ne();b&&x&&!(m.relatedTarget&&ze(m.relatedTarget))&&e.setDate(e._input.value,!0,m.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Ze(m){var b=rn(m),x=e.config.wrap?n.contains(b):b===e._input,_=e.config.allowInput,P=e.isOpen&&(!_||!x),H=e.config.inline&&x&&!_;if(m.keyCode===13&&x){if(_)return e.setDate(e._input.value,!0,b===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),b.blur();e.open()}else if(ze(b)||P||H){var z=!!e.timeContainer&&e.timeContainer.contains(b);switch(m.keyCode){case 13:z?(m.preventDefault(),l(),zn()):zt(m);break;case 27:m.preventDefault(),zn();break;case 8:case 46:x&&!e.config.allowInput&&(m.preventDefault(),e.clear());break;case 37:case 39:if(!z&&!x){m.preventDefault();var D=o();if(e.daysContainer!==void 0&&(_===!1||D&&Fe(D))){var V=m.keyCode===39?1:-1;m.ctrlKey?(m.stopPropagation(),Le(V),N(I(1),0)):N(void 0,V)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:m.preventDefault();var Y=m.keyCode===40?1:-1;e.daysContainer&&b.$i!==void 0||b===e.input||b===e.altInput?m.ctrlKey?(m.stopPropagation(),ve(e.currentYear-Y),N(I(1),0)):z||N(void 0,Y*7):b===e.currentYearElement?ve(e.currentYear-Y):e.config.enableTime&&(!z&&e.hourElement&&e.hourElement.focus(),l(m),e._debouncedChange());break;case 9:if(z){var X=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(bt){return bt}),Te=X.indexOf(b);if(Te!==-1){var Ht=X[Te+(m.shiftKey?-1:1)];m.preventDefault(),(Ht||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(b)&&m.shiftKey&&(m.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&b===e.amPM)switch(m.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],d(),Ct();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],d(),Ct();break}(x||ze(b))&&_e("onKeyDown",m)}function it(m,b){if(b===void 0&&(b="flatpickr-day"),!(e.selectedDates.length!==1||m&&(!m.classList.contains(b)||m.classList.contains("flatpickr-disabled")))){for(var x=m?m.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),_=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),P=Math.min(x,e.selectedDates[0].getTime()),H=Math.max(x,e.selectedDates[0].getTime()),z=!1,D=0,V=0,Y=P;Y<H;Y+=Dx.DAY)pe(new Date(Y),!0)||(z=z||Y>P&&Y<H,Y<_&&(!D||Y>D)?D=Y:Y>_&&(!V||Y<V)&&(V=Y));var X=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+b));X.forEach(function(Te){var Ht=Te.dateObj,bt=Ht.getTime(),li=D>0&&bt<D||V>0&&bt>V;if(li){Te.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Hn){Te.classList.remove(Hn)});return}else if(z&&!li)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Hn){Te.classList.remove(Hn)}),m!==void 0&&(m.classList.add(x<=e.selectedDates[0].getTime()?"startRange":"endRange"),_<x&&bt===_?Te.classList.add("startRange"):_>x&&bt===_&&Te.classList.add("endRange"),bt>=D&&(V===0||bt<=V)&&Ox(bt,_,x)&&Te.classList.add("inRange"))})}}function At(){e.isOpen&&!e.config.static&&!e.config.inline&&_n()}function Ar(m,b){if(b===void 0&&(b=e._positionElement),e.isMobile===!0){if(m){m.preventDefault();var x=rn(m);x&&x.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),_e("onOpen");return}else if(e._input.disabled||e.config.inline)return;var _=e.isOpen;e.isOpen=!0,_||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),_e("onOpen"),_n(b)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(m===void 0||!e.timeContainer.contains(m.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function rr(m){return function(b){var x=e.config["_"+m+"Date"]=e.parseDate(b,e.config.dateFormat),_=e.config["_"+(m==="min"?"max":"min")+"Date"];x!==void 0&&(e[m==="min"?"minDateHasTime":"maxDateHasTime"]=x.getHours()>0||x.getMinutes()>0||x.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(P){return pe(P)}),!e.selectedDates.length&&m==="min"&&f(x),Ct()),e.daysContainer&&(Or(),x!==void 0?e.currentYearElement[m]=x.getFullYear().toString():e.currentYearElement.removeAttribute(m),e.currentYearElement.disabled=!!_&&x!==void 0&&_.getFullYear()===x.getFullYear())}}function Pn(){var m=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],b=_t(_t({},JSON.parse(JSON.stringify(n.dataset||{}))),t),x={};e.config.parseDate=b.parseDate,e.config.formatDate=b.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(X){e.config._enable=fe(X)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(X){e.config._disable=fe(X)}});var _=b.mode==="time";if(!b.dateFormat&&(b.enableTime||_)){var P=rt.defaultConfig.dateFormat||co.dateFormat;x.dateFormat=b.noCalendar||_?"H:i"+(b.enableSeconds?":S":""):P+" H:i"+(b.enableSeconds?":S":"")}if(b.altInput&&(b.enableTime||_)&&!b.altFormat){var H=rt.defaultConfig.altFormat||co.altFormat;x.altFormat=b.noCalendar||_?"h:i"+(b.enableSeconds?":S K":" K"):H+(" h:i"+(b.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:rr("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:rr("max")});var z=function(X){return function(Te){e.config[X==="min"?"_minTime":"_maxTime"]=e.parseDate(Te,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:z("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:z("max")}),b.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,x,b);for(var D=0;D<m.length;D++)e.config[m[D]]=e.config[m[D]]===!0||e.config[m[D]]==="true";Ec.filter(function(X){return e.config[X]!==void 0}).forEach(function(X){e.config[X]=Cc(e.config[X]||[]).map(s)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var D=0;D<e.config.plugins.length;D++){var V=e.config.plugins[D](e)||{};for(var Y in V)Ec.indexOf(Y)>-1?e.config[Y]=Cc(V[Y]).map(s).concat(e.config[Y]):typeof b[Y]>"u"&&(e.config[Y]=V[Y])}b.altInputClass||(e.config.altInputClass=Bn().className+" "+e.config.altInputClass),_e("onParseConfig")}function Bn(){return e.config.wrap?n.querySelector("[data-input]"):n}function ir(){typeof e.config.locale!="object"&&typeof rt.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=_t(_t({},rt.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?rt.l10ns[e.config.locale]:void 0),mi.D="("+e.l10n.weekdays.shorthand.join("|")+")",mi.l="("+e.l10n.weekdays.longhand.join("|")+")",mi.M="("+e.l10n.months.shorthand.join("|")+")",mi.F="("+e.l10n.months.longhand.join("|")+")",mi.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var m=_t(_t({},t),JSON.parse(JSON.stringify(n.dataset||{})));m.time_24hr===void 0&&rt.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=$b(e),e.parseDate=od({config:e.config,l10n:e.l10n})}function _n(m){if(typeof e.config.position=="function")return void e.config.position(e,m);if(e.calendarContainer!==void 0){_e("onPreCalendarPosition");var b=m||e._positionElement,x=Array.prototype.reduce.call(e.calendarContainer.children,(function(Un,Aa){return Un+Aa.offsetHeight}),0),_=e.calendarContainer.offsetWidth,P=e.config.position.split(" "),H=P[0],z=P.length>1?P[1]:null,D=b.getBoundingClientRect(),V=window.innerHeight-D.bottom,Y=H==="above"||H!=="below"&&V<x&&D.top>x,X=window.pageYOffset+D.top+(Y?-x-2:b.offsetHeight+2);if(Dt(e.calendarContainer,"arrowTop",!Y),Dt(e.calendarContainer,"arrowBottom",Y),!e.config.inline){var Te=window.pageXOffset+D.left,Ht=!1,bt=!1;z==="center"?(Te-=(_-D.width)/2,Ht=!0):z==="right"&&(Te-=_-D.width,bt=!0),Dt(e.calendarContainer,"arrowLeft",!Ht&&!bt),Dt(e.calendarContainer,"arrowCenter",Ht),Dt(e.calendarContainer,"arrowRight",bt);var li=window.document.body.offsetWidth-(window.pageXOffset+D.right),Hn=Te+_>window.document.body.offsetWidth,hc=li+_>window.document.body.offsetWidth;if(Dt(e.calendarContainer,"rightMost",Hn),!e.config.static)if(e.calendarContainer.style.top=X+"px",!Hn)e.calendarContainer.style.left=Te+"px",e.calendarContainer.style.right="auto";else if(!hc)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=li+"px";else{var jo=or();if(jo===void 0)return;var pc=window.document.body.offsetWidth,Ma=Math.max(0,pc/2-_/2),Xi=".flatpickr-calendar.centerMost:before",mc=".flatpickr-calendar.centerMost:after",gc=jo.cssRules.length,bc="{left:"+D.left+"px;right:auto;}";Dt(e.calendarContainer,"rightMost",!1),Dt(e.calendarContainer,"centerMost",!0),jo.insertRule(Xi+","+mc+bc,gc),e.calendarContainer.style.left=Ma+"px",e.calendarContainer.style.right="auto"}}}}function or(){for(var m=null,b=0;b<document.styleSheets.length;b++){var x=document.styleSheets[b];if(x.cssRules){try{x.cssRules}catch{continue}m=x;break}}return m??sr()}function sr(){var m=document.createElement("style");return document.head.appendChild(m),m.sheet}function Or(){e.config.noCalendar||e.isMobile||(Z(),ar(),K())}function zn(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function zt(m){m.preventDefault(),m.stopPropagation();var b=function(X){return X.classList&&X.classList.contains("flatpickr-day")&&!X.classList.contains("flatpickr-disabled")&&!X.classList.contains("notAllowed")},x=Fb(rn(m),b);if(x!==void 0){var _=x,P=e.latestSelectedDateObj=new Date(_.dateObj.getTime()),H=(P.getMonth()<e.currentMonth||P.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=_,e.config.mode==="single")e.selectedDates=[P];else if(e.config.mode==="multiple"){var z=$t(P);z?e.selectedDates.splice(parseInt(z),1):e.selectedDates.push(P)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=P,e.selectedDates.push(P),on(P,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(X,Te){return X.getTime()-Te.getTime()}));if(d(),H){var D=e.currentYear!==P.getFullYear();e.currentYear=P.getFullYear(),e.currentMonth=P.getMonth(),D&&(_e("onYearChange"),Z()),_e("onMonthChange")}if(ar(),K(),Ct(),!H&&e.config.mode!=="range"&&e.config.showMonths===1?T(_):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var V=e.config.mode==="single"&&!e.config.enableTime,Y=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(V||Y)&&zn()}y()}}var Ft={locale:[ir,Ge],showMonths:[j,a,ye],minDate:[v],maxDate:[v],positionElement:[Ot],clickOpens:[function(){e.config.clickOpens===!0?(g(e._input,"focus",e.open),g(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function O(m,b){if(m!==null&&typeof m=="object"){Object.assign(e.config,m);for(var x in m)Ft[x]!==void 0&&Ft[x].forEach(function(_){return _()})}else e.config[m]=b,Ft[m]!==void 0?Ft[m].forEach(function(_){return _()}):Ec.indexOf(m)>-1&&(e.config[m]=Cc(b));e.redraw(),Ct(!0)}function U(m,b){var x=[];if(m instanceof Array)x=m.map(function(_){return e.parseDate(_,b)});else if(m instanceof Date||typeof m=="number")x=[e.parseDate(m,b)];else if(typeof m=="string")switch(e.config.mode){case"single":case"time":x=[e.parseDate(m,b)];break;case"multiple":x=m.split(e.config.conjunction).map(function(_){return e.parseDate(_,b)});break;case"range":x=m.split(e.l10n.rangeSeparator).map(function(_){return e.parseDate(_,b)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(m)));e.selectedDates=e.config.allowInvalidPreload?x:x.filter(function(_){return _ instanceof Date&&pe(_,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(_,P){return _.getTime()-P.getTime()})}function se(m,b,x){if(b===void 0&&(b=!1),x===void 0&&(x=e.config.dateFormat),m!==0&&!m||m instanceof Array&&m.length===0)return e.clear(b);U(m,x),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),v(void 0,b),f(),e.selectedDates.length===0&&e.clear(!1),Ct(b),b&&_e("onChange")}function fe(m){return m.slice().map(function(b){return typeof b=="string"||typeof b=="number"||b instanceof Date?e.parseDate(b,void 0,!0):b&&typeof b=="object"&&b.from&&b.to?{from:e.parseDate(b.from,void 0),to:e.parseDate(b.to,void 0)}:b}).filter(function(b){return b})}function we(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var m=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);m&&U(m,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function mt(){if(e.input=Bn(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=Ae(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Ot()}function Ot(){e._positionElement=e.config.positionElement||e._input}function It(){var m=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=Ae("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=m,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=m==="datetime-local"?"Y-m-d\\TH:i:S":m==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}g(e.mobileInput,"change",function(b){e.setDate(rn(b).value,!1,e.mobileFormatStr),_e("onChange"),_e("onClose")})}function pn(m){if(e.isOpen===!0)return e.close();e.open(m)}function _e(m,b){if(e.config!==void 0){var x=e.config[m];if(x!==void 0&&x.length>0)for(var _=0;x[_]&&_<x.length;_++)x[_](e.selectedDates,e.input.value,e,b);m==="onChange"&&(e.input.dispatchEvent(nt("change")),e.input.dispatchEvent(nt("input")))}}function nt(m){var b=document.createEvent("Event");return b.initEvent(m,!0,!0),b}function $t(m){for(var b=0;b<e.selectedDates.length;b++){var x=e.selectedDates[b];if(x instanceof Date&&on(x,m)===0)return""+b}return!1}function gt(m){return e.config.mode!=="range"||e.selectedDates.length<2?!1:on(m,e.selectedDates[0])>=0&&on(m,e.selectedDates[1])<=0}function ar(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(m,b){var x=new Date(e.currentYear,e.currentMonth,1);x.setMonth(e.currentMonth+b),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[b].textContent=wl(x.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=x.getMonth().toString(),m.value=x.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Ne(m){var b=m||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(x){return e.formatDate(x,b)}).filter(function(x,_,P){return e.config.mode!=="range"||e.config.enableTime||P.indexOf(x)===_}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function Ct(m){m===void 0&&(m=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Ne(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=Ne(e.config.altFormat)),m!==!1&&_e("onValueUpdate")}function Fn(m){var b=rn(m),x=e.prevMonthNav.contains(b),_=e.nextMonthNav.contains(b);x||_?Le(x?-1:1):e.yearElements.indexOf(b)>=0?b.select():b.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):b.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function $n(m){m.preventDefault();var b=m.type==="keydown",x=rn(m),_=x;e.amPM!==void 0&&x===e.amPM&&(e.amPM.textContent=e.l10n.amPM[gn(e.amPM.textContent===e.l10n.amPM[0])]);var P=parseFloat(_.getAttribute("min")),H=parseFloat(_.getAttribute("max")),z=parseFloat(_.getAttribute("step")),D=parseInt(_.value,10),V=m.delta||(b?m.which===38?1:-1:0),Y=D+z*V;if(typeof _.value<"u"&&_.value.length===2){var X=_===e.hourElement,Te=_===e.minuteElement;Y<P?(Y=H+Y+gn(!X)+(gn(X)&&gn(!e.amPM)),Te&&R(void 0,-1,e.hourElement)):Y>H&&(Y=_===e.hourElement?Y-H-gn(!e.amPM):P,Te&&R(void 0,1,e.hourElement)),e.amPM&&X&&(z===1?Y+D===23:Math.abs(Y-D)>z)&&(e.amPM.textContent=e.l10n.amPM[gn(e.amPM.textContent===e.l10n.amPM[0])]),_.value=Vt(Y)}}return i(),e}function uo(n,t){for(var e=Array.prototype.slice.call(n).filter(function(s){return s instanceof HTMLElement}),r=[],i=0;i<e.length;i++){var o=e[i];try{if(o.getAttribute("data-fp-omit")!==null)continue;o._flatpickr!==void 0&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=Lx(o,t||{}),r.push(o._flatpickr)}catch(s){console.error(s)}}return r.length===1?r[0]:r}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return uo(this,n)},HTMLElement.prototype.flatpickr=function(n){return uo([this],n)});var rt=function(n,t){return typeof n=="string"?uo(window.document.querySelectorAll(n),t):n instanceof Node?uo([n],t):uo(n,t)};rt.defaultConfig={};rt.l10ns={en:_t({},Ps),default:_t({},Ps)};rt.localize=function(n){rt.l10ns.default=_t(_t({},rt.l10ns.default),n)};rt.setDefaults=function(n){rt.defaultConfig=_t(_t({},rt.defaultConfig),n)};rt.parseDate=od({});rt.formatDate=$b({});rt.compareDates=on;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return uo(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=rt);function Hb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var is={exports:{}},Px=is.exports,Ap;function Bx(){return Ap||(Ap=1,(function(n,t){(function(e,r){r(t)})(Px,(function(e){var r=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},i={weekdays:{shorthand:["周日","周一","周二","周三","周四","周五","周六"],longhand:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},months:{shorthand:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],longhand:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},rangeSeparator:" 至 ",weekAbbreviation:"周",scrollTitle:"滚动切换",toggleTitle:"点击切换 12/24 小时时制"};r.l10ns.zh=i;var o=r.l10ns;e.Mandarin=i,e.default=o,Object.defineProperty(e,"__esModule",{value:!0})}))})(is,is.exports)),is.exports}var zx=Bx();/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function Op(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function Ub(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Op(Object(e),!0).forEach(function(r){Ux(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Op(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function Fx(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var r=e.call(n,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function qb(n){var t=Fx(n,"string");return typeof t=="symbol"?t:t+""}function sd(n){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sd(n)}function $x(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Ip(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,qb(r.key),r)}}function Hx(n,t,e){return t&&Ip(n.prototype,t),e&&Ip(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ux(n,t,e){return t=qb(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Wb(n){return qx(n)||Wx(n)||Kx(n)||Vx()}function qx(n){if(Array.isArray(n))return ad(n)}function Wx(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Kx(n,t){if(n){if(typeof n=="string")return ad(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ad(n,t)}}function ad(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function Vx(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ql=typeof window<"u"&&typeof window.document<"u",Zn=ql?window:{},ff=ql&&Zn.document.documentElement?"ontouchstart"in Zn.document.documentElement:!1,hf=ql?"PointerEvent"in Zn:!1,je="cropper",pf="all",Kb="crop",Vb="move",Yb="zoom",ui="e",di="w",Zi="s",Dr="n",Jo="ne",Xo="nw",Zo="se",Qo="sw",ld="".concat(je,"-crop"),Dp="".concat(je,"-disabled"),Yt="".concat(je,"-hidden"),Rp="".concat(je,"-hide"),Yx="".concat(je,"-invisible"),xl="".concat(je,"-modal"),cd="".concat(je,"-move"),Bs="".concat(je,"Action"),za="".concat(je,"Preview"),mf="crop",Gb="move",jb="none",ud="crop",dd="cropend",fd="cropmove",hd="cropstart",Lp="dblclick",Gx=ff?"touchstart":"mousedown",jx=ff?"touchmove":"mousemove",Jx=ff?"touchend touchcancel":"mouseup",Pp=hf?"pointerdown":Gx,Bp=hf?"pointermove":jx,zp=hf?"pointerup pointercancel":Jx,Fp="ready",$p="resize",Hp="wheel",pd="zoom",Up="image/jpeg",Xx=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Zx=/^data:/,Qx=/^data:image\/jpeg;base64,/,eE=/^img|canvas$/i,Jb=200,Xb=100,qp={viewMode:0,dragMode:mf,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Jb,minContainerHeight:Xb,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},tE='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',nE=Number.isNaN||Zn.isNaN;function ke(n){return typeof n=="number"&&!nE(n)}var Wp=function(t){return t>0&&t<1/0};function Nc(n){return typeof n>"u"}function Fi(n){return sd(n)==="object"&&n!==null}var rE=Object.prototype.hasOwnProperty;function ao(n){if(!Fi(n))return!1;try{var t=n.constructor,e=t.prototype;return t&&e&&rE.call(e,"isPrototypeOf")}catch{return!1}}function Kt(n){return typeof n=="function"}var iE=Array.prototype.slice;function Zb(n){return Array.from?Array.from(n):iE.call(n)}function st(n,t){return n&&Kt(t)&&(Array.isArray(n)||ke(n.length)?Zb(n).forEach(function(e,r){t.call(n,e,r,n)}):Fi(n)&&Object.keys(n).forEach(function(e){t.call(n,n[e],e,n)})),n}var Je=Object.assign||function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return Fi(t)&&r.length>0&&r.forEach(function(o){Fi(o)&&Object.keys(o).forEach(function(s){t[s]=o[s]})}),t},oE=/\.\d*(?:0|9){12}\d*$/;function fo(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return oE.test(n)?Math.round(n*t)/t:n}var sE=/^width|height|left|top|marginLeft|marginTop$/;function Wr(n,t){var e=n.style;st(t,function(r,i){sE.test(i)&&ke(r)&&(r="".concat(r,"px")),e[i]=r})}function aE(n,t){return n.classList?n.classList.contains(t):n.className.indexOf(t)>-1}function dt(n,t){if(t){if(ke(n.length)){st(n,function(r){dt(r,t)});return}if(n.classList){n.classList.add(t);return}var e=n.className.trim();e?e.indexOf(t)<0&&(n.className="".concat(e," ").concat(t)):n.className=t}}function Xn(n,t){if(t){if(ke(n.length)){st(n,function(e){Xn(e,t)});return}if(n.classList){n.classList.remove(t);return}n.className.indexOf(t)>=0&&(n.className=n.className.replace(t,""))}}function lo(n,t,e){if(t){if(ke(n.length)){st(n,function(r){lo(r,t,e)});return}e?dt(n,t):Xn(n,t)}}var lE=/([a-z\d])([A-Z])/g;function gf(n){return n.replace(lE,"$1-$2").toLowerCase()}function md(n,t){return Fi(n[t])?n[t]:n.dataset?n.dataset[t]:n.getAttribute("data-".concat(gf(t)))}function zs(n,t,e){Fi(e)?n[t]=e:n.dataset?n.dataset[t]=e:n.setAttribute("data-".concat(gf(t)),e)}function cE(n,t){if(Fi(n[t]))try{delete n[t]}catch{n[t]=void 0}else if(n.dataset)try{delete n.dataset[t]}catch{n.dataset[t]=void 0}else n.removeAttribute("data-".concat(gf(t)))}var Qb=/\s\s*/,ey=(function(){var n=!1;if(ql){var t=!1,e=function(){},r=Object.defineProperty({},"once",{get:function(){return n=!0,t},set:function(o){t=o}});Zn.addEventListener("test",e,r),Zn.removeEventListener("test",e,r)}return n})();function Tn(n,t,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=e;t.trim().split(Qb).forEach(function(o){if(!ey){var s=n.listeners;s&&s[o]&&s[o][e]&&(i=s[o][e],delete s[o][e],Object.keys(s[o]).length===0&&delete s[o],Object.keys(s).length===0&&delete n.listeners)}n.removeEventListener(o,i,r)})}function mn(n,t,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=e;t.trim().split(Qb).forEach(function(o){if(r.once&&!ey){var s=n.listeners,a=s===void 0?{}:s;i=function(){delete a[o][e],n.removeEventListener(o,i,r);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];e.apply(n,u)},a[o]||(a[o]={}),a[o][e]&&n.removeEventListener(o,a[o][e],r),a[o][e]=i,n.listeners=a}n.addEventListener(o,i,r)})}function ho(n,t,e){var r;return Kt(Event)&&Kt(CustomEvent)?r=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,e)),n.dispatchEvent(r)}function ty(n){var t=n.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Tc=Zn.location,uE=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Kp(n){var t=n.match(uE);return t!==null&&(t[1]!==Tc.protocol||t[2]!==Tc.hostname||t[3]!==Tc.port)}function Vp(n){var t="timestamp=".concat(new Date().getTime());return n+(n.indexOf("?")===-1?"?":"&")+t}function ks(n){var t=n.rotate,e=n.scaleX,r=n.scaleY,i=n.translateX,o=n.translateY,s=[];ke(i)&&i!==0&&s.push("translateX(".concat(i,"px)")),ke(o)&&o!==0&&s.push("translateY(".concat(o,"px)")),ke(t)&&t!==0&&s.push("rotate(".concat(t,"deg)")),ke(e)&&e!==1&&s.push("scaleX(".concat(e,")")),ke(r)&&r!==1&&s.push("scaleY(".concat(r,")"));var a=s.length?s.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function dE(n){var t=Ub({},n),e=0;return st(n,function(r,i){delete t[i],st(t,function(o){var s=Math.abs(r.startX-o.startX),a=Math.abs(r.startY-o.startY),l=Math.abs(r.endX-o.endX),c=Math.abs(r.endY-o.endY),u=Math.sqrt(s*s+a*a),d=Math.sqrt(l*l+c*c),f=(d-u)/u;Math.abs(f)>Math.abs(e)&&(e=f)})}),e}function Fa(n,t){var e=n.pageX,r=n.pageY,i={endX:e,endY:r};return t?i:Ub({startX:e,startY:r},i)}function fE(n){var t=0,e=0,r=0;return st(n,function(i){var o=i.startX,s=i.startY;t+=o,e+=s,r+=1}),t/=r,e/=r,{pageX:t,pageY:e}}function Kr(n){var t=n.aspectRatio,e=n.height,r=n.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",o=Wp(r),s=Wp(e);if(o&&s){var a=e*t;i==="contain"&&a>r||i==="cover"&&a<r?e=r/t:r=e*t}else o?e=r/t:s&&(r=e*t);return{width:r,height:e}}function hE(n){var t=n.width,e=n.height,r=n.degree;if(r=Math.abs(r)%180,r===90)return{width:e,height:t};var i=r%90*Math.PI/180,o=Math.sin(i),s=Math.cos(i),a=t*s+e*o,l=t*o+e*s;return r>90?{width:l,height:a}:{width:a,height:l}}function pE(n,t,e,r){var i=t.aspectRatio,o=t.naturalWidth,s=t.naturalHeight,a=t.rotate,l=a===void 0?0:a,c=t.scaleX,u=c===void 0?1:c,d=t.scaleY,f=d===void 0?1:d,h=e.aspectRatio,p=e.naturalWidth,g=e.naturalHeight,y=r.fillColor,k=y===void 0?"transparent":y,v=r.imageSmoothingEnabled,E=v===void 0?!0:v,R=r.imageSmoothingQuality,A=R===void 0?"low":R,w=r.maxWidth,T=w===void 0?1/0:w,I=r.maxHeight,F=I===void 0?1/0:I,N=r.minWidth,$=N===void 0?0:N,K=r.minHeight,Z=K===void 0?0:K,te=document.createElement("canvas"),j=te.getContext("2d"),oe=Kr({aspectRatio:h,width:T,height:F}),de=Kr({aspectRatio:h,width:$,height:Z},"cover"),ye=Math.min(oe.width,Math.max(de.width,p)),Ge=Math.min(oe.height,Math.max(de.height,g)),C=Kr({aspectRatio:i,width:T,height:F}),Le=Kr({aspectRatio:i,width:$,height:Z},"cover"),Xe=Math.min(C.width,Math.max(Le.width,o)),S=Math.min(C.height,Math.max(Le.height,s)),Be=[-Xe/2,-S/2,Xe,S];return te.width=fo(ye),te.height=fo(Ge),j.fillStyle=k,j.fillRect(0,0,ye,Ge),j.save(),j.translate(ye/2,Ge/2),j.rotate(l*Math.PI/180),j.scale(u,f),j.imageSmoothingEnabled=E,j.imageSmoothingQuality=A,j.drawImage.apply(j,[n].concat(Wb(Be.map(function(ze){return Math.floor(fo(ze))})))),j.restore(),te}var ny=String.fromCharCode;function mE(n,t,e){var r="";e+=t;for(var i=t;i<e;i+=1)r+=ny(n.getUint8(i));return r}var gE=/^data:.*,/;function bE(n){var t=n.replace(gE,""),e=atob(t),r=new ArrayBuffer(e.length),i=new Uint8Array(r);return st(i,function(o,s){i[s]=e.charCodeAt(s)}),r}function yE(n,t){for(var e=[],r=8192,i=new Uint8Array(n);i.length>0;)e.push(ny.apply(null,Zb(i.subarray(0,r)))),i=i.subarray(r);return"data:".concat(t,";base64,").concat(btoa(e.join("")))}function kE(n){var t=new DataView(n),e;try{var r,i,o;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var s=t.byteLength,a=2;a+1<s;){if(t.getUint8(a)===255&&t.getUint8(a+1)===225){i=a;break}a+=1}if(i){var l=i+4,c=i+10;if(mE(t,l,4)==="Exif"){var u=t.getUint16(c);if(r=u===18761,(r||u===19789)&&t.getUint16(c+2,r)===42){var d=t.getUint32(c+4,r);d>=8&&(o=c+d)}}}if(o){var f=t.getUint16(o,r),h,p;for(p=0;p<f;p+=1)if(h=o+p*12+2,t.getUint16(h,r)===274){h+=8,e=t.getUint16(h,r),t.setUint16(h,1,r);break}}}catch{e=1}return e}function wE(n){var t=0,e=1,r=1;switch(n){case 2:e=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,e=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:e,scaleY:r}}var xE={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,r=this.container,i=this.cropper,o=Number(e.minContainerWidth),s=Number(e.minContainerHeight);dt(i,Yt),Xn(t,Yt);var a={width:Math.max(r.offsetWidth,o>=0?o:Jb),height:Math.max(r.offsetHeight,s>=0?s:Xb)};this.containerData=a,Wr(i,{width:a.width,height:a.height}),dt(t,Yt),Xn(i,Yt)},initCanvas:function(){var t=this.containerData,e=this.imageData,r=this.options.viewMode,i=Math.abs(e.rotate)%180===90,o=i?e.naturalHeight:e.naturalWidth,s=i?e.naturalWidth:e.naturalHeight,a=o/s,l=t.width,c=t.height;t.height*a>t.width?r===3?l=t.height*a:c=t.width/a:r===3?c=t.width/a:l=t.height*a;var u={aspectRatio:a,naturalWidth:o,naturalHeight:s,width:l,height:c};this.canvasData=u,this.limited=r===1||r===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(t.width-u.width)/2,u.top=(t.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=Je({},u)},limitCanvas:function(t,e){var r=this.options,i=this.containerData,o=this.canvasData,s=this.cropBoxData,a=r.viewMode,l=o.aspectRatio,c=this.cropped&&s;if(t){var u=Number(r.minCanvasWidth)||0,d=Number(r.minCanvasHeight)||0;a>1?(u=Math.max(u,i.width),d=Math.max(d,i.height),a===3&&(d*l>u?u=d*l:d=u/l)):a>0&&(u?u=Math.max(u,c?s.width:0):d?d=Math.max(d,c?s.height:0):c&&(u=s.width,d=s.height,d*l>u?u=d*l:d=u/l));var f=Kr({aspectRatio:l,width:u,height:d});u=f.width,d=f.height,o.minWidth=u,o.minHeight=d,o.maxWidth=1/0,o.maxHeight=1/0}if(e)if(a>(c?0:1)){var h=i.width-o.width,p=i.height-o.height;o.minLeft=Math.min(0,h),o.minTop=Math.min(0,p),o.maxLeft=Math.max(0,h),o.maxTop=Math.max(0,p),c&&this.limited&&(o.minLeft=Math.min(s.left,s.left+(s.width-o.width)),o.minTop=Math.min(s.top,s.top+(s.height-o.height)),o.maxLeft=s.left,o.maxTop=s.top,a===2&&(o.width>=i.width&&(o.minLeft=Math.min(0,h),o.maxLeft=Math.max(0,h)),o.height>=i.height&&(o.minTop=Math.min(0,p),o.maxTop=Math.max(0,p))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=i.width,o.maxTop=i.height},renderCanvas:function(t,e){var r=this.canvasData,i=this.imageData;if(e){var o=hE({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),s=o.width,a=o.height,l=r.width*(s/r.naturalWidth),c=r.height*(a/r.naturalHeight);r.left-=(l-r.width)/2,r.top-=(c-r.height)/2,r.width=l,r.height=c,r.aspectRatio=s/a,r.naturalWidth=s,r.naturalHeight=a,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,Wr(this.canvas,Je({width:r.width,height:r.height},ks({translateX:r.left,translateY:r.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,r=this.imageData,i=r.naturalWidth*(e.width/e.naturalWidth),o=r.naturalHeight*(e.height/e.naturalHeight);Je(r,{width:i,height:o,left:(e.width-i)/2,top:(e.height-o)/2}),Wr(this.image,Je({width:r.width,height:r.height},ks(Je({translateX:r.left,translateY:r.top},r)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,r=t.aspectRatio||t.initialAspectRatio,i=Number(t.autoCropArea)||.8,o={width:e.width,height:e.height};r&&(e.height*r>e.width?o.height=o.width/r:o.width=o.height*r),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*i),o.height=Math.max(o.minHeight,o.height*i),o.left=e.left+(e.width-o.width)/2,o.top=e.top+(e.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=Je({},o)},limitCropBox:function(t,e){var r=this.options,i=this.containerData,o=this.canvasData,s=this.cropBoxData,a=this.limited,l=r.aspectRatio;if(t){var c=Number(r.minCropBoxWidth)||0,u=Number(r.minCropBoxHeight)||0,d=a?Math.min(i.width,o.width,o.width+o.left,i.width-o.left):i.width,f=a?Math.min(i.height,o.height,o.height+o.top,i.height-o.top):i.height;c=Math.min(c,i.width),u=Math.min(u,i.height),l&&(c&&u?u*l>c?u=c/l:c=u*l:c?u=c/l:u&&(c=u*l),f*l>d?f=d/l:d=f*l),s.minWidth=Math.min(c,d),s.minHeight=Math.min(u,f),s.maxWidth=d,s.maxHeight=f}e&&(a?(s.minLeft=Math.max(0,o.left),s.minTop=Math.max(0,o.top),s.maxLeft=Math.min(i.width,o.left+o.width)-s.width,s.maxTop=Math.min(i.height,o.top+o.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=i.width-s.width,s.maxTop=i.height-s.height))},renderCropBox:function(){var t=this.options,e=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,t.movable&&t.cropBoxMovable&&zs(this.face,Bs,r.width>=e.width&&r.height>=e.height?Vb:pf),Wr(this.cropBox,Je({width:r.width,height:r.height},ks({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ho(this.element,ud,this.getData())}},EE={initPreview:function(){var t=this.element,e=this.crossOrigin,r=this.options.preview,i=e?this.crossOriginUrl:this.url,o=t.alt||"The image to preview",s=document.createElement("img");if(e&&(s.crossOrigin=e),s.src=i,s.alt=o,this.viewBox.appendChild(s),this.viewBoxImage=s,!!r){var a=r;typeof r=="string"?a=t.ownerDocument.querySelectorAll(r):r.querySelector&&(a=[r]),this.previews=a,st(a,function(l){var c=document.createElement("img");zs(l,za,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),e&&(c.crossOrigin=e),c.src=i,c.alt=o,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(c)})}},resetPreview:function(){st(this.previews,function(t){var e=md(t,za);Wr(t,{width:e.width,height:e.height}),t.innerHTML=e.html,cE(t,za)})},preview:function(){var t=this.imageData,e=this.canvasData,r=this.cropBoxData,i=r.width,o=r.height,s=t.width,a=t.height,l=r.left-e.left-t.left,c=r.top-e.top-t.top;!this.cropped||this.disabled||(Wr(this.viewBoxImage,Je({width:s,height:a},ks(Je({translateX:-l,translateY:-c},t)))),st(this.previews,function(u){var d=md(u,za),f=d.width,h=d.height,p=f,g=h,y=1;i&&(y=f/i,g=o*y),o&&g>h&&(y=h/o,p=i*y,g=h),Wr(u,{width:p,height:g}),Wr(u.getElementsByTagName("img")[0],Je({width:s*y,height:a*y},ks(Je({translateX:-l*y,translateY:-c*y},t))))}))}},CE={bind:function(){var t=this.element,e=this.options,r=this.cropper;Kt(e.cropstart)&&mn(t,hd,e.cropstart),Kt(e.cropmove)&&mn(t,fd,e.cropmove),Kt(e.cropend)&&mn(t,dd,e.cropend),Kt(e.crop)&&mn(t,ud,e.crop),Kt(e.zoom)&&mn(t,pd,e.zoom),mn(r,Pp,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&mn(r,Hp,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&mn(r,Lp,this.onDblclick=this.dblclick.bind(this)),mn(t.ownerDocument,Bp,this.onCropMove=this.cropMove.bind(this)),mn(t.ownerDocument,zp,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&mn(window,$p,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,r=this.cropper;Kt(e.cropstart)&&Tn(t,hd,e.cropstart),Kt(e.cropmove)&&Tn(t,fd,e.cropmove),Kt(e.cropend)&&Tn(t,dd,e.cropend),Kt(e.crop)&&Tn(t,ud,e.crop),Kt(e.zoom)&&Tn(t,pd,e.zoom),Tn(r,Pp,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Tn(r,Hp,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Tn(r,Lp,this.onDblclick),Tn(t.ownerDocument,Bp,this.onCropMove),Tn(t.ownerDocument,zp,this.onCropEnd),e.responsive&&Tn(window,$p,this.onResize)}},SE={resize:function(){if(!this.disabled){var t=this.options,e=this.container,r=this.containerData,i=e.offsetWidth/r.width,o=e.offsetHeight/r.height,s=Math.abs(i-1)>Math.abs(o-1)?i:o;if(s!==1){var a,l;t.restore&&(a=this.getCanvasData(),l=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(st(a,function(c,u){a[u]=c*s})),this.setCropBoxData(st(l,function(c,u){l[u]=c*s})))}}},dblclick:function(){this.disabled||this.options.dragMode===jb||this.setDragMode(aE(this.dragBox,ld)?Gb:mf)},wheel:function(t){var e=this,r=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?i=t.deltaY>0?1:-1:t.wheelDelta?i=-t.wheelDelta/120:t.detail&&(i=t.detail>0?1:-1),this.zoom(-i*r,t)))},cropStart:function(t){var e=t.buttons,r=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(ke(e)&&e!==1||ke(r)&&r!==0||t.ctrlKey))){var i=this.options,o=this.pointers,s;t.changedTouches?st(t.changedTouches,function(a){o[a.identifier]=Fa(a)}):o[t.pointerId||0]=Fa(t),Object.keys(o).length>1&&i.zoomable&&i.zoomOnTouch?s=Yb:s=md(t.target,Bs),Xx.test(s)&&ho(this.element,hd,{originalEvent:t,action:s})!==!1&&(t.preventDefault(),this.action=s,this.cropping=!1,s===Kb&&(this.cropping=!0,dt(this.dragBox,xl)))}},cropMove:function(t){var e=this.action;if(!(this.disabled||!e)){var r=this.pointers;t.preventDefault(),ho(this.element,fd,{originalEvent:t,action:e})!==!1&&(t.changedTouches?st(t.changedTouches,function(i){Je(r[i.identifier]||{},Fa(i,!0))}):Je(r[t.pointerId||0]||{},Fa(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,r=this.pointers;t.changedTouches?st(t.changedTouches,function(i){delete r[i.identifier]}):delete r[t.pointerId||0],e&&(t.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,lo(this.dragBox,xl,this.cropped&&this.options.modal)),ho(this.element,dd,{originalEvent:t,action:e}))}}},vE={change:function(t){var e=this.options,r=this.canvasData,i=this.containerData,o=this.cropBoxData,s=this.pointers,a=this.action,l=e.aspectRatio,c=o.left,u=o.top,d=o.width,f=o.height,h=c+d,p=u+f,g=0,y=0,k=i.width,v=i.height,E=!0,R;!l&&t.shiftKey&&(l=d&&f?d/f:1),this.limited&&(g=o.minLeft,y=o.minTop,k=g+Math.min(i.width,r.width,r.left+r.width),v=y+Math.min(i.height,r.height,r.top+r.height));var A=s[Object.keys(s)[0]],w={x:A.endX-A.startX,y:A.endY-A.startY},T=function(F){switch(F){case ui:h+w.x>k&&(w.x=k-h);break;case di:c+w.x<g&&(w.x=g-c);break;case Dr:u+w.y<y&&(w.y=y-u);break;case Zi:p+w.y>v&&(w.y=v-p);break}};switch(a){case pf:c+=w.x,u+=w.y;break;case ui:if(w.x>=0&&(h>=k||l&&(u<=y||p>=v))){E=!1;break}T(ui),d+=w.x,d<0&&(a=di,d=-d,c-=d),l&&(f=d/l,u+=(o.height-f)/2);break;case Dr:if(w.y<=0&&(u<=y||l&&(c<=g||h>=k))){E=!1;break}T(Dr),f-=w.y,u+=w.y,f<0&&(a=Zi,f=-f,u-=f),l&&(d=f*l,c+=(o.width-d)/2);break;case di:if(w.x<=0&&(c<=g||l&&(u<=y||p>=v))){E=!1;break}T(di),d-=w.x,c+=w.x,d<0&&(a=ui,d=-d,c-=d),l&&(f=d/l,u+=(o.height-f)/2);break;case Zi:if(w.y>=0&&(p>=v||l&&(c<=g||h>=k))){E=!1;break}T(Zi),f+=w.y,f<0&&(a=Dr,f=-f,u-=f),l&&(d=f*l,c+=(o.width-d)/2);break;case Jo:if(l){if(w.y<=0&&(u<=y||h>=k)){E=!1;break}T(Dr),f-=w.y,u+=w.y,d=f*l}else T(Dr),T(ui),w.x>=0?h<k?d+=w.x:w.y<=0&&u<=y&&(E=!1):d+=w.x,w.y<=0?u>y&&(f-=w.y,u+=w.y):(f-=w.y,u+=w.y);d<0&&f<0?(a=Qo,f=-f,d=-d,u-=f,c-=d):d<0?(a=Xo,d=-d,c-=d):f<0&&(a=Zo,f=-f,u-=f);break;case Xo:if(l){if(w.y<=0&&(u<=y||c<=g)){E=!1;break}T(Dr),f-=w.y,u+=w.y,d=f*l,c+=o.width-d}else T(Dr),T(di),w.x<=0?c>g?(d-=w.x,c+=w.x):w.y<=0&&u<=y&&(E=!1):(d-=w.x,c+=w.x),w.y<=0?u>y&&(f-=w.y,u+=w.y):(f-=w.y,u+=w.y);d<0&&f<0?(a=Zo,f=-f,d=-d,u-=f,c-=d):d<0?(a=Jo,d=-d,c-=d):f<0&&(a=Qo,f=-f,u-=f);break;case Qo:if(l){if(w.x<=0&&(c<=g||p>=v)){E=!1;break}T(di),d-=w.x,c+=w.x,f=d/l}else T(Zi),T(di),w.x<=0?c>g?(d-=w.x,c+=w.x):w.y>=0&&p>=v&&(E=!1):(d-=w.x,c+=w.x),w.y>=0?p<v&&(f+=w.y):f+=w.y;d<0&&f<0?(a=Jo,f=-f,d=-d,u-=f,c-=d):d<0?(a=Zo,d=-d,c-=d):f<0&&(a=Xo,f=-f,u-=f);break;case Zo:if(l){if(w.x>=0&&(h>=k||p>=v)){E=!1;break}T(ui),d+=w.x,f=d/l}else T(Zi),T(ui),w.x>=0?h<k?d+=w.x:w.y>=0&&p>=v&&(E=!1):d+=w.x,w.y>=0?p<v&&(f+=w.y):f+=w.y;d<0&&f<0?(a=Xo,f=-f,d=-d,u-=f,c-=d):d<0?(a=Qo,d=-d,c-=d):f<0&&(a=Jo,f=-f,u-=f);break;case Vb:this.move(w.x,w.y),E=!1;break;case Yb:this.zoom(dE(s),t),E=!1;break;case Kb:if(!w.x||!w.y){E=!1;break}R=ty(this.cropper),c=A.startX-R.left,u=A.startY-R.top,d=o.minWidth,f=o.minHeight,w.x>0?a=w.y>0?Zo:Jo:w.x<0&&(c-=d,a=w.y>0?Qo:Xo),w.y<0&&(u-=f),this.cropped||(Xn(this.cropBox,Yt),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}E&&(o.width=d,o.height=f,o.left=c,o.top=u,this.action=a,this.renderCropBox()),st(s,function(I){I.startX=I.endX,I.startY=I.endY})}},_E={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&dt(this.dragBox,xl),Xn(this.cropBox,Yt),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Je({},this.initialImageData),this.canvasData=Je({},this.initialCanvasData),this.cropBoxData=Je({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Je(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Xn(this.dragBox,xl),dt(this.cropBox,Yt)),this},replace:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,st(this.previews,function(r){r.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Xn(this.cropper,Dp)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,dt(this.cropper,Dp)),this},destroy:function(){var t=this.element;return t[je]?(t[je]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=this.canvasData,i=r.left,o=r.top;return this.moveTo(Nc(t)?t:i+Number(t),Nc(e)?e:o+Number(e))},moveTo:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=this.canvasData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(ke(t)&&(r.left=t,i=!0),ke(e)&&(r.top=e,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(t,e){var r=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(r.width*t/r.naturalWidth,null,e)},zoomTo:function(t,e,r){var i=this.options,o=this.canvasData,s=o.width,a=o.height,l=o.naturalWidth,c=o.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&i.zoomable){var u=l*t,d=c*t;if(ho(this.element,pd,{ratio:t,oldRatio:s/l,originalEvent:r})===!1)return this;if(r){var f=this.pointers,h=ty(this.cropper),p=f&&Object.keys(f).length?fE(f):{pageX:r.pageX,pageY:r.pageY};o.left-=(u-s)*((p.pageX-h.left-o.left)/s),o.top-=(d-a)*((p.pageY-h.top-o.top)/a)}else ao(e)&&ke(e.x)&&ke(e.y)?(o.left-=(u-s)*((e.x-o.left)/s),o.top-=(d-a)*((e.y-o.top)/a)):(o.left-=(u-s)/2,o.top-=(d-a)/2);o.width=u,o.height=d,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),ke(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,ke(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(ke(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=this.imageData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(ke(t)&&(r.scaleX=t,i=!0),ke(e)&&(r.scaleY=e,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.options,r=this.imageData,i=this.canvasData,o=this.cropBoxData,s;if(this.ready&&this.cropped){s={x:o.left-i.left,y:o.top-i.top,width:o.width,height:o.height};var a=r.width/r.naturalWidth;if(st(s,function(u,d){s[d]=u/a}),t){var l=Math.round(s.y+s.height),c=Math.round(s.x+s.width);s.x=Math.round(s.x),s.y=Math.round(s.y),s.width=c-s.x,s.height=l-s.y}}else s={x:0,y:0,width:0,height:0};return e.rotatable&&(s.rotate=r.rotate||0),e.scalable&&(s.scaleX=r.scaleX||1,s.scaleY=r.scaleY||1),s},setData:function(t){var e=this.options,r=this.imageData,i=this.canvasData,o={};if(this.ready&&!this.disabled&&ao(t)){var s=!1;e.rotatable&&ke(t.rotate)&&t.rotate!==r.rotate&&(r.rotate=t.rotate,s=!0),e.scalable&&(ke(t.scaleX)&&t.scaleX!==r.scaleX&&(r.scaleX=t.scaleX,s=!0),ke(t.scaleY)&&t.scaleY!==r.scaleY&&(r.scaleY=t.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var a=r.width/r.naturalWidth;ke(t.x)&&(o.left=t.x*a+i.left),ke(t.y)&&(o.top=t.y*a+i.top),ke(t.width)&&(o.width=t.width*a),ke(t.height)&&(o.height=t.height*a),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?Je({},this.containerData):{}},getImageData:function(){return this.sized?Je({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&st(["left","top","width","height","naturalWidth","naturalHeight"],function(r){e[r]=t[r]}),e},setCanvasData:function(t){var e=this.canvasData,r=e.aspectRatio;return this.ready&&!this.disabled&&ao(t)&&(ke(t.left)&&(e.left=t.left),ke(t.top)&&(e.top=t.top),ke(t.width)?(e.width=t.width,e.height=t.width/r):ke(t.height)&&(e.height=t.height,e.width=t.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,e;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(t){var e=this.cropBoxData,r=this.options.aspectRatio,i,o;return this.ready&&this.cropped&&!this.disabled&&ao(t)&&(ke(t.left)&&(e.left=t.left),ke(t.top)&&(e.top=t.top),ke(t.width)&&t.width!==e.width&&(i=!0,e.width=t.width),ke(t.height)&&t.height!==e.height&&(o=!0,e.height=t.height),r&&(i?e.height=e.width/r:o&&(e.width=e.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,r=pE(this.image,this.imageData,e,t);if(!this.cropped)return r;var i=this.getData(t.rounded),o=i.x,s=i.y,a=i.width,l=i.height,c=r.width/Math.floor(e.naturalWidth);c!==1&&(o*=c,s*=c,a*=c,l*=c);var u=a/l,d=Kr({aspectRatio:u,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),f=Kr({aspectRatio:u,width:t.minWidth||0,height:t.minHeight||0},"cover"),h=Kr({aspectRatio:u,width:t.width||(c!==1?r.width:a),height:t.height||(c!==1?r.height:l)}),p=h.width,g=h.height;p=Math.min(d.width,Math.max(f.width,p)),g=Math.min(d.height,Math.max(f.height,g));var y=document.createElement("canvas"),k=y.getContext("2d");y.width=fo(p),y.height=fo(g),k.fillStyle=t.fillColor||"transparent",k.fillRect(0,0,p,g);var v=t.imageSmoothingEnabled,E=v===void 0?!0:v,R=t.imageSmoothingQuality;k.imageSmoothingEnabled=E,R&&(k.imageSmoothingQuality=R);var A=r.width,w=r.height,T=o,I=s,F,N,$,K,Z,te;T<=-a||T>A?(T=0,F=0,$=0,Z=0):T<=0?($=-T,T=0,F=Math.min(A,a+T),Z=F):T<=A&&($=0,F=Math.min(a,A-T),Z=F),F<=0||I<=-l||I>w?(I=0,N=0,K=0,te=0):I<=0?(K=-I,I=0,N=Math.min(w,l+I),te=N):I<=w&&(K=0,N=Math.min(l,w-I),te=N);var j=[T,I,F,N];if(Z>0&&te>0){var oe=p/a;j.push($*oe,K*oe,Z*oe,te*oe)}return k.drawImage.apply(k,[r].concat(Wb(j.map(function(de){return Math.floor(fo(de))})))),y},setAspectRatio:function(t){var e=this.options;return!this.disabled&&!Nc(t)&&(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,r=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var o=t===mf,s=e.movable&&t===Gb;t=o||s?t:jb,e.dragMode=t,zs(r,Bs,t),lo(r,ld,o),lo(r,cd,s),e.cropBoxMovable||(zs(i,Bs,t),lo(i,ld,o),lo(i,cd,s))}return this}},NE=Zn.Cropper,ry=(function(){function n(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if($x(this,n),!t||!eE.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=Je({},qp,ao(e)&&e),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Hx(n,[{key:"init",value:function(){var e=this.element,r=e.tagName.toLowerCase(),i;if(!e[je]){if(e[je]=this,r==="img"){if(this.isImg=!0,i=e.getAttribute("src")||"",this.originalUrl=i,!i)return;i=e.src}else r==="canvas"&&window.HTMLCanvasElement&&(i=e.toDataURL());this.load(i)}}},{key:"load",value:function(e){var r=this;if(e){this.url=e,this.imageData={};var i=this.element,o=this.options;if(!o.rotatable&&!o.scalable&&(o.checkOrientation=!1),!o.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Zx.test(e)){Qx.test(e)?this.read(bE(e)):this.clone();return}var s=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=a,s.onerror=a,s.ontimeout=a,s.onprogress=function(){s.getResponseHeader("content-type")!==Up&&s.abort()},s.onload=function(){r.read(s.response)},s.onloadend=function(){r.reloading=!1,r.xhr=null},o.checkCrossOrigin&&Kp(e)&&i.crossOrigin&&(e=Vp(e)),s.open("GET",e,!0),s.responseType="arraybuffer",s.withCredentials=i.crossOrigin==="use-credentials",s.send()}}},{key:"read",value:function(e){var r=this.options,i=this.imageData,o=kE(e),s=0,a=1,l=1;if(o>1){this.url=yE(e,Up);var c=wE(o);s=c.rotate,a=c.scaleX,l=c.scaleY}r.rotatable&&(i.rotate=s),r.scalable&&(i.scaleX=a,i.scaleY=l),this.clone()}},{key:"clone",value:function(){var e=this.element,r=this.url,i=e.crossOrigin,o=r;this.options.checkCrossOrigin&&Kp(r)&&(i||(i="anonymous"),o=Vp(r)),this.crossOrigin=i,this.crossOriginUrl=o;var s=document.createElement("img");i&&(s.crossOrigin=i),s.src=o||r,s.alt=e.alt||"The image to crop",this.image=s,s.onload=this.start.bind(this),s.onerror=this.stop.bind(this),dt(s,Rp),e.parentNode.insertBefore(s,e.nextSibling)}},{key:"start",value:function(){var e=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var i=Zn.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Zn.navigator.userAgent),o=function(c,u){Je(e.imageData,{naturalWidth:c,naturalHeight:u,aspectRatio:c/u}),e.initialImageData=Je({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(r.naturalWidth&&!i){o(r.naturalWidth,r.naturalHeight);return}var s=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=s,s.onload=function(){o(s.width,s.height),i||a.removeChild(s)},s.src=r.src,i||(s.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(s))}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var e=this.element,r=this.options,i=this.image,o=e.parentNode,s=document.createElement("div");s.innerHTML=tE;var a=s.querySelector(".".concat(je,"-container")),l=a.querySelector(".".concat(je,"-canvas")),c=a.querySelector(".".concat(je,"-drag-box")),u=a.querySelector(".".concat(je,"-crop-box")),d=u.querySelector(".".concat(je,"-face"));this.container=o,this.cropper=a,this.canvas=l,this.dragBox=c,this.cropBox=u,this.viewBox=a.querySelector(".".concat(je,"-view-box")),this.face=d,l.appendChild(i),dt(e,Yt),o.insertBefore(a,e.nextSibling),Xn(i,Rp),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,dt(u,Yt),r.guides||dt(u.getElementsByClassName("".concat(je,"-dashed")),Yt),r.center||dt(u.getElementsByClassName("".concat(je,"-center")),Yt),r.background&&dt(a,"".concat(je,"-bg")),r.highlight||dt(d,Yx),r.cropBoxMovable&&(dt(d,cd),zs(d,Bs,pf)),r.cropBoxResizable||(dt(u.getElementsByClassName("".concat(je,"-line")),Yt),dt(u.getElementsByClassName("".concat(je,"-point")),Yt)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),Kt(r.ready)&&mn(e,Fp,r.ready,{once:!0}),ho(e,Fp)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var e=this.cropper.parentNode;e&&e.removeChild(this.cropper),Xn(this.element,Yt)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=NE,n}},{key:"setDefaults",value:function(e){Je(qp,ao(e)&&e)}}])})();Je(ry.prototype,xE,EE,CE,SE,vE,_E);var Mc,Yp;function TE(){if(Yp)return Mc;Yp=1;function n(m){return m instanceof Map?m.clear=m.delete=m.set=function(){throw new Error("map is read-only")}:m instanceof Set&&(m.add=m.clear=m.delete=function(){throw new Error("set is read-only")}),Object.freeze(m),Object.getOwnPropertyNames(m).forEach(b=>{const x=m[b],_=typeof x;(_==="object"||_==="function")&&!Object.isFrozen(x)&&n(x)}),m}class t{constructor(b){b.data===void 0&&(b.data={}),this.data=b.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function e(m){return m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(m,...b){const x=Object.create(null);for(const _ in m)x[_]=m[_];return b.forEach(function(_){for(const P in _)x[P]=_[P]}),x}const i="</span>",o=m=>!!m.scope,s=(m,{prefix:b})=>{if(m.startsWith("language:"))return m.replace("language:","language-");if(m.includes(".")){const x=m.split(".");return[`${b}${x.shift()}`,...x.map((_,P)=>`${_}${"_".repeat(P+1)}`)].join(" ")}return`${b}${m}`};class a{constructor(b,x){this.buffer="",this.classPrefix=x.classPrefix,b.walk(this)}addText(b){this.buffer+=e(b)}openNode(b){if(!o(b))return;const x=s(b.scope,{prefix:this.classPrefix});this.span(x)}closeNode(b){o(b)&&(this.buffer+=i)}value(){return this.buffer}span(b){this.buffer+=`<span class="${b}">`}}const l=(m={})=>{const b={children:[]};return Object.assign(b,m),b};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(b){this.top.children.push(b)}openNode(b){const x=l({scope:b});this.add(x),this.stack.push(x)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(b){return this.constructor._walk(b,this.rootNode)}static _walk(b,x){return typeof x=="string"?b.addText(x):x.children&&(b.openNode(x),x.children.forEach(_=>this._walk(b,_)),b.closeNode(x)),b}static _collapse(b){typeof b!="string"&&b.children&&(b.children.every(x=>typeof x=="string")?b.children=[b.children.join("")]:b.children.forEach(x=>{c._collapse(x)}))}}class u extends c{constructor(b){super(),this.options=b}addText(b){b!==""&&this.add(b)}startScope(b){this.openNode(b)}endScope(){this.closeNode()}__addSublanguage(b,x){const _=b.root;x&&(_.scope=`language:${x}`),this.add(_)}toHTML(){return new a(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function d(m){return m?typeof m=="string"?m:m.source:null}function f(m){return g("(?=",m,")")}function h(m){return g("(?:",m,")*")}function p(m){return g("(?:",m,")?")}function g(...m){return m.map(x=>d(x)).join("")}function y(m){const b=m[m.length-1];return typeof b=="object"&&b.constructor===Object?(m.splice(m.length-1,1),b):{}}function k(...m){return"("+(y(m).capture?"":"?:")+m.map(_=>d(_)).join("|")+")"}function v(m){return new RegExp(m.toString()+"|").exec("").length-1}function E(m,b){const x=m&&m.exec(b);return x&&x.index===0}const R=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function A(m,{joinWith:b}){let x=0;return m.map(_=>{x+=1;const P=x;let H=d(_),z="";for(;H.length>0;){const D=R.exec(H);if(!D){z+=H;break}z+=H.substring(0,D.index),H=H.substring(D.index+D[0].length),D[0][0]==="\\"&&D[1]?z+="\\"+String(Number(D[1])+P):(z+=D[0],D[0]==="("&&x++)}return z}).map(_=>`(${_})`).join(b)}const w=/\b\B/,T="[a-zA-Z]\\w*",I="[a-zA-Z_]\\w*",F="\\b\\d+(\\.\\d+)?",N="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",$="\\b(0b[01]+)",K="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Z=(m={})=>{const b=/^#![ ]*\//;return m.binary&&(m.begin=g(b,/.*\b/,m.binary,/\b.*/)),r({scope:"meta",begin:b,end:/$/,relevance:0,"on:begin":(x,_)=>{x.index!==0&&_.ignoreMatch()}},m)},te={begin:"\\\\[\\s\\S]",relevance:0},j={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[te]},oe={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[te]},de={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},ye=function(m,b,x={}){const _=r({scope:"comment",begin:m,end:b,contains:[]},x);_.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const P=k("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return _.contains.push({begin:g(/[ ]+/,"(",P,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),_},Ge=ye("//","$"),C=ye("/\\*","\\*/"),Le=ye("#","$"),Xe={scope:"number",begin:F,relevance:0},S={scope:"number",begin:N,relevance:0},Be={scope:"number",begin:$,relevance:0},ze={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[te,{begin:/\[/,end:/\]/,relevance:0,contains:[te]}]},Me={scope:"title",begin:T,relevance:0},ve={scope:"title",begin:I,relevance:0},pe={begin:"\\.\\s*"+I,relevance:0};var $e=Object.freeze({__proto__:null,APOS_STRING_MODE:j,BACKSLASH_ESCAPE:te,BINARY_NUMBER_MODE:Be,BINARY_NUMBER_RE:$,COMMENT:ye,C_BLOCK_COMMENT_MODE:C,C_LINE_COMMENT_MODE:Ge,C_NUMBER_MODE:S,C_NUMBER_RE:N,END_SAME_AS_BEGIN:function(m){return Object.assign(m,{"on:begin":(b,x)=>{x.data._beginMatch=b[1]},"on:end":(b,x)=>{x.data._beginMatch!==b[1]&&x.ignoreMatch()}})},HASH_COMMENT_MODE:Le,IDENT_RE:T,MATCH_NOTHING_RE:w,METHOD_GUARD:pe,NUMBER_MODE:Xe,NUMBER_RE:F,PHRASAL_WORDS_MODE:de,QUOTE_STRING_MODE:oe,REGEXP_MODE:ze,RE_STARTERS_RE:K,SHEBANG:Z,TITLE_MODE:Me,UNDERSCORE_IDENT_RE:I,UNDERSCORE_TITLE_MODE:ve});function Ze(m,b){m.input[m.index-1]==="."&&b.ignoreMatch()}function it(m,b){m.className!==void 0&&(m.scope=m.className,delete m.className)}function At(m,b){b&&m.beginKeywords&&(m.begin="\\b("+m.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",m.__beforeBegin=Ze,m.keywords=m.keywords||m.beginKeywords,delete m.beginKeywords,m.relevance===void 0&&(m.relevance=0))}function Ar(m,b){Array.isArray(m.illegal)&&(m.illegal=k(...m.illegal))}function rr(m,b){if(m.match){if(m.begin||m.end)throw new Error("begin & end are not supported with match");m.begin=m.match,delete m.match}}function Pn(m,b){m.relevance===void 0&&(m.relevance=1)}const Bn=(m,b)=>{if(!m.beforeMatch)return;if(m.starts)throw new Error("beforeMatch cannot be used with starts");const x=Object.assign({},m);Object.keys(m).forEach(_=>{delete m[_]}),m.keywords=x.keywords,m.begin=g(x.beforeMatch,f(x.begin)),m.starts={relevance:0,contains:[Object.assign(x,{endsParent:!0})]},m.relevance=0,delete x.beforeMatch},ir=["of","and","for","in","not","or","if","then","parent","list","value"],_n="keyword";function or(m,b,x=_n){const _=Object.create(null);return typeof m=="string"?P(x,m.split(" ")):Array.isArray(m)?P(x,m):Object.keys(m).forEach(function(H){Object.assign(_,or(m[H],b,H))}),_;function P(H,z){b&&(z=z.map(D=>D.toLowerCase())),z.forEach(function(D){const V=D.split("|");_[V[0]]=[H,sr(V[0],V[1])]})}}function sr(m,b){return b?Number(b):Or(m)?0:1}function Or(m){return ir.includes(m.toLowerCase())}const zn={},zt=m=>{console.error(m)},Ft=(m,...b)=>{console.log(`WARN: ${m}`,...b)},O=(m,b)=>{zn[`${m}/${b}`]||(console.log(`Deprecated as of ${m}. ${b}`),zn[`${m}/${b}`]=!0)},U=new Error;function se(m,b,{key:x}){let _=0;const P=m[x],H={},z={};for(let D=1;D<=b.length;D++)z[D+_]=P[D],H[D+_]=!0,_+=v(b[D-1]);m[x]=z,m[x]._emit=H,m[x]._multi=!0}function fe(m){if(Array.isArray(m.begin)){if(m.skip||m.excludeBegin||m.returnBegin)throw zt("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),U;if(typeof m.beginScope!="object"||m.beginScope===null)throw zt("beginScope must be object"),U;se(m,m.begin,{key:"beginScope"}),m.begin=A(m.begin,{joinWith:""})}}function we(m){if(Array.isArray(m.end)){if(m.skip||m.excludeEnd||m.returnEnd)throw zt("skip, excludeEnd, returnEnd not compatible with endScope: {}"),U;if(typeof m.endScope!="object"||m.endScope===null)throw zt("endScope must be object"),U;se(m,m.end,{key:"endScope"}),m.end=A(m.end,{joinWith:""})}}function mt(m){m.scope&&typeof m.scope=="object"&&m.scope!==null&&(m.beginScope=m.scope,delete m.scope)}function Ot(m){mt(m),typeof m.beginScope=="string"&&(m.beginScope={_wrap:m.beginScope}),typeof m.endScope=="string"&&(m.endScope={_wrap:m.endScope}),fe(m),we(m)}function It(m){function b(z,D){return new RegExp(d(z),"m"+(m.case_insensitive?"i":"")+(m.unicodeRegex?"u":"")+(D?"g":""))}class x{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(D,V){V.position=this.position++,this.matchIndexes[this.matchAt]=V,this.regexes.push([V,D]),this.matchAt+=v(D)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const D=this.regexes.map(V=>V[1]);this.matcherRe=b(A(D,{joinWith:"|"}),!0),this.lastIndex=0}exec(D){this.matcherRe.lastIndex=this.lastIndex;const V=this.matcherRe.exec(D);if(!V)return null;const Y=V.findIndex((Te,Ht)=>Ht>0&&Te!==void 0),X=this.matchIndexes[Y];return V.splice(0,Y),Object.assign(V,X)}}class _{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(D){if(this.multiRegexes[D])return this.multiRegexes[D];const V=new x;return this.rules.slice(D).forEach(([Y,X])=>V.addRule(Y,X)),V.compile(),this.multiRegexes[D]=V,V}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(D,V){this.rules.push([D,V]),V.type==="begin"&&this.count++}exec(D){const V=this.getMatcher(this.regexIndex);V.lastIndex=this.lastIndex;let Y=V.exec(D);if(this.resumingScanAtSamePosition()&&!(Y&&Y.index===this.lastIndex)){const X=this.getMatcher(0);X.lastIndex=this.lastIndex+1,Y=X.exec(D)}return Y&&(this.regexIndex+=Y.position+1,this.regexIndex===this.count&&this.considerAll()),Y}}function P(z){const D=new _;return z.contains.forEach(V=>D.addRule(V.begin,{rule:V,type:"begin"})),z.terminatorEnd&&D.addRule(z.terminatorEnd,{type:"end"}),z.illegal&&D.addRule(z.illegal,{type:"illegal"}),D}function H(z,D){const V=z;if(z.isCompiled)return V;[it,rr,Ot,Bn].forEach(X=>X(z,D)),m.compilerExtensions.forEach(X=>X(z,D)),z.__beforeBegin=null,[At,Ar,Pn].forEach(X=>X(z,D)),z.isCompiled=!0;let Y=null;return typeof z.keywords=="object"&&z.keywords.$pattern&&(z.keywords=Object.assign({},z.keywords),Y=z.keywords.$pattern,delete z.keywords.$pattern),Y=Y||/\w+/,z.keywords&&(z.keywords=or(z.keywords,m.case_insensitive)),V.keywordPatternRe=b(Y,!0),D&&(z.begin||(z.begin=/\B|\b/),V.beginRe=b(V.begin),!z.end&&!z.endsWithParent&&(z.end=/\B|\b/),z.end&&(V.endRe=b(V.end)),V.terminatorEnd=d(V.end)||"",z.endsWithParent&&D.terminatorEnd&&(V.terminatorEnd+=(z.end?"|":"")+D.terminatorEnd)),z.illegal&&(V.illegalRe=b(z.illegal)),z.contains||(z.contains=[]),z.contains=[].concat(...z.contains.map(function(X){return _e(X==="self"?z:X)})),z.contains.forEach(function(X){H(X,V)}),z.starts&&H(z.starts,D),V.matcher=P(V),V}if(m.compilerExtensions||(m.compilerExtensions=[]),m.contains&&m.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return m.classNameAliases=r(m.classNameAliases||{}),H(m)}function pn(m){return m?m.endsWithParent||pn(m.starts):!1}function _e(m){return m.variants&&!m.cachedVariants&&(m.cachedVariants=m.variants.map(function(b){return r(m,{variants:null},b)})),m.cachedVariants?m.cachedVariants:pn(m)?r(m,{starts:m.starts?r(m.starts):null}):Object.isFrozen(m)?r(m):m}var nt="11.11.1";class $t extends Error{constructor(b,x){super(b),this.name="HTMLInjectionError",this.html=x}}const gt=e,ar=r,Ne=Symbol("nomatch"),Ct=7,Fn=function(m){const b=Object.create(null),x=Object.create(null),_=[];let P=!0;const H="Could not find the language '{}', did you forget to load/include a language module?",z={disableAutodetect:!0,name:"Plain text",contains:[]};let D={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:u};function V(W){return D.noHighlightRe.test(W)}function Y(W){let ne=W.className+" ";ne+=W.parentNode?W.parentNode.className:"";const xe=D.languageDetectRe.exec(ne);if(xe){const Ue=Un(xe[1]);return Ue||(Ft(H.replace("{}",xe[1])),Ft("Falling back to no-highlight mode for this block.",W)),Ue?xe[1]:"no-highlight"}return ne.split(/\s+/).find(Ue=>V(Ue)||Un(Ue))}function X(W,ne,xe){let Ue="",lt="";typeof ne=="object"?(Ue=W,xe=ne.ignoreIllegals,lt=ne.language):(O("10.7.0","highlight(lang, code, ...args) has been deprecated."),O("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),lt=W,Ue=ne),xe===void 0&&(xe=!0);const Nn={code:Ue,language:lt};Oa("before:highlight",Nn);const Ir=Nn.result?Nn.result:Te(Nn.language,Nn.code,xe);return Ir.code=Nn.code,Oa("after:highlight",Ir),Ir}function Te(W,ne,xe,Ue){const lt=Object.create(null);function Nn(J,ee){return J.keywords[ee]}function Ir(){if(!he.keywords){yt.addText(qe);return}let J=0;he.keywordPatternRe.lastIndex=0;let ee=he.keywordPatternRe.exec(qe),me="";for(;ee;){me+=qe.substring(J,ee.index);const Re=Wn.case_insensitive?ee[0].toLowerCase():ee[0],St=Nn(he,Re);if(St){const[lr,vx]=St;if(yt.addText(me),me="",lt[Re]=(lt[Re]||0)+1,lt[Re]<=Ct&&(Ra+=vx),lr.startsWith("_"))me+=ee[0];else{const _x=Wn.classNameAliases[lr]||lr;qn(ee[0],_x)}}else me+=ee[0];J=he.keywordPatternRe.lastIndex,ee=he.keywordPatternRe.exec(qe)}me+=qe.substring(J),yt.addText(me)}function Ia(){if(qe==="")return;let J=null;if(typeof he.subLanguage=="string"){if(!b[he.subLanguage]){yt.addText(qe);return}J=Te(he.subLanguage,qe,!0,_p[he.subLanguage]),_p[he.subLanguage]=J._top}else J=bt(qe,he.subLanguage.length?he.subLanguage:null);he.relevance>0&&(Ra+=J.relevance),yt.__addSublanguage(J._emitter,J.language)}function nn(){he.subLanguage!=null?Ia():Ir(),qe=""}function qn(J,ee){J!==""&&(yt.startScope(ee),yt.addText(J),yt.endScope())}function Ep(J,ee){let me=1;const Re=ee.length-1;for(;me<=Re;){if(!J._emit[me]){me++;continue}const St=Wn.classNameAliases[J[me]]||J[me],lr=ee[me];St?qn(lr,St):(qe=lr,Ir(),qe=""),me++}}function Cp(J,ee){return J.scope&&typeof J.scope=="string"&&yt.openNode(Wn.classNameAliases[J.scope]||J.scope),J.beginScope&&(J.beginScope._wrap?(qn(qe,Wn.classNameAliases[J.beginScope._wrap]||J.beginScope._wrap),qe=""):J.beginScope._multi&&(Ep(J.beginScope,ee),qe="")),he=Object.create(J,{parent:{value:he}}),he}function Sp(J,ee,me){let Re=E(J.endRe,me);if(Re){if(J["on:end"]){const St=new t(J);J["on:end"](ee,St),St.isMatchIgnored&&(Re=!1)}if(Re){for(;J.endsParent&&J.parent;)J=J.parent;return J}}if(J.endsWithParent)return Sp(J.parent,ee,me)}function wx(J){return he.matcher.regexIndex===0?(qe+=J[0],1):(wc=!0,0)}function xx(J){const ee=J[0],me=J.rule,Re=new t(me),St=[me.__beforeBegin,me["on:begin"]];for(const lr of St)if(lr&&(lr(J,Re),Re.isMatchIgnored))return wx(ee);return me.skip?qe+=ee:(me.excludeBegin&&(qe+=ee),nn(),!me.returnBegin&&!me.excludeBegin&&(qe=ee)),Cp(me,J),me.returnBegin?0:ee.length}function Ex(J){const ee=J[0],me=ne.substring(J.index),Re=Sp(he,J,me);if(!Re)return Ne;const St=he;he.endScope&&he.endScope._wrap?(nn(),qn(ee,he.endScope._wrap)):he.endScope&&he.endScope._multi?(nn(),Ep(he.endScope,J)):St.skip?qe+=ee:(St.returnEnd||St.excludeEnd||(qe+=ee),nn(),St.excludeEnd&&(qe=ee));do he.scope&&yt.closeNode(),!he.skip&&!he.subLanguage&&(Ra+=he.relevance),he=he.parent;while(he!==Re.parent);return Re.starts&&Cp(Re.starts,J),St.returnEnd?0:ee.length}function Cx(){const J=[];for(let ee=he;ee!==Wn;ee=ee.parent)ee.scope&&J.unshift(ee.scope);J.forEach(ee=>yt.openNode(ee))}let Da={};function vp(J,ee){const me=ee&&ee[0];if(qe+=J,me==null)return nn(),0;if(Da.type==="begin"&&ee.type==="end"&&Da.index===ee.index&&me===""){if(qe+=ne.slice(ee.index,ee.index+1),!P){const Re=new Error(`0 width match regex (${W})`);throw Re.languageName=W,Re.badRule=Da.rule,Re}return 1}if(Da=ee,ee.type==="begin")return xx(ee);if(ee.type==="illegal"&&!xe){const Re=new Error('Illegal lexeme "'+me+'" for mode "'+(he.scope||"<unnamed>")+'"');throw Re.mode=he,Re}else if(ee.type==="end"){const Re=Ex(ee);if(Re!==Ne)return Re}if(ee.type==="illegal"&&me==="")return qe+=`
`,1;if(kc>1e5&&kc>ee.index*3)throw new Error("potential infinite loop, way more iterations than matches");return qe+=me,me.length}const Wn=Un(W);if(!Wn)throw zt(H.replace("{}",W)),new Error('Unknown language: "'+W+'"');const Sx=It(Wn);let yc="",he=Ue||Sx;const _p={},yt=new D.__emitter(D);Cx();let qe="",Ra=0,ci=0,kc=0,wc=!1;try{if(Wn.__emitTokens)Wn.__emitTokens(ne,yt);else{for(he.matcher.considerAll();;){kc++,wc?wc=!1:he.matcher.considerAll(),he.matcher.lastIndex=ci;const J=he.matcher.exec(ne);if(!J)break;const ee=ne.substring(ci,J.index),me=vp(ee,J);ci=J.index+me}vp(ne.substring(ci))}return yt.finalize(),yc=yt.toHTML(),{language:W,value:yc,relevance:Ra,illegal:!1,_emitter:yt,_top:he}}catch(J){if(J.message&&J.message.includes("Illegal"))return{language:W,value:gt(ne),illegal:!0,relevance:0,_illegalBy:{message:J.message,index:ci,context:ne.slice(ci-100,ci+100),mode:J.mode,resultSoFar:yc},_emitter:yt};if(P)return{language:W,value:gt(ne),illegal:!1,relevance:0,errorRaised:J,_emitter:yt,_top:he};throw J}}function Ht(W){const ne={value:gt(W),illegal:!1,relevance:0,_top:z,_emitter:new D.__emitter(D)};return ne._emitter.addText(W),ne}function bt(W,ne){ne=ne||D.languages||Object.keys(b);const xe=Ht(W),Ue=ne.filter(Un).filter(xp).map(nn=>Te(nn,W,!1));Ue.unshift(xe);const lt=Ue.sort((nn,qn)=>{if(nn.relevance!==qn.relevance)return qn.relevance-nn.relevance;if(nn.language&&qn.language){if(Un(nn.language).supersetOf===qn.language)return 1;if(Un(qn.language).supersetOf===nn.language)return-1}return 0}),[Nn,Ir]=lt,Ia=Nn;return Ia.secondBest=Ir,Ia}function li(W,ne,xe){const Ue=ne&&x[ne]||xe;W.classList.add("hljs"),W.classList.add(`language-${Ue}`)}function Hn(W){let ne=null;const xe=Y(W);if(V(xe))return;if(Oa("before:highlightElement",{el:W,language:xe}),W.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",W);return}if(W.children.length>0&&(D.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(W)),D.throwUnescapedHTML))throw new $t("One of your code blocks includes unescaped HTML.",W.innerHTML);ne=W;const Ue=ne.textContent,lt=xe?X(Ue,{language:xe,ignoreIllegals:!0}):bt(Ue);W.innerHTML=lt.value,W.dataset.highlighted="yes",li(W,xe,lt.language),W.result={language:lt.language,re:lt.relevance,relevance:lt.relevance},lt.secondBest&&(W.secondBest={language:lt.secondBest.language,relevance:lt.secondBest.relevance}),Oa("after:highlightElement",{el:W,result:lt,text:Ue})}function hc(W){D=ar(D,W)}const jo=()=>{Xi(),O("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function pc(){Xi(),O("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Ma=!1;function Xi(){function W(){Xi()}if(document.readyState==="loading"){Ma||window.addEventListener("DOMContentLoaded",W,!1),Ma=!0;return}document.querySelectorAll(D.cssSelector).forEach(Hn)}function mc(W,ne){let xe=null;try{xe=ne(m)}catch(Ue){if(zt("Language definition for '{}' could not be registered.".replace("{}",W)),P)zt(Ue);else throw Ue;xe=z}xe.name||(xe.name=W),b[W]=xe,xe.rawDefinition=ne.bind(null,m),xe.aliases&&Aa(xe.aliases,{languageName:W})}function gc(W){delete b[W];for(const ne of Object.keys(x))x[ne]===W&&delete x[ne]}function bc(){return Object.keys(b)}function Un(W){return W=(W||"").toLowerCase(),b[W]||b[x[W]]}function Aa(W,{languageName:ne}){typeof W=="string"&&(W=[W]),W.forEach(xe=>{x[xe.toLowerCase()]=ne})}function xp(W){const ne=Un(W);return ne&&!ne.disableAutodetect}function gx(W){W["before:highlightBlock"]&&!W["before:highlightElement"]&&(W["before:highlightElement"]=ne=>{W["before:highlightBlock"](Object.assign({block:ne.el},ne))}),W["after:highlightBlock"]&&!W["after:highlightElement"]&&(W["after:highlightElement"]=ne=>{W["after:highlightBlock"](Object.assign({block:ne.el},ne))})}function bx(W){gx(W),_.push(W)}function yx(W){const ne=_.indexOf(W);ne!==-1&&_.splice(ne,1)}function Oa(W,ne){const xe=W;_.forEach(function(Ue){Ue[xe]&&Ue[xe](ne)})}function kx(W){return O("10.7.0","highlightBlock will be removed entirely in v12.0"),O("10.7.0","Please use highlightElement now."),Hn(W)}Object.assign(m,{highlight:X,highlightAuto:bt,highlightAll:Xi,highlightElement:Hn,highlightBlock:kx,configure:hc,initHighlighting:jo,initHighlightingOnLoad:pc,registerLanguage:mc,unregisterLanguage:gc,listLanguages:bc,getLanguage:Un,registerAliases:Aa,autoDetection:xp,inherit:ar,addPlugin:bx,removePlugin:yx}),m.debugMode=function(){P=!1},m.safeMode=function(){P=!0},m.versionString=nt,m.regex={concat:g,lookahead:f,either:k,optional:p,anyNumberOfTimes:h};for(const W in $e)typeof $e[W]=="object"&&n($e[W]);return Object.assign(m,$e),m},$n=Fn({});return $n.newInstance=()=>Fn({}),Mc=$n,$n.HighlightJS=$n,$n.default=$n,Mc}var Ac,Gp;function ME(){if(Gp)return Ac;Gp=1;function n(t){const e=t.regex,r=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),i=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},a=t.inherit(s,{begin:/\(/,end:/\)/}),l=t.inherit(t.APOS_STRING_MODE,{className:"string"}),c=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:i,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,c,l,a,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,a,c,l]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[c]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(r,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:r,relevance:0,starts:u}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(r,/>/))),contains:[{className:"name",begin:r,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}return Ac=n,Ac}var Oc,jp;function AE(){if(jp)return Oc;jp=1;function n(t){const e=t.regex,r={},i={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[r]}]};Object.assign(r,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},i]});const o={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},s=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),a={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},l={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,r,o]};o.contains.push(l);const c={match:/\\"/},u={className:"string",begin:/'/,end:/'/},d={match:/\\'/},f={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,r]},h=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],p=t.SHEBANG({binary:`(${h.join("|")})`,relevance:10}),g={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},y=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],k=["true","false"],v={match:/(\/[a-z._-]+)+/},E=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],R=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],A=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],w=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:y,literal:k,built_in:[...E,...R,"set","shopt",...A,...w]},contains:[p,t.SHEBANG(),g,f,s,a,v,l,c,u,d,r]}}return Oc=n,Oc}var Ic,Jp;function OE(){if(Jp)return Ic;Jp=1;function n(t){const e=t.regex,r=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",a="("+i+"|"+e.optional(o)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",l={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},r,t.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:e.optional(o)+t.IDENT_RE,relevance:0},p=e.optional(o)+t.IDENT_RE+"\\s*\\(",k={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},v=[f,l,r,t.C_BLOCK_COMMENT_MODE,d,u],E={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:k,contains:v.concat([{begin:/\(/,end:/\)/,keywords:k,contains:v.concat(["self"]),relevance:0}]),relevance:0},R={begin:"("+a+"[\\*&\\s]+)+"+p,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:k,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:k,relevance:0},{begin:p,returnBegin:!0,contains:[t.inherit(h,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:k,relevance:0,contains:[r,t.C_BLOCK_COMMENT_MODE,u,d,l,{begin:/\(/,end:/\)/,keywords:k,relevance:0,contains:["self",r,t.C_BLOCK_COMMENT_MODE,u,d,l]}]},l,r,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C",aliases:["h"],keywords:k,disableAutodetect:!0,illegal:"</",contains:[].concat(E,R,v,[f,{begin:t.IDENT_RE+"::",keywords:k},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:f,strings:u,keywords:k}}}return Ic=n,Ic}var Dc,Xp;function IE(){if(Xp)return Dc;Xp=1;function n(t){const e=t.regex,r=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",o="[a-zA-Z_]\\w*::",a="(?!struct)("+i+"|"+e.optional(o)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",l={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},d={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},f={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},r,t.C_BLOCK_COMMENT_MODE]},h={className:"title",begin:e.optional(o)+t.IDENT_RE,relevance:0},p=e.optional(o)+t.IDENT_RE+"\\s*\\(",g=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],y=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],k=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],v=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],A={type:y,keyword:g,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:k},w={className:"function.dispatch",relevance:0,keywords:{_hint:v},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},T=[w,f,l,r,t.C_BLOCK_COMMENT_MODE,d,u],I={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:A,contains:T.concat([{begin:/\(/,end:/\)/,keywords:A,contains:T.concat(["self"]),relevance:0}]),relevance:0},F={className:"function",begin:"("+a+"[\\*&\\s]+)+"+p,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:A,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:A,relevance:0},{begin:p,returnBegin:!0,contains:[h],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,d]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:[r,t.C_BLOCK_COMMENT_MODE,u,d,l,{begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:["self",r,t.C_BLOCK_COMMENT_MODE,u,d,l]}]},l,r,t.C_BLOCK_COMMENT_MODE,f]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:A,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(I,F,w,T,[f,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:A,contains:["self",l]},{begin:t.IDENT_RE+"::",keywords:A},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}return Dc=n,Dc}var Rc,Zp;function DE(){if(Zp)return Rc;Zp=1;function n(t){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],r=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],i=["default","false","null","true"],o=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],s=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],a={keyword:o.concat(s),built_in:e,literal:i},l=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),c={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},u={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},d={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},f=t.inherit(d,{illegal:/\n/}),h={className:"subst",begin:/\{/,end:/\}/,keywords:a},p=t.inherit(h,{illegal:/\n/}),g={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,p]},y={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},h]},k=t.inherit(y,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},p]});h.contains=[y,g,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,c,t.C_BLOCK_COMMENT_MODE],p.contains=[k,g,f,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,c,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const v={variants:[u,y,g,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},E={begin:"<",end:">",contains:[{beginKeywords:"in out"},l]},R=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",A={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:a,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},v,c,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},l,E,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[l,E,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+R+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:a,contains:[{beginKeywords:r.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,E],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,relevance:0,contains:[v,c,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},A]}}return Rc=n,Rc}var Lc,Qp;function RE(){if(Qp)return Lc;Qp=1;const n=c=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:c.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:c.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],r=[...t,...e],i=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),s=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),a=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function l(c){const u=c.regex,d=n(c),f={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},h="and or not only",p=/@-?\w[\w]*(-\w+)*/,g="[a-zA-Z-][a-zA-Z0-9_-]*",y=[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[d.BLOCK_COMMENT,f,d.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+g,relevance:0},d.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+o.join("|")+")"},{begin:":(:)?("+s.join("|")+")"}]},d.CSS_VARIABLE,{className:"attribute",begin:"\\b("+a.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[d.BLOCK_COMMENT,d.HEXCOLOR,d.IMPORTANT,d.CSS_NUMBER_MODE,...y,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...y,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},d.FUNCTION_DISPATCH]},{begin:u.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:p},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:h,attribute:i.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...y,d.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+r.join("|")+")\\b"}]}}return Lc=l,Lc}var Pc,em;function LE(){if(em)return Pc;em=1;function n(t){const e=t.regex,r={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},i={begin:"^[-\\*]{3,}",end:"$"},o={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},a={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,c={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},d={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},f=t.inherit(u,{contains:[]}),h=t.inherit(d,{contains:[]});u.contains.push(h),d.contains.push(f);let p=[r,c];return[u,d,f,h].forEach(v=>{v.contains=v.contains.concat(p)}),p=p.concat(u,d),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:p},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:p}]}]},r,s,u,d,{className:"quote",begin:"^>\\s+",contains:p,end:"$"},o,i,c,a,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}return Pc=n,Pc}var Bc,tm;function PE(){if(tm)return Bc;tm=1;function n(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}return Bc=n,Bc}var zc,nm;function BE(){if(nm)return zc;nm=1;function n(t){const e=t.regex,r="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",i=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),o=e.concat(i,/(::\w+)*/),a={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},l={className:"doctag",begin:"@[A-Za-z]+"},c={begin:"#<",end:">"},u=[t.COMMENT("#","$",{contains:[l]}),t.COMMENT("^=begin","^=end",{contains:[l],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],d={className:"subst",begin:/#\{/,end:/\}/,keywords:a},f={className:"string",contains:[t.BACKSLASH_ESCAPE,d],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,d]})]}]},h="[1-9](_?[0-9])*|0",p="[0-9](_?[0-9])*",g={className:"number",relevance:0,variants:[{begin:`\\b(${h})(\\.(${p}))?([eE][+-]?(${p})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},y={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:a}]},T=[f,{variants:[{match:[/class\s+/,o,/\s+<\s+/,o]},{match:[/\b(class|module)\s+/,o]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:a},{match:[/(include|extend)\s+/,o],scope:{2:"title.class"},keywords:a},{relevance:0,match:[o,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:i,scope:"title.class"},{match:[/def/,/\s+/,r],scope:{1:"keyword",3:"title.function"},contains:[y]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[f,{begin:r}],relevance:0},g,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:a},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,d],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(c,u),relevance:0}].concat(c,u);d.contains=T,y.contains=T;const $=[{begin:/^\s*=>/,starts:{end:"$",contains:T}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:a,contains:T}}];return u.unshift(c),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:a,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat($).concat(u).concat(T)}}return zc=n,zc}var Fc,rm;function zE(){if(rm)return Fc;rm=1;function n(t){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}return Fc=n,Fc}var $c,im;function FE(){if(im)return $c;im=1;function n(t){const e=t.regex,r=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(r,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}return $c=n,$c}var Hc,om;function $E(){if(om)return Hc;om=1;function n(t){const e=t.regex,r={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},i=t.COMMENT();i.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const o={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},s={className:"literal",begin:/\bon|off|true|false|yes|no\b/},a={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},l={begin:/\[/,end:/\]/,contains:[i,s,o,a,r,"self"],relevance:0},c=/[A-Za-z0-9_-]+/,u=/"(\\"|[^"])*"/,d=/'[^']*'/,f=e.either(c,u,d),h=e.concat(f,"(\\s*\\.\\s*",f,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[i,{className:"section",begin:/\[+/,end:/\]+/},{begin:h,className:"attr",starts:{end:/$/,contains:[i,l,s,o,a,r]}}]}}return Hc=n,Hc}var Uc,sm;function HE(){if(sm)return Uc;sm=1;var n="[0-9](_*[0-9])*",t=`\\.(${n})`,e="[0-9a-fA-F](_*[0-9a-fA-F])*",r={className:"number",variants:[{begin:`(\\b(${n})((${t})|\\.)?|(${t}))[eE][+-]?(${n})[fFdD]?\\b`},{begin:`\\b(${n})((${t})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${t})[fFdD]?\\b`},{begin:`\\b(${n})[fFdD]\\b`},{begin:`\\b0[xX]((${e})\\.?|(${e})?\\.(${e}))[pP][+-]?(${n})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${e})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function i(s,a,l){return l===-1?"":s.replace(a,c=>i(s,a,l-1))}function o(s){const a=s.regex,l="[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*",c=l+i("(?:<"+l+"~~~(?:\\s*,\\s*"+l+"~~~)*>)?",/~~~/g,2),p={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},g={className:"meta",begin:"@"+l,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},y={className:"params",begin:/\(/,end:/\)/,keywords:p,relevance:0,contains:[s.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:p,illegal:/<\/|#/,contains:[s.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},s.C_LINE_COMMENT_MODE,s.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[s.BACKSLASH_ESCAPE]},s.APOS_STRING_MODE,s.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,l],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[a.concat(/(?!else)/,l),/\s+/,l,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,l],className:{1:"keyword",3:"title.class"},contains:[y,s.C_LINE_COMMENT_MODE,s.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+c+"\\s+)",s.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:p,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:p,relevance:0,contains:[g,s.APOS_STRING_MODE,s.QUOTE_STRING_MODE,r,s.C_BLOCK_COMMENT_MODE]},s.C_LINE_COMMENT_MODE,s.C_BLOCK_COMMENT_MODE]},r,g]}}return Uc=o,Uc}var qc,am;function UE(){if(am)return qc;am=1;const n="[A-Za-z$_][0-9A-Za-z$_]*",t=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],e=["true","false","null","undefined","NaN","Infinity"],r=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],i=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],o=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],s=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],a=[].concat(o,r,i);function l(c){const u=c.regex,d=(ve,{after:pe})=>{const Fe="</"+ve[0].slice(1);return ve.input.indexOf(Fe,pe)!==-1},f=n,h={begin:"<>",end:"</>"},p=/<[A-Za-z0-9\\._:-]+\s*\/>/,g={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(ve,pe)=>{const Fe=ve[0].length+ve.index,$e=ve.input[Fe];if($e==="<"||$e===","){pe.ignoreMatch();return}$e===">"&&(d(ve,{after:Fe})||pe.ignoreMatch());let Ze;const it=ve.input.substring(Fe);if(Ze=it.match(/^\s*=/)){pe.ignoreMatch();return}if((Ze=it.match(/^\s+extends\s+/))&&Ze.index===0){pe.ignoreMatch();return}}},y={$pattern:n,keyword:t,literal:e,built_in:a,"variable.language":s},k="[0-9](_?[0-9])*",v=`\\.(${k})`,E="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",R={className:"number",variants:[{begin:`(\\b(${E})((${v})|\\.)?|(${v}))[eE][+-]?(${k})\\b`},{begin:`\\b(${E})\\b((${v})\\b|\\.)?|(${v})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},A={className:"subst",begin:"\\$\\{",end:"\\}",keywords:y,contains:[]},w={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[c.BACKSLASH_ESCAPE,A],subLanguage:"xml"}},T={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[c.BACKSLASH_ESCAPE,A],subLanguage:"css"}},I={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[c.BACKSLASH_ESCAPE,A],subLanguage:"graphql"}},F={className:"string",begin:"`",end:"`",contains:[c.BACKSLASH_ESCAPE,A]},$={className:"comment",variants:[c.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:f+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),c.C_BLOCK_COMMENT_MODE,c.C_LINE_COMMENT_MODE]},K=[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE,w,T,I,F,{match:/\$\d+/},R];A.contains=K.concat({begin:/\{/,end:/\}/,keywords:y,contains:["self"].concat(K)});const Z=[].concat($,A.contains),te=Z.concat([{begin:/(\s*)\(/,end:/\)/,keywords:y,contains:["self"].concat(Z)}]),j={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:y,contains:te},oe={variants:[{match:[/class/,/\s+/,f,/\s+/,/extends/,/\s+/,u.concat(f,"(",u.concat(/\./,f),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,f],scope:{1:"keyword",3:"title.class"}}]},de={relevance:0,match:u.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...r,...i]}},ye={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},Ge={variants:[{match:[/function/,/\s+/,f,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[j],illegal:/%/},C={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function Le(ve){return u.concat("(?!",ve.join("|"),")")}const Xe={match:u.concat(/\b/,Le([...o,"super","import"].map(ve=>`${ve}\\s*\\(`)),f,u.lookahead(/\s*\(/)),className:"title.function",relevance:0},S={begin:u.concat(/\./,u.lookahead(u.concat(f,/(?![0-9A-Za-z$_(])/))),end:f,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Be={match:[/get|set/,/\s+/,f,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},j]},ze="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+c.UNDERSCORE_IDENT_RE+")\\s*=>",Me={match:[/const|var|let/,/\s+/,f,/\s*/,/=\s*/,/(async\s*)?/,u.lookahead(ze)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[j]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:y,exports:{PARAMS_CONTAINS:te,CLASS_REFERENCE:de},illegal:/#(?![$_A-z])/,contains:[c.SHEBANG({label:"shebang",binary:"node",relevance:5}),ye,c.APOS_STRING_MODE,c.QUOTE_STRING_MODE,w,T,I,F,$,{match:/\$\d+/},R,de,{scope:"attr",match:f+u.lookahead(":"),relevance:0},Me,{begin:"("+c.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[$,c.REGEXP_MODE,{className:"function",begin:ze,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:c.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:y,contains:te}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:h.begin,end:h.end},{match:p},{begin:g.begin,"on:begin":g.isTrulyOpeningTag,end:g.end}],subLanguage:"xml",contains:[{begin:g.begin,end:g.end,skip:!0,contains:["self"]}]}]},Ge,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+c.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[j,c.inherit(c.TITLE_MODE,{begin:f,className:"title.function"})]},{match:/\.\.\./,relevance:0},S,{match:"\\$"+f,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[j]},Xe,C,oe,Be,{match:/\$[(.]/}]}}return qc=l,qc}var Wc,lm;function qE(){if(lm)return Wc;lm=1;function n(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},r={match:/[{}[\],:]/,className:"punctuation",relevance:0},i=["true","false","null"],o={scope:"literal",beginKeywords:i.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:i},contains:[e,r,t.QUOTE_STRING_MODE,o,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}return Wc=n,Wc}var Kc,cm;function WE(){if(cm)return Kc;cm=1;var n="[0-9](_*[0-9])*",t=`\\.(${n})`,e="[0-9a-fA-F](_*[0-9a-fA-F])*",r={className:"number",variants:[{begin:`(\\b(${n})((${t})|\\.)?|(${t}))[eE][+-]?(${n})[fFdD]?\\b`},{begin:`\\b(${n})((${t})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${t})[fFdD]?\\b`},{begin:`\\b(${n})[fFdD]\\b`},{begin:`\\b0[xX]((${e})\\.?|(${e})?\\.(${e}))[pP][+-]?(${n})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${e})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function i(o){const s={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},a={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},l={className:"symbol",begin:o.UNDERSCORE_IDENT_RE+"@"},c={className:"subst",begin:/\$\{/,end:/\}/,contains:[o.C_NUMBER_MODE]},u={className:"variable",begin:"\\$"+o.UNDERSCORE_IDENT_RE},d={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[u,c]},{begin:"'",end:"'",illegal:/\n/,contains:[o.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[o.BACKSLASH_ESCAPE,u,c]}]};c.contains.push(d);const f={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+o.UNDERSCORE_IDENT_RE+")?"},h={className:"meta",begin:"@"+o.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[o.inherit(d,{className:"string"}),"self"]}]},p=r,g=o.COMMENT("/\\*","\\*/",{contains:[o.C_BLOCK_COMMENT_MODE]}),y={variants:[{className:"type",begin:o.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},k=y;return k.variants[1].contains=[y],y.variants[1].contains=[k],{name:"Kotlin",aliases:["kt","kts"],keywords:s,contains:[o.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),o.C_LINE_COMMENT_MODE,g,a,l,f,h,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:s,relevance:5,contains:[{begin:o.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[o.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[y,o.C_LINE_COMMENT_MODE,g],relevance:0},o.C_LINE_COMMENT_MODE,g,f,h,d,o.C_NUMBER_MODE]},g]},{begin:[/class|interface|trait/,/\s+/,o.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},o.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},f,h]},d,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},p]}}return Kc=i,Kc}var Vc,um;function KE(){if(um)return Vc;um=1;const n=u=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:u.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[u.APOS_STRING_MODE,u.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:u.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],r=[...t,...e],i=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),s=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),a=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),l=o.concat(s).sort().reverse();function c(u){const d=n(u),f=l,h="and or not only",p="[\\w-]+",g="("+p+"|@\\{"+p+"\\})",y=[],k=[],v=function(Z){return{className:"string",begin:"~?"+Z+".*?"+Z}},E=function(Z,te,j){return{className:Z,begin:te,relevance:j}},R={$pattern:/[a-z-]+/,keyword:h,attribute:i.join(" ")},A={begin:"\\(",end:"\\)",contains:k,keywords:R,relevance:0};k.push(u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,v("'"),v('"'),d.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},d.HEXCOLOR,A,E("variable","@@?"+p,10),E("variable","@\\{"+p+"\\}"),E("built_in","~?`[^`]*?`"),{className:"attribute",begin:p+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},d.IMPORTANT,{beginKeywords:"and not"},d.FUNCTION_DISPATCH);const w=k.concat({begin:/\{/,end:/\}/,contains:y}),T={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(k)},I={begin:g+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},d.CSS_VARIABLE,{className:"attribute",begin:"\\b("+a.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:k}}]},F={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:R,returnEnd:!0,contains:k,relevance:0}},N={className:"variable",variants:[{begin:"@"+p+"\\s*:",relevance:15},{begin:"@"+p}],starts:{end:"[;}]",returnEnd:!0,contains:w}},$={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:g,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,T,E("keyword","all\\b"),E("variable","@\\{"+p+"\\}"),{begin:"\\b("+r.join("|")+")\\b",className:"selector-tag"},d.CSS_NUMBER_MODE,E("selector-tag",g,0),E("selector-id","#"+g),E("selector-class","\\."+g,0),E("selector-tag","&",0),d.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+o.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+s.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:w},{begin:"!important"},d.FUNCTION_DISPATCH]},K={begin:p+`:(:)?(${f.join("|")})`,returnBegin:!0,contains:[$]};return y.push(u.C_LINE_COMMENT_MODE,u.C_BLOCK_COMMENT_MODE,F,N,K,I,$,T,d.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:y}}return Vc=c,Vc}var Yc,dm;function VE(){if(dm)return Yc;dm=1;function n(t){const e="\\[=*\\[",r="\\]=*\\]",i={begin:e,end:r,contains:["self"]},o=[t.COMMENT("--(?!"+e+")","$"),t.COMMENT("--"+e,r,{contains:[i],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:o.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:o}].concat(o)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:e,end:r,contains:[i],relevance:5}])}}return Yc=n,Yc}var Gc,fm;function YE(){if(fm)return Gc;fm=1;function n(t){const e={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},r={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,e]},i={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,r]},o={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},s={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},a={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,e,r,i,o,s,a]}}return Gc=n,Gc}var jc,hm;function GE(){if(hm)return jc;hm=1;function n(t){const e=t.regex,r=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],i=/[dualxmsipngr]{0,12}/,o={$pattern:/[\w.]+/,keyword:r.join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:o},a={begin:/->\{/,end:/\}/},l={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},c={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[l]},u={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},d=[t.BACKSLASH_ESCAPE,s,c],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],h=(y,k,v="\\1")=>{const E=v==="\\1"?v:e.concat(v,k);return e.concat(e.concat("(?:",y,")"),k,/(?:\\.|[^\\\/])*?/,E,/(?:\\.|[^\\\/])*?/,v,i)},p=(y,k,v)=>e.concat(e.concat("(?:",y,")"),k,/(?:\\.|[^\\\/])*?/,v,i),g=[c,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),a,{className:"string",contains:d,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},u,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:h("s|tr|y",e.either(...f,{capture:!0}))},{begin:h("s|tr|y","\\(","\\)")},{begin:h("s|tr|y","\\[","\\]")},{begin:h("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:p("(?:m|qr)?",/\//,/\//)},{begin:p("m|qr",e.either(...f,{capture:!0}),/\1/)},{begin:p("m|qr",/\(/,/\)/)},{begin:p("m|qr",/\[/,/\]/)},{begin:p("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,l]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,l,u]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=g,a.contains=g,{name:"Perl",aliases:["pl","pm"],keywords:o,contains:g}}return jc=n,jc}var Jc,pm;function jE(){if(pm)return Jc;pm=1;function n(t){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},r=/[a-zA-Z@][a-zA-Z0-9_]*/,l={"variable.language":["this","super"],$pattern:r,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},c={$pattern:r,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:l,illegal:"</",contains:[e,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+c.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:c,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}return Jc=n,Jc}var Xc,mm;function JE(){if(mm)return Xc;mm=1;function n(t){const e=t.regex,r=/(?![A-Za-z0-9])(?![$])/,i=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,r),o=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,r),s=e.concat(/[A-Z]+/,r),a={scope:"variable",match:"\\$+"+i},l={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},c={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},u=t.inherit(t.APOS_STRING_MODE,{illegal:null}),d=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(c)}),f={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(c),"on:begin":(j,oe)=>{oe.data._beginMatch=j[1]||j[2]},"on:end":(j,oe)=>{oe.data._beginMatch!==j[1]&&oe.ignoreMatch()}},h=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),p=`[ 	
]`,g={scope:"string",variants:[d,u,f,h]},y={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},k=["false","null","true"],v=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],E=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],A={keyword:v,literal:(j=>{const oe=[];return j.forEach(de=>{oe.push(de),de.toLowerCase()===de?oe.push(de.toUpperCase()):oe.push(de.toLowerCase())}),oe})(k),built_in:E},w=j=>j.map(oe=>oe.replace(/\|\d+$/,"")),T={variants:[{match:[/new/,e.concat(p,"+"),e.concat("(?!",w(E).join("\\b|"),"\\b)"),o],scope:{1:"keyword",4:"title.class"}}]},I=e.concat(i,"\\b(?!\\()"),F={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),I],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[o,e.concat(/::/,e.lookahead(/(?!class\b)/)),I],scope:{1:"title.class",3:"variable.constant"}},{match:[o,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[o,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},N={scope:"attr",match:e.concat(i,e.lookahead(":"),e.lookahead(/(?!::)/))},$={relevance:0,begin:/\(/,end:/\)/,keywords:A,contains:[N,a,F,t.C_BLOCK_COMMENT_MODE,g,y,T]},K={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",w(v).join("\\b|"),"|",w(E).join("\\b|"),"\\b)"),i,e.concat(p,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[$]};$.contains.push(K);const Z=[N,F,t.C_BLOCK_COMMENT_MODE,g,y,T],te={begin:e.concat(/#\[\s*\\?/,e.either(o,s)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:k,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:k,keyword:["new","array"]},contains:["self",...Z]},...Z,{scope:"meta",variants:[{match:o},{match:s}]}]};return{case_insensitive:!1,keywords:A,contains:[te,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},l,{scope:"variable.language",match:/\$this\b/},a,K,F,{match:[/const/,/\s/,i],scope:{1:"keyword",3:"variable.constant"}},T,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:A,contains:["self",te,a,F,t.C_BLOCK_COMMENT_MODE,g,y]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},g,y]}}return Xc=n,Xc}var Zc,gm;function XE(){if(gm)return Zc;gm=1;function n(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}return Zc=n,Zc}var Qc,bm;function ZE(){if(bm)return Qc;bm=1;function n(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}return Qc=n,Qc}var eu,ym;function QE(){if(ym)return eu;ym=1;function n(t){const e=t.regex,r=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),i=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:i,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},c={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},d={begin:/\{\{/,relevance:0},f={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,c,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,c,d,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,d,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,d,u]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},h="[0-9](_?[0-9])*",p=`(\\b(${h}))?\\.(${h})|\\b(${h})\\.`,g=`\\b|${i.join("|")}`,y={className:"number",relevance:0,variants:[{begin:`(\\b(${h})|(${p}))[eE][+-]?(${h})[jJ]?(?=${g})`},{begin:`(${p})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${g})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${g})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${g})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${g})`},{begin:`\\b(${h})[jJ](?=${g})`}]},k={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},v={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",c,y,f,t.HASH_COMMENT_MODE]}]};return u.contains=[f,y,c],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[c,y,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},f,k,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,r],scope:{1:"keyword",3:"title.function"},contains:[v]},{variants:[{match:[/\bclass/,/\s+/,r,/\s*/,/\(\s*/,r,/\s*\)/]},{match:[/\bclass/,/\s+/,r]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[y,v,f]}]}}return eu=n,eu}var tu,km;function eC(){if(km)return tu;km=1;function n(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}return tu=n,tu}var nu,wm;function tC(){if(wm)return nu;wm=1;function n(t){const e=t.regex,r=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,i=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),o=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,s=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:r,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:r},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[o,i]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,i]},{scope:{1:"punctuation",2:"number"},match:[s,i]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,i]}]},{scope:{3:"operator"},match:[r,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:o},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:s},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}return nu=n,nu}var ru,xm;function nC(){if(xm)return ru;xm=1;function n(t){const e=t.regex,r=/(r#)?/,i=e.concat(r,t.UNDERSCORE_IDENT_RE),o=e.concat(r,t.IDENT_RE),s={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,o,e.lookahead(/\s*\(/))},a="([ui](8|16|32|64|128|size)|f(32|64))?",l=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],c=["true","false","Some","None","Ok","Err"],u=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],d=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:d,keyword:l,literal:c,built_in:u},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+a},{begin:"\\b0o([0-7_]+)"+a},{begin:"\\b0x([A-Fa-f0-9_]+)"+a},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+a}],relevance:0},{begin:[/fn/,/\s+/,i],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,i],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,i,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,i],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,i],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:u,type:d}},{className:"punctuation",begin:"->"},s]}}return ru=n,ru}var iu,Em;function rC(){if(Em)return iu;Em=1;const n=c=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:c.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[c.APOS_STRING_MODE,c.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:c.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),t=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],e=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],r=[...t,...e],i=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),s=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),a=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function l(c){const u=n(c),d=s,f=o,h="@[a-z-]+",p="and or not only",y={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[c.C_LINE_COMMENT_MODE,c.C_BLOCK_COMMENT_MODE,u.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},u.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+r.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+f.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+d.join("|")+")"},y,{begin:/\(/,end:/\)/,contains:[u.CSS_NUMBER_MODE]},u.CSS_VARIABLE,{className:"attribute",begin:"\\b("+a.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[u.BLOCK_COMMENT,y,u.HEXCOLOR,u.CSS_NUMBER_MODE,c.QUOTE_STRING_MODE,c.APOS_STRING_MODE,u.IMPORTANT,u.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:h,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:p,attribute:i.join(" ")},contains:[{begin:h,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},y,c.QUOTE_STRING_MODE,c.APOS_STRING_MODE,u.HEXCOLOR,u.CSS_NUMBER_MODE]},u.FUNCTION_DISPATCH]}}return iu=l,iu}var ou,Cm;function iC(){if(Cm)return ou;Cm=1;function n(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}return ou=n,ou}var su,Sm;function oC(){if(Sm)return su;Sm=1;function n(t){const e=t.regex,r=t.COMMENT("--","$"),i={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},o={begin:/"/,end:/"/,contains:[{match:/""/}]},s=["true","false","unknown"],a=["double precision","large object","with timezone","without timezone"],l=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],c=["add","asc","collation","desc","final","first","last","view"],u=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],d=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],f=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],h=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],p=d,g=[...u,...c].filter(w=>!d.includes(w)),y={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},k={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},v={match:e.concat(/\b/,e.either(...p),/\s*\(/),relevance:0,keywords:{built_in:p}};function E(w){return e.concat(/\b/,e.either(...w.map(T=>T.replace(/\s+/,"\\s+"))),/\b/)}const R={scope:"keyword",match:E(h),relevance:0};function A(w,{exceptions:T,when:I}={}){const F=I;return T=T||[],w.map(N=>N.match(/\|\d+$/)||T.includes(N)?N:F(N)?`${N}|0`:N)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:A(g,{when:w=>w.length<3}),literal:s,type:l,built_in:f},contains:[{scope:"type",match:E(a)},R,v,y,i,o,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,r,k]}}return su=n,su}var au,vm;function sC(){if(vm)return au;vm=1;function n(I){return I?typeof I=="string"?I:I.source:null}function t(I){return e("(?=",I,")")}function e(...I){return I.map(N=>n(N)).join("")}function r(I){const F=I[I.length-1];return typeof F=="object"&&F.constructor===Object?(I.splice(I.length-1,1),F):{}}function i(...I){return"("+(r(I).capture?"":"?:")+I.map($=>n($)).join("|")+")"}const o=I=>e(/\b/,I,/\w$/.test(I)?/\b/:/\B/),s=["Protocol","Type"].map(o),a=["init","self"].map(o),l=["Any","Self"],c=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],u=["false","nil","true"],d=["assignment","associativity","higherThan","left","lowerThan","none","right"],f=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],h=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],p=i(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),g=i(p,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),y=e(p,g,"*"),k=i(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),v=i(k,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),E=e(k,v,"*"),R=e(/[A-Z]/,v,"*"),A=["attached","autoclosure",e(/convention\(/,i("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",e(/objc\(/,E,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],w=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function T(I){const F={match:/\s+/,relevance:0},N=I.COMMENT("/\\*","\\*/",{contains:["self"]}),$=[I.C_LINE_COMMENT_MODE,N],K={match:[/\./,i(...s,...a)],className:{2:"keyword"}},Z={match:e(/\./,i(...c)),relevance:0},te=c.filter(Ne=>typeof Ne=="string").concat(["_|0"]),j=c.filter(Ne=>typeof Ne!="string").concat(l).map(o),oe={variants:[{className:"keyword",match:i(...j,...a)}]},de={$pattern:i(/\b\w+/,/#\w+/),keyword:te.concat(f),literal:u},ye=[K,Z,oe],Ge={match:e(/\./,i(...h)),relevance:0},C={className:"built_in",match:e(/\b/,i(...h),/(?=\()/)},Le=[Ge,C],Xe={match:/->/,relevance:0},S={className:"operator",relevance:0,variants:[{match:y},{match:`\\.(\\.|${g})+`}]},Be=[Xe,S],ze="([0-9]_*)+",Me="([0-9a-fA-F]_*)+",ve={className:"number",relevance:0,variants:[{match:`\\b(${ze})(\\.(${ze}))?([eE][+-]?(${ze}))?\\b`},{match:`\\b0x(${Me})(\\.(${Me}))?([pP][+-]?(${ze}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},pe=(Ne="")=>({className:"subst",variants:[{match:e(/\\/,Ne,/[0\\tnr"']/)},{match:e(/\\/,Ne,/u\{[0-9a-fA-F]{1,8}\}/)}]}),Fe=(Ne="")=>({className:"subst",match:e(/\\/,Ne,/[\t ]*(?:[\r\n]|\r\n)/)}),$e=(Ne="")=>({className:"subst",label:"interpol",begin:e(/\\/,Ne,/\(/),end:/\)/}),Ze=(Ne="")=>({begin:e(Ne,/"""/),end:e(/"""/,Ne),contains:[pe(Ne),Fe(Ne),$e(Ne)]}),it=(Ne="")=>({begin:e(Ne,/"/),end:e(/"/,Ne),contains:[pe(Ne),$e(Ne)]}),At={className:"string",variants:[Ze(),Ze("#"),Ze("##"),Ze("###"),it(),it("#"),it("##"),it("###")]},Ar=[I.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[I.BACKSLASH_ESCAPE]}],rr={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:Ar},Pn=Ne=>{const Ct=e(Ne,/\//),Fn=e(/\//,Ne);return{begin:Ct,end:Fn,contains:[...Ar,{scope:"comment",begin:`#(?!.*${Fn})`,end:/$/}]}},Bn={scope:"regexp",variants:[Pn("###"),Pn("##"),Pn("#"),rr]},ir={match:e(/`/,E,/`/)},_n={className:"variable",match:/\$\d+/},or={className:"variable",match:`\\$${v}+`},sr=[ir,_n,or],Or={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:w,contains:[...Be,ve,At]}]}},zn={scope:"keyword",match:e(/@/,i(...A),t(i(/\(/,/\s+/)))},zt={scope:"meta",match:e(/@/,E)},Ft=[Or,zn,zt],O={match:t(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:e(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,v,"+")},{className:"type",match:R,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:e(/\s+&\s+/,t(R)),relevance:0}]},U={begin:/</,end:/>/,keywords:de,contains:[...$,...ye,...Ft,Xe,O]};O.contains.push(U);const se={match:e(E,/\s*:/),keywords:"_|0",relevance:0},fe={begin:/\(/,end:/\)/,relevance:0,keywords:de,contains:["self",se,...$,Bn,...ye,...Le,...Be,ve,At,...sr,...Ft,O]},we={begin:/</,end:/>/,keywords:"repeat each",contains:[...$,O]},mt={begin:i(t(e(E,/\s*:/)),t(e(E,/\s+/,E,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:E}]},Ot={begin:/\(/,end:/\)/,keywords:de,contains:[mt,...$,...ye,...Be,ve,At,...Ft,O,fe],endsParent:!0,illegal:/["']/},It={match:[/(func|macro)/,/\s+/,i(ir.match,E,y)],className:{1:"keyword",3:"title.function"},contains:[we,Ot,F],illegal:[/\[/,/%/]},pn={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[we,Ot,F],illegal:/\[|%/},_e={match:[/operator/,/\s+/,y],className:{1:"keyword",3:"title"}},nt={begin:[/precedencegroup/,/\s+/,R],className:{1:"keyword",3:"title"},contains:[O],keywords:[...d,...u],end:/}/},$t={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},gt={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},ar={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,E,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:de,contains:[we,...ye,{begin:/:/,end:/\{/,keywords:de,contains:[{scope:"title.class.inherited",match:R},...ye],relevance:0}]};for(const Ne of At.variants){const Ct=Ne.contains.find($n=>$n.label==="interpol");Ct.keywords=de;const Fn=[...ye,...Le,...Be,ve,At,...sr];Ct.contains=[...Fn,{begin:/\(/,end:/\)/,contains:["self",...Fn]}]}return{name:"Swift",keywords:de,contains:[...$,It,pn,$t,gt,ar,_e,nt,{beginKeywords:"import",end:/$/,contains:[...$],relevance:0},Bn,...ye,...Le,...Be,ve,At,...sr,...Ft,O,fe]}}return au=T,au}var lu,_m;function aC(){if(_m)return lu;_m=1;function n(t){const e="true false yes no null",r="[\\w#;/?:@&=+$,.~*'()[\\]]+",i={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},a={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,o]},l=t.inherit(a,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),h={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},p={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},g={begin:/\{/,end:/\}/,contains:[p],illegal:"\\n",relevance:0},y={begin:"\\[",end:"\\]",contains:[p],illegal:"\\n",relevance:0},k=[i,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+r},{className:"type",begin:"!<"+r+">"},{className:"type",begin:"!"+r},{className:"type",begin:"!!"+r},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},h,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},g,y,s,a],v=[...k];return v.pop(),v.push(l),p.contains=v,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:k}}return lu=n,lu}var cu,Nm;function lC(){if(Nm)return cu;Nm=1;const n="[A-Za-z$_][0-9A-Za-z$_]*",t=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],e=["true","false","null","undefined","NaN","Infinity"],r=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],i=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],o=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],s=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],a=[].concat(o,r,i);function l(u){const d=u.regex,f=(pe,{after:Fe})=>{const $e="</"+pe[0].slice(1);return pe.input.indexOf($e,Fe)!==-1},h=n,p={begin:"<>",end:"</>"},g=/<[A-Za-z0-9\\._:-]+\s*\/>/,y={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(pe,Fe)=>{const $e=pe[0].length+pe.index,Ze=pe.input[$e];if(Ze==="<"||Ze===","){Fe.ignoreMatch();return}Ze===">"&&(f(pe,{after:$e})||Fe.ignoreMatch());let it;const At=pe.input.substring($e);if(it=At.match(/^\s*=/)){Fe.ignoreMatch();return}if((it=At.match(/^\s+extends\s+/))&&it.index===0){Fe.ignoreMatch();return}}},k={$pattern:n,keyword:t,literal:e,built_in:a,"variable.language":s},v="[0-9](_?[0-9])*",E=`\\.(${v})`,R="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",A={className:"number",variants:[{begin:`(\\b(${R})((${E})|\\.)?|(${E}))[eE][+-]?(${v})\\b`},{begin:`\\b(${R})\\b((${E})\\b|\\.)?|(${E})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},w={className:"subst",begin:"\\$\\{",end:"\\}",keywords:k,contains:[]},T={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,w],subLanguage:"xml"}},I={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,w],subLanguage:"css"}},F={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[u.BACKSLASH_ESCAPE,w],subLanguage:"graphql"}},N={className:"string",begin:"`",end:"`",contains:[u.BACKSLASH_ESCAPE,w]},K={className:"comment",variants:[u.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:h+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),u.C_BLOCK_COMMENT_MODE,u.C_LINE_COMMENT_MODE]},Z=[u.APOS_STRING_MODE,u.QUOTE_STRING_MODE,T,I,F,N,{match:/\$\d+/},A];w.contains=Z.concat({begin:/\{/,end:/\}/,keywords:k,contains:["self"].concat(Z)});const te=[].concat(K,w.contains),j=te.concat([{begin:/(\s*)\(/,end:/\)/,keywords:k,contains:["self"].concat(te)}]),oe={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:k,contains:j},de={variants:[{match:[/class/,/\s+/,h,/\s+/,/extends/,/\s+/,d.concat(h,"(",d.concat(/\./,h),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,h],scope:{1:"keyword",3:"title.class"}}]},ye={relevance:0,match:d.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...r,...i]}},Ge={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},C={variants:[{match:[/function/,/\s+/,h,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[oe],illegal:/%/},Le={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function Xe(pe){return d.concat("(?!",pe.join("|"),")")}const S={match:d.concat(/\b/,Xe([...o,"super","import"].map(pe=>`${pe}\\s*\\(`)),h,d.lookahead(/\s*\(/)),className:"title.function",relevance:0},Be={begin:d.concat(/\./,d.lookahead(d.concat(h,/(?![0-9A-Za-z$_(])/))),end:h,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},ze={match:[/get|set/,/\s+/,h,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},oe]},Me="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+u.UNDERSCORE_IDENT_RE+")\\s*=>",ve={match:[/const|var|let/,/\s+/,h,/\s*/,/=\s*/,/(async\s*)?/,d.lookahead(Me)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[oe]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:k,exports:{PARAMS_CONTAINS:j,CLASS_REFERENCE:ye},illegal:/#(?![$_A-z])/,contains:[u.SHEBANG({label:"shebang",binary:"node",relevance:5}),Ge,u.APOS_STRING_MODE,u.QUOTE_STRING_MODE,T,I,F,N,K,{match:/\$\d+/},A,ye,{scope:"attr",match:h+d.lookahead(":"),relevance:0},ve,{begin:"("+u.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[K,u.REGEXP_MODE,{className:"function",begin:Me,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:u.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:k,contains:j}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:p.begin,end:p.end},{match:g},{begin:y.begin,"on:begin":y.isTrulyOpeningTag,end:y.end}],subLanguage:"xml",contains:[{begin:y.begin,end:y.end,skip:!0,contains:["self"]}]}]},C,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+u.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[oe,u.inherit(u.TITLE_MODE,{begin:h,className:"title.function"})]},{match:/\.\.\./,relevance:0},Be,{match:"\\$"+h,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[oe]},S,Le,de,ze,{match:/\$[(.]/}]}}function c(u){const d=u.regex,f=l(u),h=n,p=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],g={begin:[/namespace/,/\s+/,u.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},y={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:p},contains:[f.exports.CLASS_REFERENCE]},k={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},v=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],E={$pattern:n,keyword:t.concat(v),literal:e,built_in:a.concat(p),"variable.language":s},R={className:"meta",begin:"@"+h},A=(F,N,$)=>{const K=F.contains.findIndex(Z=>Z.label===N);if(K===-1)throw new Error("can not find mode to replace");F.contains.splice(K,1,$)};Object.assign(f.keywords,E),f.exports.PARAMS_CONTAINS.push(R);const w=f.contains.find(F=>F.scope==="attr"),T=Object.assign({},w,{match:d.concat(h,d.lookahead(/\s*\?:/))});f.exports.PARAMS_CONTAINS.push([f.exports.CLASS_REFERENCE,w,T]),f.contains=f.contains.concat([R,g,y,T]),A(f,"shebang",u.SHEBANG()),A(f,"use_strict",k);const I=f.contains.find(F=>F.label==="func.def");return I.relevance=0,Object.assign(f,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),f}return cu=c,cu}var uu,Tm;function cC(){if(Tm)return uu;Tm=1;function n(t){const e=t.regex,r={className:"string",begin:/"(""|[^/n])"C\b/},i={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},o=/\d{1,2}\/\d{1,2}\/\d{4}/,s=/\d{4}-\d{1,2}-\d{1,2}/,a=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,l=/\d{1,2}(:\d{1,2}){1,2}/,c={className:"literal",variants:[{begin:e.concat(/# */,e.either(s,o),/ *#/)},{begin:e.concat(/# */,l,/ *#/)},{begin:e.concat(/# */,a,/ *#/)},{begin:e.concat(/# */,e.either(s,o),/ +/,e.either(a,l),/ *#/)}]},u={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},d={className:"label",begin:/^\w+:/},f=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),h=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[r,i,c,u,d,f,h,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[h]}]}}return uu=n,uu}var du,Mm;function uC(){if(Mm)return du;Mm=1;function n(t){t.regex;const e=t.COMMENT(/\(;/,/;\)/);e.contains.push("self");const r=t.COMMENT(/;;/,/$/),i=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],o={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},s={className:"variable",begin:/\$[\w_]+/},a={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},l={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},c={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},u={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:i},contains:[r,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},s,a,o,t.QUOTE_STRING_MODE,c,u,l]}}return du=n,du}var fu,Am;function dC(){if(Am)return fu;Am=1;var n=TE();return n.registerLanguage("xml",ME()),n.registerLanguage("bash",AE()),n.registerLanguage("c",OE()),n.registerLanguage("cpp",IE()),n.registerLanguage("csharp",DE()),n.registerLanguage("css",RE()),n.registerLanguage("markdown",LE()),n.registerLanguage("diff",PE()),n.registerLanguage("ruby",BE()),n.registerLanguage("go",zE()),n.registerLanguage("graphql",FE()),n.registerLanguage("ini",$E()),n.registerLanguage("java",HE()),n.registerLanguage("javascript",UE()),n.registerLanguage("json",qE()),n.registerLanguage("kotlin",WE()),n.registerLanguage("less",KE()),n.registerLanguage("lua",VE()),n.registerLanguage("makefile",YE()),n.registerLanguage("perl",GE()),n.registerLanguage("objectivec",jE()),n.registerLanguage("php",JE()),n.registerLanguage("php-template",XE()),n.registerLanguage("plaintext",ZE()),n.registerLanguage("python",QE()),n.registerLanguage("python-repl",eC()),n.registerLanguage("r",tC()),n.registerLanguage("rust",nC()),n.registerLanguage("scss",rC()),n.registerLanguage("shell",iC()),n.registerLanguage("sql",oC()),n.registerLanguage("swift",sC()),n.registerLanguage("yaml",aC()),n.registerLanguage("typescript",lC()),n.registerLanguage("vbnet",cC()),n.registerLanguage("wasm",uC()),n.HighlightJS=n,n.default=n,fu=n,fu}var fC=dC();const hC=Hb(fC);function bf(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Gi=bf();function iy(n){Gi=n}const oy=/[&<>"']/,pC=new RegExp(oy.source,"g"),sy=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,mC=new RegExp(sy.source,"g"),gC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Om=n=>gC[n];function an(n,t){if(t){if(oy.test(n))return n.replace(pC,Om)}else if(sy.test(n))return n.replace(mC,Om);return n}const bC=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function yC(n){return n.replace(bC,(t,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const kC=/(^|[^\[])\^/g;function Pe(n,t){let e=typeof n=="string"?n:n.source;t=t||"";const r={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(kC,"$1"),e=e.replace(i,s),r},getRegex:()=>new RegExp(e,t)};return r}function Im(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const ws={exec:()=>null};function Dm(n,t){const e=n.replace(/\|/g,(o,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),r=e.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function $a(n,t,e){const r=n.length;if(r===0)return"";let i=0;for(;i<r&&n.charAt(r-i-1)===t;)i++;return n.slice(0,r-i)}function wC(n,t){if(n.indexOf(t[1])===-1)return-1;let e=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===t[0])e++;else if(n[r]===t[1]&&(e--,e<0))return r;return-1}function Rm(n,t,e,r){const i=t.href,o=t.title?an(t.title):null,s=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:e,href:i,title:o,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,a}return{type:"image",raw:e,href:i,title:o,text:an(s)}}function xC(n,t){const e=n.match(/^(\s+)(?:```)/);if(e===null)return t;const r=e[1];return t.split(`
`).map(i=>{const o=i.match(/^\s+/);if(o===null)return i;const[s]=o;return s.length>=r.length?i.slice(r.length):i}).join(`
`)}class El{constructor(t){Ke(this,"options");Ke(this,"rules");Ke(this,"lexer");this.options=t||Gi}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const r=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:$a(r,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const r=e[0],i=xC(r,e[3]||"");return{type:"code",raw:r,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let r=e[2].trim();if(/#$/.test(r)){const i=$a(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let r=e[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);r=$a(r.replace(/^ *>[ \t]?/gm,""),`
`);const i=this.lexer.state.top;this.lexer.state.top=!0;const o=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:e[0],tokens:o,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let r=e[1].trim();const i=r.length>1,o={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const s=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",l="",c=!1;for(;t;){let u=!1;if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;a=e[0],t=t.substring(a.length);let d=e[2].split(`
`,1)[0].replace(/^\t+/,k=>" ".repeat(3*k.length)),f=t.split(`
`,1)[0],h=0;this.options.pedantic?(h=2,l=d.trimStart()):(h=e[2].search(/[^ ]/),h=h>4?1:h,l=d.slice(h),h+=e[1].length);let p=!1;if(!d&&/^ *$/.test(f)&&(a+=f+`
`,t=t.substring(f.length+1),u=!0),!u){const k=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),v=new RegExp(`^ {0,${Math.min(3,h-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),E=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:\`\`\`|~~~)`),R=new RegExp(`^ {0,${Math.min(3,h-1)}}#`);for(;t;){const A=t.split(`
`,1)[0];if(f=A,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),E.test(f)||R.test(f)||k.test(f)||v.test(t))break;if(f.search(/[^ ]/)>=h||!f.trim())l+=`
`+f.slice(h);else{if(p||d.search(/[^ ]/)>=4||E.test(d)||R.test(d)||v.test(d))break;l+=`
`+f}!p&&!f.trim()&&(p=!0),a+=A+`
`,t=t.substring(A.length+1),d=f.slice(h)}}o.loose||(c?o.loose=!0:/\n *\n *$/.test(a)&&(c=!0));let g=null,y;this.options.gfm&&(g=/^\[[ xX]\] /.exec(l),g&&(y=g[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!g,checked:y,loose:!1,text:l,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=l.trimEnd(),o.raw=o.raw.trimEnd();for(let u=0;u<o.items.length;u++)if(this.lexer.state.top=!1,o.items[u].tokens=this.lexer.blockTokens(o.items[u].text,[]),!o.loose){const d=o.items[u].tokens.filter(h=>h.type==="space"),f=d.length>0&&d.some(h=>/\n.*\n/.test(h.raw));o.loose=f}if(o.loose)for(let u=0;u<o.items.length;u++)o.items[u].loose=!0;return o}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const r=e[1].toLowerCase().replace(/\s+/g," "),i=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:r,raw:e[0],href:i,title:o}}}table(t){const e=this.rules.block.table.exec(t);if(!e||!/[:|]/.test(e[2]))return;const r=Dm(e[1]),i=e[2].replace(/^\||\| *$/g,"").split("|"),o=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const a of i)/^ *-+: *$/.test(a)?s.align.push("right"):/^ *:-+: *$/.test(a)?s.align.push("center"):/^ *:-+ *$/.test(a)?s.align.push("left"):s.align.push(null);for(const a of r)s.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of o)s.rows.push(Dm(a,s.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return s}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const r=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:an(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const r=e[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const s=$a(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=wC(e[2],"()");if(s>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let i=e[2],o="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],o=s[3])}else o=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),Rm(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){const i=(r[2]||r[1]).replace(/\s+/g," "),o=e[i.toLowerCase()];if(!o){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Rm(r,o,r[0],this.lexer)}}emStrong(t,e,r=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=[...i[0]].length-1;let a,l,c=s,u=0;const d=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,e=e.slice(-1*t.length+s);(i=d.exec(e))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&s%3&&!((s+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const f=[...i[0]][0].length,h=t.slice(0,s+i.index+f+l);if(Math.min(s,l)%2){const g=h.slice(1,-1);return{type:"em",raw:h,text:g,tokens:this.lexer.inlineTokens(g)}}const p=h.slice(2,-2);return{type:"strong",raw:h,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let r=e[2].replace(/\n/g," ");const i=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return i&&o&&(r=r.substring(1,r.length-1)),r=an(r,!0),{type:"codespan",raw:e[0],text:r}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let r,i;return e[2]==="@"?(r=an(e[1]),i="mailto:"+r):(r=an(e[1]),i=r),{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(t){var r;let e;if(e=this.rules.inline.url.exec(t)){let i,o;if(e[2]==="@")i=an(e[0]),o="mailto:"+i;else{let s;do s=e[0],e[0]=((r=this.rules.inline._backpedal.exec(e[0]))==null?void 0:r[0])??"";while(s!==e[0]);i=an(e[0]),e[1]==="www."?o="http://"+e[0]:o=e[0]}return{type:"link",raw:e[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){let r;return this.lexer.state.inRawBlock?r=e[0]:r=an(e[0]),{type:"text",raw:e[0],text:r}}}}const EC=/^(?: *(?:\n|$))+/,CC=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,SC=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,la=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,vC=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ay=/(?:[*+-]|\d{1,9}[.)])/,ly=Pe(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ay).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),yf=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,_C=/^[^\n]+/,kf=/(?!\s*\])(?:\\.|[^\[\]\\])+/,NC=Pe(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",kf).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),TC=Pe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ay).getRegex(),Wl="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",wf=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,MC=Pe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",wf).replace("tag",Wl).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),cy=Pe(yf).replace("hr",la).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wl).getRegex(),AC=Pe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",cy).getRegex(),xf={blockquote:AC,code:CC,def:NC,fences:SC,heading:vC,hr:la,html:MC,lheading:ly,list:TC,newline:EC,paragraph:cy,table:ws,text:_C},Lm=Pe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",la).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wl).getRegex(),OC={...xf,table:Lm,paragraph:Pe(yf).replace("hr",la).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Lm).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wl).getRegex()},IC={...xf,html:Pe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",wf).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ws,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Pe(yf).replace("hr",la).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ly).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},uy=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,DC=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,dy=/^( {2,}|\\)\n(?!\s*$)/,RC=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ca="\\p{P}\\p{S}",LC=Pe(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,ca).getRegex(),PC=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,BC=Pe(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,ca).getRegex(),zC=Pe("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,ca).getRegex(),FC=Pe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,ca).getRegex(),$C=Pe(/\\([punct])/,"gu").replace(/punct/g,ca).getRegex(),HC=Pe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),UC=Pe(wf).replace("(?:-->|$)","-->").getRegex(),qC=Pe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",UC).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Cl=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,WC=Pe(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Cl).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),fy=Pe(/^!?\[(label)\]\[(ref)\]/).replace("label",Cl).replace("ref",kf).getRegex(),hy=Pe(/^!?\[(ref)\](?:\[\])?/).replace("ref",kf).getRegex(),KC=Pe("reflink|nolink(?!\\()","g").replace("reflink",fy).replace("nolink",hy).getRegex(),Ef={_backpedal:ws,anyPunctuation:$C,autolink:HC,blockSkip:PC,br:dy,code:DC,del:ws,emStrongLDelim:BC,emStrongRDelimAst:zC,emStrongRDelimUnd:FC,escape:uy,link:WC,nolink:hy,punctuation:LC,reflink:fy,reflinkSearch:KC,tag:qC,text:RC,url:ws},VC={...Ef,link:Pe(/^!?\[(label)\]\((.*?)\)/).replace("label",Cl).getRegex(),reflink:Pe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Cl).getRegex()},gd={...Ef,escape:Pe(uy).replace("])","~|])").getRegex(),url:Pe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},YC={...gd,br:Pe(dy).replace("{2,}","*").getRegex(),text:Pe(gd.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ha={normal:xf,gfm:OC,pedantic:IC},es={normal:Ef,gfm:gd,breaks:YC,pedantic:VC};class Gn{constructor(t){Ke(this,"tokens");Ke(this,"options");Ke(this,"state");Ke(this,"tokenizer");Ke(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Gi,this.options.tokenizer=this.options.tokenizer||new El,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:Ha.normal,inline:es.normal};this.options.pedantic?(e.block=Ha.pedantic,e.inline=es.pedantic):this.options.gfm&&(e.block=Ha.gfm,this.options.breaks?e.inline=es.breaks:e.inline=es.gfm),this.tokenizer.rules=e}static get rules(){return{block:Ha,inline:es}}static lex(t,e){return new Gn(e).lex(t)}static lexInline(t,e){return new Gn(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const r=this.inlineQueue[e];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let r,i,o,s;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},t,e))?(t=t.substring(r.raw.length),e.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=t.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){i=e[e.length-1],s&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r),s=o.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let r,i,o,s=t,a,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},t,e))?(t=t.substring(r.raw.length),e.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),i=e[e.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(r=this.tokenizer.emStrong(t,s,c)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),e.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),e.push(r);continue}if(o=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=t.slice(1);let f;this.options.extensions.startInline.forEach(h=>{f=h.call({lexer:this},d),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(o=t.substring(0,u+1))}if(r=this.tokenizer.inlineText(o)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),l=!0,i=e[e.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):e.push(r);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return e}}class Sl{constructor(t){Ke(this,"options");this.options=t||Gi}code(t,e,r){var o;const i=(o=(e||"").match(/^\S*/))==null?void 0:o[0];return t=t.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+an(i)+'">'+(r?t:an(t,!0))+`</code></pre>
`:"<pre><code>"+(r?t:an(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,e){return t}heading(t,e,r){return`<h${e}>${t}</h${e}>
`}hr(){return`<hr>
`}list(t,e,r){const i=e?"ol":"ul",o=e&&r!==1?' start="'+r+'"':"";return"<"+i+o+`>
`+t+"</"+i+`>
`}listitem(t,e,r){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+e+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,e){const r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,e,r){const i=Im(t);if(i===null)return r;t=i;let o='<a href="'+t+'"';return e&&(o+=' title="'+e+'"'),o+=">"+r+"</a>",o}image(t,e,r){const i=Im(t);if(i===null)return r;t=i;let o=`<img src="${t}" alt="${r}"`;return e&&(o+=` title="${e}"`),o+=">",o}text(t){return t}}class Cf{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,r){return""+r}image(t,e,r){return""+r}br(){return""}}class jn{constructor(t){Ke(this,"options");Ke(this,"renderer");Ke(this,"textRenderer");this.options=t||Gi,this.options.renderer=this.options.renderer||new Sl,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Cf}static parse(t,e){return new jn(e).parse(t)}static parseInline(t,e){return new jn(e).parseInline(t)}parse(t,e=!0){let r="";for(let i=0;i<t.length;i++){const o=t[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const s=o,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){r+=a||"";continue}}switch(o.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const s=o;r+=this.renderer.heading(this.parseInline(s.tokens),s.depth,yC(this.parseInline(s.tokens,this.textRenderer)));continue}case"code":{const s=o;r+=this.renderer.code(s.text,s.lang,!!s.escaped);continue}case"table":{const s=o;let a="",l="";for(let u=0;u<s.header.length;u++)l+=this.renderer.tablecell(this.parseInline(s.header[u].tokens),{header:!0,align:s.align[u]});a+=this.renderer.tablerow(l);let c="";for(let u=0;u<s.rows.length;u++){const d=s.rows[u];l="";for(let f=0;f<d.length;f++)l+=this.renderer.tablecell(this.parseInline(d[f].tokens),{header:!1,align:s.align[f]});c+=this.renderer.tablerow(l)}r+=this.renderer.table(a,c);continue}case"blockquote":{const s=o,a=this.parse(s.tokens);r+=this.renderer.blockquote(a);continue}case"list":{const s=o,a=s.ordered,l=s.start,c=s.loose;let u="";for(let d=0;d<s.items.length;d++){const f=s.items[d],h=f.checked,p=f.task;let g="";if(f.task){const y=this.renderer.checkbox(!!h);c?f.tokens.length>0&&f.tokens[0].type==="paragraph"?(f.tokens[0].text=y+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&f.tokens[0].tokens[0].type==="text"&&(f.tokens[0].tokens[0].text=y+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:y+" "}):g+=y+" "}g+=this.parse(f.tokens,c),u+=this.renderer.listitem(g,p,!!h)}r+=this.renderer.list(u,a,l);continue}case"html":{const s=o;r+=this.renderer.html(s.text,s.block);continue}case"paragraph":{const s=o;r+=this.renderer.paragraph(this.parseInline(s.tokens));continue}case"text":{let s=o,a=s.tokens?this.parseInline(s.tokens):s.text;for(;i+1<t.length&&t[i+1].type==="text";)s=t[++i],a+=`
`+(s.tokens?this.parseInline(s.tokens):s.text);r+=e?this.renderer.paragraph(a):a;continue}default:{const s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return r}parseInline(t,e){e=e||this.renderer;let r="";for(let i=0;i<t.length;i++){const o=t[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){const s=this.options.extensions.renderers[o.type].call({parser:this},o);if(s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=s||"";continue}}switch(o.type){case"escape":{const s=o;r+=e.text(s.text);break}case"html":{const s=o;r+=e.html(s.text);break}case"link":{const s=o;r+=e.link(s.href,s.title,this.parseInline(s.tokens,e));break}case"image":{const s=o;r+=e.image(s.href,s.title,s.text);break}case"strong":{const s=o;r+=e.strong(this.parseInline(s.tokens,e));break}case"em":{const s=o;r+=e.em(this.parseInline(s.tokens,e));break}case"codespan":{const s=o;r+=e.codespan(s.text);break}case"br":{r+=e.br();break}case"del":{const s=o;r+=e.del(this.parseInline(s.tokens,e));break}case"text":{const s=o;r+=e.text(s.text);break}default:{const s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return r}}class xs{constructor(t){Ke(this,"options");this.options=t||Gi}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}Ke(xs,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Yi,bd,py;class GC{constructor(...t){Q(this,Yi);Ke(this,"defaults",bf());Ke(this,"options",this.setOptions);Ke(this,"parse",La(this,Yi,bd).call(this,Gn.lex,jn.parse));Ke(this,"parseInline",La(this,Yi,bd).call(this,Gn.lexInline,jn.parseInline));Ke(this,"Parser",jn);Ke(this,"Renderer",Sl);Ke(this,"TextRenderer",Cf);Ke(this,"Lexer",Gn);Ke(this,"Tokenizer",El);Ke(this,"Hooks",xs);this.use(...t)}walkTokens(t,e){var i,o;let r=[];for(const s of t)switch(r=r.concat(e.call(this,s)),s.type){case"table":{const a=s;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,e));for(const l of a.rows)for(const c of l)r=r.concat(this.walkTokens(c.tokens,e));break}case"list":{const a=s;r=r.concat(this.walkTokens(a.items,e));break}default:{const a=s;(o=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&o[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const c=a[l].flat(1/0);r=r.concat(this.walkTokens(c,e))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,e)))}}return r}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const s=e.renderers[o.name];s?e.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:e.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=e[o.level];s?s.unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&(o.level==="block"?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:o.level==="inline"&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(e.childTokens[o.name]=o.childTokens)}),i.extensions=e),r.renderer){const o=this.defaults.renderer||new Sl(this.defaults);for(const s in r.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(s==="options")continue;const a=s,l=r.renderer[a],c=o[a];o[a]=(...u)=>{let d=l.apply(o,u);return d===!1&&(d=c.apply(o,u)),d||""}}i.renderer=o}if(r.tokenizer){const o=this.defaults.tokenizer||new El(this.defaults);for(const s in r.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const a=s,l=r.tokenizer[a],c=o[a];o[a]=(...u)=>{let d=l.apply(o,u);return d===!1&&(d=c.apply(o,u)),d}}i.tokenizer=o}if(r.hooks){const o=this.defaults.hooks||new xs;for(const s in r.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(s==="options")continue;const a=s,l=r.hooks[a],c=o[a];xs.passThroughHooks.has(s)?o[a]=u=>{if(this.defaults.async)return Promise.resolve(l.call(o,u)).then(f=>c.call(o,f));const d=l.call(o,u);return c.call(o,d)}:o[a]=(...u)=>{let d=l.apply(o,u);return d===!1&&(d=c.apply(o,u)),d}}i.hooks=o}if(r.walkTokens){const o=this.defaults.walkTokens,s=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(s.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Gn.lex(t,e??this.defaults)}parser(t,e){return jn.parse(t,e??this.defaults)}}Yi=new WeakSet,bd=function(t,e){return(r,i)=>{const o={...i},s={...this.defaults,...o};this.defaults.async===!0&&o.async===!1&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);const a=La(this,Yi,py).call(this,!!s.silent,!!s.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(l=>t(l,s)).then(l=>s.hooks?s.hooks.processAllTokens(l):l).then(l=>s.walkTokens?Promise.all(this.walkTokens(l,s.walkTokens)).then(()=>l):l).then(l=>e(l,s)).then(l=>s.hooks?s.hooks.postprocess(l):l).catch(a);try{s.hooks&&(r=s.hooks.preprocess(r));let l=t(r,s);s.hooks&&(l=s.hooks.processAllTokens(l)),s.walkTokens&&this.walkTokens(l,s.walkTokens);let c=e(l,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(l){return a(l)}}},py=function(t,e){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const i="<p>An error occurred:</p><pre>"+an(r.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(r);throw r}};const $i=new GC;function De(n,t){return $i.parse(n,t)}De.options=De.setOptions=function(n){return $i.setOptions(n),De.defaults=$i.defaults,iy(De.defaults),De};De.getDefaults=bf;De.defaults=Gi;De.use=function(...n){return $i.use(...n),De.defaults=$i.defaults,iy(De.defaults),De};De.walkTokens=function(n,t){return $i.walkTokens(n,t)};De.parseInline=$i.parseInline;De.Parser=jn;De.parser=jn.parse;De.Renderer=Sl;De.TextRenderer=Cf;De.Lexer=Gn;De.lexer=Gn.lex;De.Tokenizer=El;De.Hooks=xs;De.parse=De;De.options;De.setOptions;De.use;De.walkTokens;De.parseInline;jn.parse;Gn.lex;var Zt=(n=>(n.docTypeError="docTypeError",n.contextNotFound="contextNotFound",n.timerNotFound="timerNotFound",n.ctxCallOutOfScope="ctxCallOutOfScope",n.createNodeInParserFail="createNodeInParserFail",n.stackOverFlow="stackOverFlow",n.parserMatchError="parserMatchError",n.serializerMatchError="serializerMatchError",n.getAtomFromSchemaFail="getAtomFromSchemaFail",n.expectDomTypeError="expectDomTypeError",n.callCommandBeforeEditorView="callCommandBeforeEditorView",n.missingRootElement="missingRootElement",n.missingNodeInSchema="missingNodeInSchema",n.missingMarkInSchema="missingMarkInSchema",n.ctxNotBind="ctxNotBind",n.missingYjsDoc="missingYjsDoc",n))(Zt||{});class fn extends Error{constructor(t,e){super(e),this.name="MilkdownError",this.code=t}}const jC=(n,t)=>typeof t=="function"?"[Function]":t,Kl=n=>JSON.stringify(n,jC);function JC(n){return new fn(Zt.docTypeError,`Doc type error, unsupported type: ${Kl(n)}`)}function XC(n){return new fn(Zt.contextNotFound,`Context "${n}" not found, do you forget to inject it?`)}function ZC(n){return new fn(Zt.timerNotFound,`Timer "${n}" not found, do you forget to record it?`)}function Vl(){return new fn(Zt.ctxCallOutOfScope,"Should not call a context out of the plugin.")}function QC(n,t,e){const i=`Cannot create node for ${"name"in n?n.name:n}`,o=u=>{if(u==null)return"null";if(Array.isArray(u))return`[${u.map(o).join(", ")}]`;if(typeof u=="object")return"toJSON"in u&&typeof u.toJSON=="function"?JSON.stringify(u.toJSON()):"spec"in u?JSON.stringify(u.spec):JSON.stringify(u);if(typeof u=="string"||typeof u=="number"||typeof u=="boolean")return JSON.stringify(u);if(typeof u=="function")return`[Function: ${u.name||"anonymous"}]`;try{return String(u)}catch{return"[Unserializable]"}},s=["[Description]",i],a=["[Attributes]",t],l=["[Content]",(e??[]).map(u=>u?typeof u=="object"&&"type"in u?`${u}`:o(u):"null")],c=[s,a,l].reduce((u,[d,f])=>{const h=`${d}: ${o(f)}.`;return u.concat(h)},[]);return new fn(Zt.createNodeInParserFail,c.join(`
`))}function my(){return new fn(Zt.stackOverFlow,"Stack over flow, cannot pop on an empty stack.")}function eS(n){return new fn(Zt.parserMatchError,`Cannot match target parser for node: ${Kl(n)}.`)}function tS(n){return new fn(Zt.serializerMatchError,`Cannot match target serializer for node: ${Kl(n)}.`)}function nS(n,t){return new fn(Zt.getAtomFromSchemaFail,`Cannot get ${n}: ${t} from schema.`)}function tr(n){return new fn(Zt.expectDomTypeError,`Expect to be a dom, but get: ${Kl(n)}.`)}function hu(){return new fn(Zt.callCommandBeforeEditorView,"You're trying to call a command before editor view initialized, make sure to get commandManager from ctx after editor view has been initialized")}function gy(n){return new fn(Zt.missingNodeInSchema,`Missing node in schema, milkdown cannot find "${n}" in schema.`)}function rS(n){return new fn(Zt.missingMarkInSchema,`Missing mark in schema, milkdown cannot find "${n}" in schema.`)}class by{constructor(){this.sliceMap=new Map,this.get=t=>{const e=typeof t=="string"?[...this.sliceMap.values()].find(r=>r.type.name===t):this.sliceMap.get(t.id);if(!e){const r=typeof t=="string"?t:t.name;throw XC(r)}return e},this.remove=t=>{const e=typeof t=="string"?[...this.sliceMap.values()].find(r=>r.type.name===t):this.sliceMap.get(t.id);e&&this.sliceMap.delete(e.type.id)},this.has=t=>typeof t=="string"?[...this.sliceMap.values()].some(e=>e.type.name===t):this.sliceMap.has(t.id)}}var Mn,pr,ko,Bb;let iS=(Bb=class{constructor(t,e,r){Q(this,Mn);Q(this,pr);Q(this,ko);q(this,Mn,[]),q(this,ko,()=>{M(this,Mn).forEach(i=>i(M(this,pr)))}),this.set=i=>{q(this,pr,i),M(this,ko).call(this)},this.get=()=>M(this,pr),this.update=i=>{q(this,pr,i(M(this,pr))),M(this,ko).call(this)},this.type=r,q(this,pr,e),t.set(r.id,this)}on(t){return M(this,Mn).push(t),()=>{q(this,Mn,M(this,Mn).filter(e=>e!==t))}}once(t){const e=this.on(r=>{t(r),e()});return e}off(t){q(this,Mn,M(this,Mn).filter(e=>e!==t))}offAll(){q(this,Mn,[])}},Mn=new WeakMap,pr=new WeakMap,ko=new WeakMap,Bb);class oS{constructor(t,e){this.id=Symbol(`Context-${e}`),this.name=e,this._defaultValue=t,this._typeInfo=()=>{throw Vl()}}create(t,e=this._defaultValue){return new iS(t,e,this)}}const Se=(n,t)=>new oS(n,t);var Js,Xs,Zs,wi,wo,Hr,xo,Eo,Co;class sS{constructor(t,e,r){Q(this,Js);Q(this,Xs);Q(this,Zs);Q(this,wi);Q(this,wo);Q(this,Hr);Q(this,xo);Q(this,Eo);Q(this,Co);q(this,wi,new Set),q(this,wo,new Set),q(this,Hr,new Map),q(this,xo,new Map),this.read=()=>({metadata:M(this,Js),injectedSlices:[...M(this,wi)].map(i=>({name:typeof i=="string"?i:i.name,value:M(this,Eo).call(this,i)})),consumedSlices:[...M(this,wo)].map(i=>({name:typeof i=="string"?i:i.name,value:M(this,Eo).call(this,i)})),recordedTimers:[...M(this,Hr)].map(([i,{duration:o}])=>({name:i.name,duration:o,status:M(this,Co).call(this,i)})),waitTimers:[...M(this,xo)].map(([i,{duration:o}])=>({name:i.name,duration:o,status:M(this,Co).call(this,i)}))}),this.onRecord=i=>{M(this,Hr).set(i,{start:Date.now(),duration:0})},this.onClear=i=>{M(this,Hr).delete(i)},this.onDone=i=>{const o=M(this,Hr).get(i);o&&(o.duration=Date.now()-o.start)},this.onWait=(i,o)=>{const s=Date.now();o.finally(()=>{M(this,xo).set(i,{duration:Date.now()-s})}).catch(console.error)},this.onInject=i=>{M(this,wi).add(i)},this.onRemove=i=>{M(this,wi).delete(i)},this.onUse=i=>{M(this,wo).add(i)},q(this,Eo,i=>M(this,Xs).get(i).get()),q(this,Co,i=>M(this,Zs).get(i).status),q(this,Xs,t),q(this,Zs,e),q(this,Js,r)}}Js=new WeakMap,Xs=new WeakMap,Zs=new WeakMap,wi=new WeakMap,wo=new WeakMap,Hr=new WeakMap,xo=new WeakMap,Eo=new WeakMap,Co=new WeakMap;var mr,gr,Qs,bn;const kp=class kp{constructor(t,e,r){Q(this,mr);Q(this,gr);Q(this,Qs);Q(this,bn);this.produce=i=>i&&Object.keys(i).length?new kp(M(this,mr),M(this,gr),{...i}):this,this.inject=(i,o)=>{var a;const s=i.create(M(this,mr).sliceMap);return o!=null&&s.set(o),(a=M(this,bn))==null||a.onInject(i),this},this.remove=i=>{var o;return M(this,mr).remove(i),(o=M(this,bn))==null||o.onRemove(i),this},this.record=i=>{var o;return i.create(M(this,gr).store),(o=M(this,bn))==null||o.onRecord(i),this},this.clearTimer=i=>{var o;return M(this,gr).remove(i),(o=M(this,bn))==null||o.onClear(i),this},this.isInjected=i=>M(this,mr).has(i),this.isRecorded=i=>M(this,gr).has(i),this.use=i=>{var o;return(o=M(this,bn))==null||o.onUse(i),M(this,mr).get(i)},this.get=i=>this.use(i).get(),this.set=(i,o)=>this.use(i).set(o),this.update=(i,o)=>this.use(i).update(o),this.timer=i=>M(this,gr).get(i),this.done=i=>{var o;this.timer(i).done(),(o=M(this,bn))==null||o.onDone(i)},this.wait=i=>{var s;const o=this.timer(i).start();return(s=M(this,bn))==null||s.onWait(i,o),o},this.waitTimers=async i=>{await Promise.all(this.get(i).map(o=>this.wait(o)))},q(this,mr,t),q(this,gr,e),q(this,Qs,r),r&&q(this,bn,new sS(t,e,r))}get meta(){return M(this,Qs)}get inspector(){return M(this,bn)}};mr=new WeakMap,gr=new WeakMap,Qs=new WeakMap,bn=new WeakMap;let yd=kp;class aS{constructor(){this.store=new Map,this.get=t=>{const e=this.store.get(t.id);if(!e)throw ZC(t.name);return e},this.remove=t=>{this.store.delete(t.id)},this.has=t=>this.store.has(t.id)}}var So,Ur,vo,br,_o,ea;class lS{constructor(t,e){Q(this,So);Q(this,Ur);Q(this,vo);Q(this,br);Q(this,_o);Q(this,ea);q(this,So,null),q(this,Ur,null),q(this,br,"pending"),this.start=()=>(M(this,So)??q(this,So,new Promise((r,i)=>{q(this,Ur,o=>{o instanceof CustomEvent&&o.detail.id===M(this,vo)&&(q(this,br,"resolved"),M(this,_o).call(this),o.stopImmediatePropagation(),r())}),M(this,ea).call(this,()=>{M(this,br)==="pending"&&q(this,br,"rejected"),M(this,_o).call(this),i(new Error(`Timing ${this.type.name} timeout.`))}),q(this,br,"pending"),addEventListener(this.type.name,M(this,Ur))})),M(this,So)),this.done=()=>{const r=new CustomEvent(this.type.name,{detail:{id:M(this,vo)}});dispatchEvent(r)},q(this,_o,()=>{M(this,Ur)&&removeEventListener(this.type.name,M(this,Ur))}),q(this,ea,r=>{setTimeout(()=>{r()},this.type.timeout)}),q(this,vo,Symbol(e.name)),this.type=e,t.set(e.id,this)}get status(){return M(this,br)}}So=new WeakMap,Ur=new WeakMap,vo=new WeakMap,br=new WeakMap,_o=new WeakMap,ea=new WeakMap;class cS{constructor(t,e=3e3){this.create=r=>new lS(r,this),this.id=Symbol(`Timer-${t}`),this.name=t,this.timeout=e}}const _r=(n,t=3e3)=>new cS(n,t);function kt(n){this.content=n}kt.prototype={constructor:kt,find:function(n){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===n)return t;return-1},get:function(n){var t=this.find(n);return t==-1?void 0:this.content[t+1]},update:function(n,t,e){var r=e&&e!=n?this.remove(e):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(e||n,t):(o[i+1]=t,e&&(o[i]=e)),new kt(o)},remove:function(n){var t=this.find(n);if(t==-1)return this;var e=this.content.slice();return e.splice(t,2),new kt(e)},addToStart:function(n,t){return new kt([n,t].concat(this.remove(n).content))},addToEnd:function(n,t){var e=this.remove(n).content.slice();return e.push(n,t),new kt(e)},addBefore:function(n,t,e){var r=this.remove(t),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,t,e),new kt(i)},forEach:function(n){for(var t=0;t<this.content.length;t+=2)n(this.content[t],this.content[t+1])},prepend:function(n){return n=kt.from(n),n.size?new kt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=kt.from(n),n.size?new kt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var t=this;n=kt.from(n);for(var e=0;e<n.content.length;e+=2)t=t.remove(n.content[e]);return t},toObject:function(){var n={};return this.forEach(function(t,e){n[t]=e}),n},get size(){return this.content.length>>1}};kt.from=function(n){if(n instanceof kt)return n;var t=[];if(n)for(var e in n)t.push(e,n[e]);return new kt(t)};function yy(n,t,e){for(let r=0;;r++){if(r==n.childCount||r==t.childCount)return n.childCount==t.childCount?null:e;let i=n.child(r),o=t.child(r);if(i==o){e+=i.nodeSize;continue}if(!i.sameMarkup(o))return e;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)e++;return e}if(i.content.size||o.content.size){let s=yy(i.content,o.content,e+1);if(s!=null)return s}e+=i.nodeSize}}function ky(n,t,e,r){for(let i=n.childCount,o=t.childCount;;){if(i==0||o==0)return i==o?null:{a:e,b:r};let s=n.child(--i),a=t.child(--o),l=s.nodeSize;if(s==a){e-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:e,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,e--,r--;return{a:e,b:r}}if(s.content.size||a.content.size){let c=ky(s.content,a.content,e-1,r-1);if(c)return c}e-=l,r-=l}}class B{constructor(t,e){if(this.content=t,this.size=e||0,e==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,e,r,i=0,o){for(let s=0,a=0;a<e;s++){let l=this.content[s],c=a+l.nodeSize;if(c>t&&r(l,i+a,o||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,t-u),Math.min(l.content.size,e-u),r,i+u)}a=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,r,i){let o="",s=!0;return this.nodesBetween(t,e,(a,l)=>{let c=a.isText?a.text.slice(Math.max(t,l)-l,e-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,r=t.firstChild,i=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(r)&&(i[i.length-1]=e.withText(e.text+r.text),o=1);o<t.content.length;o++)i.push(t.content[o]);return new B(i,this.size+t.size)}cut(t,e=this.size){if(t==0&&e==this.size)return this;let r=[],i=0;if(e>t)for(let o=0,s=0;s<e;o++){let a=this.content[o],l=s+a.nodeSize;l>t&&((s<t||l>e)&&(a.isText?a=a.cut(Math.max(0,t-s),Math.min(a.text.length,e-s)):a=a.cut(Math.max(0,t-s-1),Math.min(a.content.size,e-s-1))),r.push(a),i+=a.nodeSize),s=l}return new B(r,i)}cutByIndex(t,e){return t==e?B.empty:t==0&&e==this.content.length?this:new B(this.content.slice(t,e))}replaceChild(t,e){let r=this.content[t];if(r==e)return this;let i=this.content.slice(),o=this.size+e.nodeSize-r.nodeSize;return i[t]=e,new B(i,o)}addToStart(t){return new B([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new B(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,r=0;e<this.content.length;e++){let i=this.content[e];t(i,r,e),r+=i.nodeSize}}findDiffStart(t,e=0){return yy(this,t,e)}findDiffEnd(t,e=this.size,r=t.size){return ky(this,t,e,r)}findIndex(t){if(t==0)return Ua(0,t);if(t==this.size)return Ua(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let e=0,r=0;;e++){let i=this.child(e),o=r+i.nodeSize;if(o>=t)return o==t?Ua(e+1,o):Ua(e,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return B.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new B(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return B.empty;let e,r=0;for(let i=0;i<t.length;i++){let o=t[i];r+=o.nodeSize,i&&o.isText&&t[i-1].sameMarkup(o)?(e||(e=t.slice(0,i)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new B(e||t,r)}static from(t){if(!t)return B.empty;if(t instanceof B)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new B([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}B.empty=new B([],0);const pu={index:0,offset:0};function Ua(n,t){return pu.index=n,pu.offset=t,pu}function vl(n,t){if(n===t)return!0;if(!(n&&typeof n=="object")||!(t&&typeof t=="object"))return!1;let e=Array.isArray(n);if(Array.isArray(t)!=e)return!1;if(e){if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(!vl(n[r],t[r]))return!1}else{for(let r in n)if(!(r in t)||!vl(n[r],t[r]))return!1;for(let r in t)if(!(r in n))return!1}return!0}class Ee{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,r=!1;for(let i=0;i<t.length;i++){let o=t[i];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,i));else{if(o.type.excludes(this.type))return t;!r&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,i)),e.push(this),r=!0),e&&e.push(o)}}return e||(e=t.slice()),r||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&vl(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[e.type];if(!r)throw new RangeError(`There is no mark type ${e.type} in this schema`);let i=r.create(e.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(e[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Ee.none;if(t instanceof Ee)return[t];let e=t.slice();return e.sort((r,i)=>r.type.rank-i.type.rank),e}}Ee.none=[];class _l extends Error{}class G{constructor(t,e,r){this.content=t,this.openStart=e,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let r=xy(this.content,t+this.openStart,e);return r&&new G(r,this.openStart,this.openEnd)}removeBetween(t,e){return new G(wy(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return G.empty;let r=e.openStart||0,i=e.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new G(B.fromJSON(t,e.content),r,i)}static maxOpen(t,e=!0){let r=0,i=0;for(let o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)i++;return new G(t,r,i)}}G.empty=new G(B.empty,0,0);function wy(n,t,e){let{index:r,offset:i}=n.findIndex(t),o=n.maybeChild(r),{index:s,offset:a}=n.findIndex(e);if(i==t||o.isText){if(a!=e&&!n.child(s).isText)throw new RangeError("Removing non-flat range");return n.cut(0,t).append(n.cut(e))}if(r!=s)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(wy(o.content,t-i-1,e-i-1)))}function xy(n,t,e,r){let{index:i,offset:o}=n.findIndex(t),s=n.maybeChild(i);if(o==t||s.isText)return r&&!r.canReplace(i,i,e)?null:n.cut(0,t).append(e).append(n.cut(t));let a=xy(s.content,t-o-1,e,s);return a&&n.replaceChild(i,s.copy(a))}function uS(n,t,e){if(e.openStart>n.depth)throw new _l("Inserted content deeper than insertion position");if(n.depth-e.openStart!=t.depth-e.openEnd)throw new _l("Inconsistent open depths");return Ey(n,t,e,0)}function Ey(n,t,e,r){let i=n.index(r),o=n.node(r);if(i==t.index(r)&&r<n.depth-e.openStart){let s=Ey(n,t,e,r+1);return o.copy(o.content.replaceChild(i,s))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&n.depth==r&&t.depth==r){let s=n.parent,a=s.content;return Oi(s,a.cut(0,n.parentOffset).append(e.content).append(a.cut(t.parentOffset)))}else{let{start:s,end:a}=dS(e,n);return Oi(o,Sy(n,s,a,t,r))}else return Oi(o,Nl(n,t,r))}function Cy(n,t){if(!t.type.compatibleContent(n.type))throw new _l("Cannot join "+t.type.name+" onto "+n.type.name)}function kd(n,t,e){let r=n.node(e);return Cy(r,t.node(e)),r}function Ai(n,t){let e=t.length-1;e>=0&&n.isText&&n.sameMarkup(t[e])?t[e]=n.withText(t[e].text+n.text):t.push(n)}function Es(n,t,e,r){let i=(t||n).node(e),o=0,s=t?t.index(e):i.childCount;n&&(o=n.index(e),n.depth>e?o++:n.textOffset&&(Ai(n.nodeAfter,r),o++));for(let a=o;a<s;a++)Ai(i.child(a),r);t&&t.depth==e&&t.textOffset&&Ai(t.nodeBefore,r)}function Oi(n,t){return n.type.checkContent(t),n.copy(t)}function Sy(n,t,e,r,i){let o=n.depth>i&&kd(n,t,i+1),s=r.depth>i&&kd(e,r,i+1),a=[];return Es(null,n,i,a),o&&s&&t.index(i)==e.index(i)?(Cy(o,s),Ai(Oi(o,Sy(n,t,e,r,i+1)),a)):(o&&Ai(Oi(o,Nl(n,t,i+1)),a),Es(t,e,i,a),s&&Ai(Oi(s,Nl(e,r,i+1)),a)),Es(r,null,i,a),new B(a)}function Nl(n,t,e){let r=[];if(Es(null,n,e,r),n.depth>e){let i=kd(n,t,e+1);Ai(Oi(i,Nl(n,t,e+1)),r)}return Es(t,null,e,r),new B(r)}function dS(n,t){let e=t.depth-n.openStart,i=t.node(e).copy(n.content);for(let o=e-1;o>=0;o--)i=t.node(o).copy(B.from(i));return{start:i.resolveNoCache(n.openStart+e),end:i.resolveNoCache(i.content.size-n.openEnd-e)}}class Fs{constructor(t,e,r){this.pos=t,this.path=e,this.parentOffset=r,this.depth=e.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(e);return r?t.child(e).cut(r):i}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):t==0?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let r=this.path[e*3],i=e==0?0:this.path[e*3-1]+1;for(let o=0;o<t;o++)i+=r.child(o).nodeSize;return i}marks(){let t=this.parent,e=this.index();if(t.content.size==0)return Ee.none;if(this.textOffset)return t.child(e).marks;let r=t.maybeChild(e-1),i=t.maybeChild(e);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let r=e.marks,i=t.parent.maybeChild(t.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!e||e(this.node(r))))return new vy(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let r=[],i=0,o=e;for(let s=t;;){let{index:a,offset:l}=s.content.findIndex(o),c=o-l;if(r.push(s,a,i+l),!c||(s=s.child(a),s.isText))break;o=c-1,i+=l+1}return new Fs(e,r,o)}static resolveCached(t,e){let r=Pm.get(t);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==e)return s}else Pm.set(t,r=new fS);let i=r.elts[r.i]=Fs.resolve(t,e);return r.i=(r.i+1)%hS,i}}class fS{constructor(){this.elts=[],this.i=0}}const hS=12,Pm=new WeakMap;class vy{constructor(t,e,r){this.$from=t,this.$to=e,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const pS=Object.create(null);let Cr=class wd{constructor(t,e,r,i=Ee.none){this.type=t,this.attrs=e,this.marks=i,this.content=r||B.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,r,i=0){this.content.nodesBetween(t,e,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,r,i){return this.content.textBetween(t,e,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,r){return this.type==t&&vl(this.attrs,e||t.defaultAttrs||pS)&&Ee.sameSet(this.marks,r||Ee.none)}copy(t=null){return t==this.content?this:new wd(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new wd(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return t==0&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,r=!1){if(t==e)return G.empty;let i=this.resolve(t),o=this.resolve(e),s=r?0:i.sharedDepth(e),a=i.start(s),c=i.node(s).content.cut(i.pos-a,o.pos-a);return new G(c,i.depth-s,o.depth-s)}replace(t,e,r){return uS(this.resolve(t),this.resolve(e),r)}nodeAt(t){for(let e=this;;){let{index:r,offset:i}=e.content.findIndex(t);if(e=e.maybeChild(r),!e)return null;if(i==t||e.isText)return e;t-=i+1}}childAfter(t){let{index:e,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:e,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(e),index:e,offset:r};let i=this.content.child(e-1);return{node:i,index:e-1,offset:r-i.nodeSize}}resolve(t){return Fs.resolveCached(this,t)}resolveNoCache(t){return Fs.resolve(this,t)}rangeHasMark(t,e,r){let i=!1;return e>t&&this.nodesBetween(t,e,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),_y(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,r=B.empty,i=0,o=r.childCount){let s=this.contentMatchAt(t).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(t,e,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(t).matchType(r),s=o&&o.matchFragment(this.content,e);return s?s.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Ee.none;for(let e=0;e<this.marks.length;e++){let r=this.marks[e];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Ee.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let r;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=e.marks.map(t.markFromJSON)}if(e.type=="text"){if(typeof e.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(e.text,r)}let i=B.fromJSON(t,e.content),o=t.nodeType(e.type).create(e.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Cr.prototype.text=void 0;class Tl extends Cr{constructor(t,e,r,i){if(super(t,e,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):_y(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Tl(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Tl(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return t==0&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function _y(n,t){for(let e=n.length-1;e>=0;e--)t=n[e].type.name+"("+t+")";return t}class Hi{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let r=new mS(t,e);if(r.next==null)return Hi.empty;let i=Ny(r);r.next&&r.err("Unexpected trailing text");let o=ES(xS(i));return CS(o,r),o}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,r=t.childCount){let i=this;for(let o=e;i&&o<r;o++)i=i.matchType(t.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!(e.isText||e.hasRequiredAttrs()))return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let r=0;r<t.next.length;r++)if(this.next[e].type==t.next[r].type)return!0;return!1}fillBefore(t,e=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(t,r);if(l&&(!e||l.validEnd))return B.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,a.concat(u));if(f)return f}}return null}return o(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(t)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in e)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),e[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&e(r.next[i].next)}return e(this),t.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+t.indexOf(r.next[s].next);return o}).join(`
`)}}Hi.empty=new Hi(!0);class mS{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function Ny(n){let t=[];do t.push(gS(n));while(n.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function gS(n){let t=[];do t.push(bS(n));while(n.next&&n.next!=")"&&n.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function bS(n){let t=wS(n);for(;;)if(n.eat("+"))t={type:"plus",expr:t};else if(n.eat("*"))t={type:"star",expr:t};else if(n.eat("?"))t={type:"opt",expr:t};else if(n.eat("{"))t=yS(n,t);else break;return t}function Bm(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let t=Number(n.next);return n.pos++,t}function yS(n,t){let e=Bm(n),r=e;return n.eat(",")&&(n.next!="}"?r=Bm(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:e,max:r,expr:t}}function kS(n,t){let e=n.nodeTypes,r=e[t];if(r)return[r];let i=[];for(let o in e){let s=e[o];s.isInGroup(t)&&i.push(s)}return i.length==0&&n.err("No node type or group '"+t+"' found"),i}function wS(n){if(n.eat("(")){let t=Ny(n);return n.eat(")")||n.err("Missing closing paren"),t}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let t=kS(n,n.next).map(e=>(n.inline==null?n.inline=e.isInline:n.inline!=e.isInline&&n.err("Mixing inline and block content"),{type:"name",value:e}));return n.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function xS(n){let t=[[]];return i(o(n,0),e()),t;function e(){return t.push([])-1}function r(s,a,l){let c={term:l,to:a};return t[s].push(c),c}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;i(c,a=e())}else if(s.type=="star"){let l=e();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=e();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=e();i(o(s.expr,l),u),l=u}if(s.max==-1)i(o(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=e();r(l,u),i(o(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Ty(n,t){return t-n}function zm(n,t){let e=[];return r(t),e.sort(Ty);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);e.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&e.indexOf(l)==-1&&r(l)}}}function ES(n){let t=Object.create(null);return e(zm(n,0));function e(r){let i=[];r.forEach(s=>{n[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);zm(n,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=t[r.join(",")]=new Hi(r.indexOf(n.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(Ty);o.next.push({type:i[s][0],next:t[a.join(",")]||e(a)})}return o}}function CS(n,t){for(let e=0,r=[n];e<r.length;e++){let i=r[e],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function My(n){let t=Object.create(null);for(let e in n){let r=n[e];if(!r.hasDefault)return null;t[e]=r.default}return t}function Ay(n,t){let e=Object.create(null);for(let r in n){let i=t&&t[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}e[r]=i}return e}function Oy(n,t,e,r){for(let i in t)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${e} of type ${i}`);for(let i in n){let o=n[i];o.validate&&o.validate(t[i])}}function Iy(n,t){let e=Object.create(null);if(t)for(let r in t)e[r]=new vS(n,r,t[r]);return e}let Fm=class Dy{constructor(t,e,r){this.name=t,this.schema=e,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Iy(t,r.attrs),this.defaultAttrs=My(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Hi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:Ay(this.attrs,t)}create(t=null,e,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Cr(this,this.computeAttrs(t),B.from(e),Ee.setFrom(r))}createChecked(t=null,e,r){return e=B.from(e),this.checkContent(e),new Cr(this,this.computeAttrs(t),e,Ee.setFrom(r))}createAndFill(t=null,e,r){if(t=this.computeAttrs(t),e=B.from(e),e.size){let s=this.contentMatch.fillBefore(e);if(!s)return null;e=s.append(e)}let i=this.contentMatch.matchFragment(e),o=i&&i.fillBefore(B.empty,!0);return o?new Cr(this,t,e.append(o),Ee.setFrom(r)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){Oy(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let e;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?e&&e.push(t[r]):e||(e=t.slice(0,r));return e?e.length?e:Ee.none:t}static compile(t,e){let r=Object.create(null);t.forEach((o,s)=>r[o]=new Dy(o,e,s));let i=e.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function SS(n,t,e){let r=e.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${n}, got ${o}`)}}class vS{constructor(t,e,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?SS(t,e,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Yl{constructor(t,e,r,i){this.name=t,this.rank=e,this.schema=r,this.spec=i,this.attrs=Iy(t,i.attrs),this.excluded=null;let o=My(this.attrs);this.instance=o?new Ee(this,o):null}create(t=null){return!t&&this.instance?this.instance:new Ee(this,Ay(this.attrs,t))}static compile(t,e){let r=Object.create(null),i=0;return t.forEach((o,s)=>r[o]=new Yl(o,i++,e,s)),r}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){Oy(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class _S{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let i in t)e[i]=t[i];e.nodes=kt.from(t.nodes),e.marks=kt.from(t.marks||{}),this.nodes=Fm.compile(this.spec.nodes,this),this.marks=Yl.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=Hi.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?$m(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:$m(this,s.split(" "))}this.nodeFromJSON=i=>Cr.fromJSON(this,i),this.markFromJSON=i=>Ee.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof Fm){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(e,r,i)}text(t,e){let r=this.nodes.text;return new Tl(r,r.defaultAttrs,t,Ee.setFrom(e))}mark(t,e){return typeof t=="string"&&(t=this.marks[t]),t.create(e)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function $m(n,t){let e=[];for(let r=0;r<t.length;r++){let i=t[r],o=n.marks[i],s=o;if(o)e.push(o);else for(let a in n.marks){let l=n.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&e.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return e}function NS(n){return n.tag!=null}function TS(n){return n.style!=null}class Zr{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let r=this.matchedStyles=[];e.forEach(i=>{if(NS(i))this.tags.push(i);else if(TS(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=t.nodes[i.node];return o.contentMatch.matchType(o)})}parse(t,e={}){let r=new Um(this,e,!1);return r.addAll(t,Ee.none,e.from,e.to),r.finish()}parseSlice(t,e={}){let r=new Um(this,e,!0);return r.addAll(t,Ee.none,e.from,e.to),G.maxOpen(r.finish())}matchTag(t,e,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(OS(t,o.tag)&&(o.namespace===void 0||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(t);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(t,e,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(t)!=0||s.context&&!r.matchesContext(s.context)||a.length>t.length&&(a.charCodeAt(t.length)!=61||a.slice(t.length+1)!=e))){if(s.getAttrs){let l=s.getAttrs(e);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(t){let e=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<e.length;s++){let a=e[s];if((a.priority==null?50:a.priority)<o)break}e.splice(s,0,i)}for(let i in t.marks){let o=t.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=qm(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in t.nodes){let o=t.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=qm(s)),s.node||s.ignore||s.mark||(s.node=i)})}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Zr(t,Zr.schemaRules(t)))}}const Ry={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},MS={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ly={ol:!0,ul:!0},$s=1,xd=2,Cs=4;function Hm(n,t,e){return t!=null?(t?$s:0)|(t==="full"?xd:0):n&&n.whitespace=="pre"?$s|xd:e&~Cs}class qa{constructor(t,e,r,i,o,s){this.type=t,this.attrs=e,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=Ee.none,this.match=o||(s&Cs?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(B.from(t));if(e)this.match=this.type.contentMatch.matchFragment(e);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&$s)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let e=B.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(B.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Ry.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class Um{constructor(t,e,r){this.parser=t,this.options=e,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=e.topNode,o,s=Hm(null,e.preserveWhitespace,0)|(r?Cs:0);i?o=new qa(i.type,i.attrs,Ee.none,!0,e.topMatch||i.type.contentMatch,s):r?o=new qa(null,null,Ee.none,!0,null,s):o=new qa(t.schema.topNodeType,null,Ee.none,!0,null,s),this.nodes=[o],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,e){t.nodeType==3?this.addTextNode(t,e):t.nodeType==1&&this.addElement(t,e)}addTextNode(t,e){let r=t.nodeValue,i=this.top,o=i.options&xd?"full":this.localPreserveWS||(i.options&$s)>0;if(o==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],a=t.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),e,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,e,r){let i=this.localPreserveWS,o=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let s=t.nodeName.toLowerCase(),a;Ly.hasOwnProperty(s)&&this.parser.normalizeLists&&AS(t);let l=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(a=this.parser.matchTag(t,this,r));e:if(l?l.ignore:MS.hasOwnProperty(s))this.findInside(t),this.ignoreFallback(t,e);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(t=l.skip);let c,u=this.needsBlock;if(Ry.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,e);break e}let d=l&&l.skip?e:this.readStyles(t,e);d&&this.addAll(t,d),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(t,e);c&&this.addElementByRule(t,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(t,e){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),e)}ignoreFallback(t,e){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),e,!0)}readStyles(t,e){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(o,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?e=e.filter(c=>!l.clearMark(c)):e=e.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return e}addElementByRule(t,e,r,i){let o,s;if(e.node)if(s=this.parser.schema.nodes[e.node],s.isLeaf)this.insertNode(s.create(e.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let l=this.enter(s,e.attrs||null,r,e.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[e.mark];r=r.concat(l.create(e.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=t;typeof e.contentElement=="string"?l=t.querySelector(e.contentElement):typeof e.contentElement=="function"?l=e.contentElement(t):e.contentElement&&(l=e.contentElement),this.findAround(t,l,!0),this.addAll(l,r),this.findAround(t,l,!1)}o&&this.sync(a)&&this.open--}addAll(t,e,r,i){let o=r||0;for(let s=r?t.childNodes[r]:t.firstChild,a=i==null?null:t.childNodes[i];s!=a;s=s.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(s,e);this.findAtPoint(t,o)}findPlace(t,e,r){let i,o;for(let s=this.open,a=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(t);if(c&&(!i||i.length>c.length+a)&&(i=c,o=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(o);for(let s=0;s<i.length;s++)e=this.enterInner(i[s],null,e,!1);return e}insertNode(t,e,r){if(t.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(e=this.enterInner(o,null,e))}let i=this.findPlace(t,e,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(t.type));let s=Ee.none;for(let a of i.concat(t.marks))(o.type?o.type.allowsMarkType(a.type):Wm(a.type,t.type))&&(s=a.addToSet(s));return o.content.push(t.mark(s)),!0}return!1}enter(t,e,r,i){let o=this.findPlace(t.create(e),r,!1);return o&&(o=this.enterInner(t,e,r,!0,i)),o}enterInner(t,e,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(t);let a=Hm(t,o,s.options);s.options&Cs&&s.content.length==0&&(a|=Cs);let l=Ee.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Wm(c.type,t))?(l=c.addToSet(l),!1):!0),this.nodes.push(new qa(t,e,l,i,null,a)),this.open++,r}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let e=this.open;e>=0;e--){if(this.nodes[e]==t)return this.open=e,!0;this.localPreserveWS&&(this.nodes[e].options|=$s)}return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let r=this.nodes[e].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==e&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&t.nodeType==1&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,r){if(t!=e&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&e.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let c=e[a];if(c==""){if(a==e.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let r=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let e in this.parser.schema.nodes){let r=this.parser.schema.nodes[e];if(r.isTextblock&&r.defaultAttrs)return r}}}function AS(n){for(let t=n.firstChild,e=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&Ly.hasOwnProperty(r)&&e?(e.appendChild(t),t=e):r=="li"?e=t:r&&(e=null)}}function OS(n,t){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,t)}function qm(n){let t={};for(let e in n)t[e]=n[e];return t}function Wm(n,t){let e=t.schema.nodes;for(let r in e){let i=e[r];if(!i.allowsMarkType(n))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==t||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}class Nr{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},r){r||(r=mu(e).createDocumentFragment());let i=r,o=[];return t.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,e);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,e))}),r}serializeNodeInner(t,e){let{dom:r,contentDOM:i}=Za(mu(e),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,i)}return r}serializeNode(t,e={}){let r=this.serializeNodeInner(t,e);for(let i=t.marks.length-1;i>=0;i--){let o=this.serializeMark(t.marks[i],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(t,e,r={}){let i=this.marks[t.type.name];return i&&Za(mu(r),i(t,e),null,t.attrs)}static renderSpec(t,e,r=null,i){return Za(t,e,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Nr(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=Km(t.nodes);return e.text||(e.text=r=>r.text),e}static marksFromSchema(t){return Km(t.marks)}}function Km(n){let t={};for(let e in n){let r=n[e].spec.toDOM;r&&(t[e]=r)}return t}function mu(n){return n.document||window.document}const Vm=new WeakMap;function IS(n){let t=Vm.get(n);return t===void 0&&Vm.set(n,t=DS(n)),t}function DS(n){let t=null;function e(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)e(r[i]);else for(let i in r)e(r[i])}return e(n),t}function Za(n,t,e,r){if(typeof t=="string")return{dom:n.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=IS(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(e=i.slice(0,s),i=i.slice(s+1));let a,l=e?n.createElementNS(e,i):n.createElement(i),c=t[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):d=="style"&&l.style?l.style.cssText=c[d]:l.setAttribute(d,c[d])}}for(let d=u;d<t.length;d++){let f=t[d];if(f===0){if(d<t.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=Za(n,f,e,r);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const RS={};function Sf(n,t){const e=RS,r=typeof e.includeImageAlt=="boolean"?e.includeImageAlt:!0,i=typeof e.includeHtml=="boolean"?e.includeHtml:!0;return Py(n,r,i)}function Py(n,t,e){if(LS(n)){if("value"in n)return n.type==="html"&&!e?"":n.value;if(t&&"alt"in n&&n.alt)return n.alt;if("children"in n)return Ym(n.children,t,e)}return Array.isArray(n)?Ym(n,t,e):""}function Ym(n,t,e){const r=[];let i=-1;for(;++i<n.length;)r[i]=Py(n[i],t,e);return r.join("")}function LS(n){return!!(n&&typeof n=="object")}const Gm=document.createElement("i");function vf(n){const t="&"+n+";";Gm.innerHTML=t;const e=Gm.textContent;return e.charCodeAt(e.length-1)===59&&n!=="semi"||e===t?!1:e}function un(n,t,e,r){const i=n.length;let o=0,s;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,e=e>0?e:0,r.length<1e4)s=Array.from(r),s.unshift(t,e),n.splice(...s);else for(e&&n.splice(t,e);o<r.length;)s=r.slice(o,o+1e4),s.unshift(t,0),n.splice(...s),o+=1e4,t+=1e4}function wn(n,t){return n.length>0?(un(n,n.length,0,t),n):t}const jm={}.hasOwnProperty;function By(n){const t={};let e=-1;for(;++e<n.length;)PS(t,n[e]);return t}function PS(n,t){let e;for(e in t){const i=(jm.call(n,e)?n[e]:void 0)||(n[e]={}),o=t[e];let s;if(o)for(s in o){jm.call(i,s)||(i[s]=[]);const a=o[s];BS(i[s],Array.isArray(a)?a:a?[a]:[])}}}function BS(n,t){let e=-1;const r=[];for(;++e<t.length;)(t[e].add==="after"?n:r).push(t[e]);un(n,0,0,r)}function zy(n,t){const e=Number.parseInt(n,t);return e<9||e===11||e>13&&e<32||e>126&&e<160||e>55295&&e<57344||e>64975&&e<65008||(e&65535)===65535||(e&65535)===65534||e>1114111?"�":String.fromCodePoint(e)}function Dn(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Rt=ni(/[A-Za-z]/),Gt=ni(/[\dA-Za-z]/),zS=ni(/[#-'*+\--9=?A-Z^-~]/);function Ml(n){return n!==null&&(n<32||n===127)}const Ed=ni(/\d/),FS=ni(/[\dA-Fa-f]/),$S=ni(/[!-/:-@[-`{-~]/);function ie(n){return n!==null&&n<-2}function He(n){return n!==null&&(n<0||n===32)}function be(n){return n===-2||n===-1||n===32}const Gl=ni(new RegExp("\\p{P}|\\p{S}","u")),Ui=ni(/\s/);function ni(n){return t;function t(e){return e!==null&&e>-1&&n.test(String.fromCharCode(e))}}function Ce(n,t,e,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(l){return be(l)?(n.enter(e),a(l)):t(l)}function a(l){return be(l)&&o++<i?(n.consume(l),a):(n.exit(e),t(l))}}const HS={tokenize:US};function US(n){const t=n.attempt(this.parser.constructs.contentInitial,r,i);let e;return t;function r(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),Ce(n,t,"linePrefix")}function i(a){return n.enter("paragraph"),o(a)}function o(a){const l=n.enter("chunkText",{contentType:"text",previous:e});return e&&(e.next=l),e=l,s(a)}function s(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return ie(a)?(n.consume(a),n.exit("chunkText"),o):(n.consume(a),s)}}const qS={tokenize:WS},Jm={tokenize:KS};function WS(n){const t=this,e=[];let r=0,i,o,s;return a;function a(E){if(r<e.length){const R=e[r];return t.containerState=R[1],n.attempt(R[0].continuation,l,c)(E)}return c(E)}function l(E){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const R=t.events.length;let A=R,w;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){w=t.events[A][1].end;break}k(r);let T=R;for(;T<t.events.length;)t.events[T][1].end={...w},T++;return un(t.events,A+1,0,t.events.slice(R)),t.events.length=T,c(E)}return a(E)}function c(E){if(r===e.length){if(!i)return f(E);if(i.currentConstruct&&i.currentConstruct.concrete)return p(E);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},n.check(Jm,u,d)(E)}function u(E){return i&&v(),k(r),f(E)}function d(E){return t.parser.lazy[t.now().line]=r!==e.length,s=t.now().offset,p(E)}function f(E){return t.containerState={},n.attempt(Jm,h,p)(E)}function h(E){return r++,e.push([t.currentConstruct,t.containerState]),f(E)}function p(E){if(E===null){i&&v(),k(0),n.consume(E);return}return i=i||t.parser.flow(t.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),g(E)}function g(E){if(E===null){y(n.exit("chunkFlow"),!0),k(0),n.consume(E);return}return ie(E)?(n.consume(E),y(n.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(n.consume(E),g)}function y(E,R){const A=t.sliceStream(E);if(R&&A.push(null),E.previous=o,o&&(o.next=E),o=E,i.defineSkip(E.start),i.write(A),t.parser.lazy[E.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<s&&(!i.events[w][1].end||i.events[w][1].end.offset>s))return;const T=t.events.length;let I=T,F,N;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(F){N=t.events[I][1].end;break}F=!0}for(k(r),w=T;w<t.events.length;)t.events[w][1].end={...N},w++;un(t.events,I+1,0,t.events.slice(T)),t.events.length=w}}function k(E){let R=e.length;for(;R-- >E;){const A=e[R];t.containerState=A[1],A[0].exit.call(t,n)}e.length=E}function v(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function KS(n,t,e){return Ce(n,n.attempt(this.parser.constructs.document,t,e),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Lo(n){if(n===null||He(n)||Ui(n))return 1;if(Gl(n))return 2}function jl(n,t,e){const r=[];let i=-1;for(;++i<n.length;){const o=n[i].resolveAll;o&&!r.includes(o)&&(t=o(t,e),r.push(o))}return t}const Cd={name:"attention",resolveAll:VS,tokenize:YS};function VS(n,t){let e=-1,r,i,o,s,a,l,c,u;for(;++e<n.length;)if(n[e][0]==="enter"&&n[e][1].type==="attentionSequence"&&n[e][1]._close){for(r=e;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&t.sliceSerialize(n[r][1]).charCodeAt(0)===t.sliceSerialize(n[e][1]).charCodeAt(0)){if((n[r][1]._close||n[e][1]._open)&&(n[e][1].end.offset-n[e][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[e][1].end.offset-n[e][1].start.offset)%3))continue;l=n[r][1].end.offset-n[r][1].start.offset>1&&n[e][1].end.offset-n[e][1].start.offset>1?2:1;const d={...n[r][1].end},f={...n[e][1].start};Xm(d,-l),Xm(f,l),s={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...n[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...n[e][1].start},end:f},o={type:l>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[e][1].start}},i={type:l>1?"strong":"emphasis",start:{...s.start},end:{...a.end}},n[r][1].end={...s.start},n[e][1].start={...a.end},c=[],n[r][1].end.offset-n[r][1].start.offset&&(c=wn(c,[["enter",n[r][1],t],["exit",n[r][1],t]])),c=wn(c,[["enter",i,t],["enter",s,t],["exit",s,t],["enter",o,t]]),c=wn(c,jl(t.parser.constructs.insideSpan.null,n.slice(r+1,e),t)),c=wn(c,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",i,t]]),n[e][1].end.offset-n[e][1].start.offset?(u=2,c=wn(c,[["enter",n[e][1],t],["exit",n[e][1],t]])):u=0,un(n,r-1,e-r+3,c),e=r+c.length-u-2;break}}for(e=-1;++e<n.length;)n[e][1].type==="attentionSequence"&&(n[e][1].type="data");return n}function YS(n,t){const e=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Lo(r);let o;return s;function s(l){return o=l,n.enter("attentionSequence"),a(l)}function a(l){if(l===o)return n.consume(l),a;const c=n.exit("attentionSequence"),u=Lo(l),d=!u||u===2&&i||e.includes(l),f=!i||i===2&&u||e.includes(r);return c._open=!!(o===42?d:d&&(i||!f)),c._close=!!(o===42?f:f&&(u||!d)),t(l)}}function Xm(n,t){n.column+=t,n.offset+=t,n._bufferIndex+=t}const GS={name:"autolink",tokenize:jS};function jS(n,t,e){let r=0;return i;function i(h){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(h),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),o}function o(h){return Rt(h)?(n.consume(h),s):h===64?e(h):c(h)}function s(h){return h===43||h===45||h===46||Gt(h)?(r=1,a(h)):c(h)}function a(h){return h===58?(n.consume(h),r=0,l):(h===43||h===45||h===46||Gt(h))&&r++<32?(n.consume(h),a):(r=0,c(h))}function l(h){return h===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(h),n.exit("autolinkMarker"),n.exit("autolink"),t):h===null||h===32||h===60||Ml(h)?e(h):(n.consume(h),l)}function c(h){return h===64?(n.consume(h),u):zS(h)?(n.consume(h),c):e(h)}function u(h){return Gt(h)?d(h):e(h)}function d(h){return h===46?(n.consume(h),r=0,u):h===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(h),n.exit("autolinkMarker"),n.exit("autolink"),t):f(h)}function f(h){if((h===45||Gt(h))&&r++<63){const p=h===45?f:d;return n.consume(h),p}return e(h)}}const ua={partial:!0,tokenize:JS};function JS(n,t,e){return r;function r(o){return be(o)?Ce(n,i,"linePrefix")(o):i(o)}function i(o){return o===null||ie(o)?t(o):e(o)}}const Fy={continuation:{tokenize:ZS},exit:QS,name:"blockQuote",tokenize:XS};function XS(n,t,e){const r=this;return i;function i(s){if(s===62){const a=r.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(s),n.exit("blockQuoteMarker"),o}return e(s)}function o(s){return be(s)?(n.enter("blockQuotePrefixWhitespace"),n.consume(s),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),t):(n.exit("blockQuotePrefix"),t(s))}}function ZS(n,t,e){const r=this;return i;function i(s){return be(s)?Ce(n,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return n.attempt(Fy,t,e)(s)}}function QS(n){n.exit("blockQuote")}const $y={name:"characterEscape",tokenize:e1};function e1(n,t,e){return r;function r(o){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(o),n.exit("escapeMarker"),i}function i(o){return $S(o)?(n.enter("characterEscapeValue"),n.consume(o),n.exit("characterEscapeValue"),n.exit("characterEscape"),t):e(o)}}const Hy={name:"characterReference",tokenize:t1};function t1(n,t,e){const r=this;let i=0,o,s;return a;function a(d){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(d),n.exit("characterReferenceMarker"),l}function l(d){return d===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(d),n.exit("characterReferenceMarkerNumeric"),c):(n.enter("characterReferenceValue"),o=31,s=Gt,u(d))}function c(d){return d===88||d===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(d),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),o=6,s=FS,u):(n.enter("characterReferenceValue"),o=7,s=Ed,u(d))}function u(d){if(d===59&&i){const f=n.exit("characterReferenceValue");return s===Gt&&!vf(r.sliceSerialize(f))?e(d):(n.enter("characterReferenceMarker"),n.consume(d),n.exit("characterReferenceMarker"),n.exit("characterReference"),t)}return s(d)&&i++<o?(n.consume(d),u):e(d)}}const Zm={partial:!0,tokenize:r1},Qm={concrete:!0,name:"codeFenced",tokenize:n1};function n1(n,t,e){const r=this,i={partial:!0,tokenize:A};let o=0,s=0,a;return l;function l(w){return c(w)}function c(w){const T=r.events[r.events.length-1];return o=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=w,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),u(w)}function u(w){return w===a?(s++,n.consume(w),u):s<3?e(w):(n.exit("codeFencedFenceSequence"),be(w)?Ce(n,d,"whitespace")(w):d(w))}function d(w){return w===null||ie(w)?(n.exit("codeFencedFence"),r.interrupt?t(w):n.check(Zm,g,R)(w)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),f(w))}function f(w){return w===null||ie(w)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),d(w)):be(w)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Ce(n,h,"whitespace")(w)):w===96&&w===a?e(w):(n.consume(w),f)}function h(w){return w===null||ie(w)?d(w):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===null||ie(w)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),d(w)):w===96&&w===a?e(w):(n.consume(w),p)}function g(w){return n.attempt(i,R,y)(w)}function y(w){return n.enter("lineEnding"),n.consume(w),n.exit("lineEnding"),k}function k(w){return o>0&&be(w)?Ce(n,v,"linePrefix",o+1)(w):v(w)}function v(w){return w===null||ie(w)?n.check(Zm,g,R)(w):(n.enter("codeFlowValue"),E(w))}function E(w){return w===null||ie(w)?(n.exit("codeFlowValue"),v(w)):(n.consume(w),E)}function R(w){return n.exit("codeFenced"),t(w)}function A(w,T,I){let F=0;return N;function N(j){return w.enter("lineEnding"),w.consume(j),w.exit("lineEnding"),$}function $(j){return w.enter("codeFencedFence"),be(j)?Ce(w,K,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):K(j)}function K(j){return j===a?(w.enter("codeFencedFenceSequence"),Z(j)):I(j)}function Z(j){return j===a?(F++,w.consume(j),Z):F>=s?(w.exit("codeFencedFenceSequence"),be(j)?Ce(w,te,"whitespace")(j):te(j)):I(j)}function te(j){return j===null||ie(j)?(w.exit("codeFencedFence"),T(j)):I(j)}}}function r1(n,t,e){const r=this;return i;function i(s){return s===null?e(s):(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o)}function o(s){return r.parser.lazy[r.now().line]?e(s):t(s)}}const gu={name:"codeIndented",tokenize:o1},i1={partial:!0,tokenize:s1};function o1(n,t,e){const r=this;return i;function i(c){return n.enter("codeIndented"),Ce(n,o,"linePrefix",5)(c)}function o(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?s(c):e(c)}function s(c){return c===null?l(c):ie(c)?n.attempt(i1,s,l)(c):(n.enter("codeFlowValue"),a(c))}function a(c){return c===null||ie(c)?(n.exit("codeFlowValue"),s(c)):(n.consume(c),a)}function l(c){return n.exit("codeIndented"),t(c)}}function s1(n,t,e){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?e(s):ie(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),i):Ce(n,o,"linePrefix",5)(s)}function o(s){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):ie(s)?i(s):e(s)}}const a1={name:"codeText",previous:c1,resolve:l1,tokenize:u1};function l1(n){let t=n.length-4,e=3,r,i;if((n[e][1].type==="lineEnding"||n[e][1].type==="space")&&(n[t][1].type==="lineEnding"||n[t][1].type==="space")){for(r=e;++r<t;)if(n[r][1].type==="codeTextData"){n[e][1].type="codeTextPadding",n[t][1].type="codeTextPadding",e+=2,t-=2;break}}for(r=e-1,t++;++r<=t;)i===void 0?r!==t&&n[r][1].type!=="lineEnding"&&(i=r):(r===t||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return n}function c1(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function u1(n,t,e){let r=0,i,o;return s;function s(d){return n.enter("codeText"),n.enter("codeTextSequence"),a(d)}function a(d){return d===96?(n.consume(d),r++,a):(n.exit("codeTextSequence"),l(d))}function l(d){return d===null?e(d):d===32?(n.enter("space"),n.consume(d),n.exit("space"),l):d===96?(o=n.enter("codeTextSequence"),i=0,u(d)):ie(d)?(n.enter("lineEnding"),n.consume(d),n.exit("lineEnding"),l):(n.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||ie(d)?(n.exit("codeTextData"),l(d)):(n.consume(d),c)}function u(d){return d===96?(n.consume(d),i++,u):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),t(d)):(o.type="codeTextData",c(d))}}class d1{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,e){const r=e??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,e,r){const i=e||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&ts(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ts(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ts(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const e=this.left.splice(t,Number.POSITIVE_INFINITY);ts(this.right,e.reverse())}else{const e=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ts(this.left,e.reverse())}}}function ts(n,t){let e=0;if(t.length<1e4)n.push(...t);else for(;e<t.length;)n.push(...t.slice(e,e+1e4)),e+=1e4}function Uy(n){const t={};let e=-1,r,i,o,s,a,l,c;const u=new d1(n);for(;++e<u.length;){for(;e in t;)e=t[e];if(r=u.get(e),e&&r[1].type==="chunkFlow"&&u.get(e-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,o=0,o<l.length&&l[o][1].type==="lineEndingBlank"&&(o+=2),o<l.length&&l[o][1].type==="content"))for(;++o<l.length&&l[o][1].type!=="content";)l[o][1].type==="chunkText"&&(l[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,f1(u,e)),e=t[e],c=!0);else if(r[1]._container){for(o=e,i=void 0;o--;)if(s=u.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=o);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,e),a.unshift(r),u.splice(i,e-i+1,a))}}return un(n,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function f1(n,t){const e=n.get(t)[1],r=n.get(t)[2];let i=t-1;const o=[];let s=e._tokenizer;s||(s=r.parser[e.contentType](e.start),e._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,l=[],c={};let u,d,f=-1,h=e,p=0,g=0;const y=[g];for(;h;){for(;n.get(++i)[1]!==h;);o.push(i),h._tokenizer||(u=r.sliceStream(h),h.next||u.push(null),d&&s.defineSkip(h.start),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=e;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(g=f+1,y.push(g),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(s.events=[],h?(h._tokenizer=void 0,h.previous=void 0):y.pop(),f=y.length;f--;){const k=a.slice(y[f],y[f+1]),v=o.pop();l.push([v,v+k.length-1]),n.splice(v,2,k)}for(l.reverse(),f=-1;++f<l.length;)c[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return c}const h1={resolve:m1,tokenize:g1},p1={partial:!0,tokenize:b1};function m1(n){return Uy(n),n}function g1(n,t){let e;return r;function r(a){return n.enter("content"),e=n.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?o(a):ie(a)?n.check(p1,s,o)(a):(n.consume(a),i)}function o(a){return n.exit("chunkContent"),n.exit("content"),t(a)}function s(a){return n.consume(a),n.exit("chunkContent"),e.next=n.enter("chunkContent",{contentType:"content",previous:e}),e=e.next,i}}function b1(n,t,e){const r=this;return i;function i(s){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),Ce(n,o,"linePrefix")}function o(s){if(s===null||ie(s))return e(s);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):n.interrupt(r.parser.constructs.flow,e,t)(s)}}function qy(n,t,e,r,i,o,s,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return d;function d(k){return k===60?(n.enter(r),n.enter(i),n.enter(o),n.consume(k),n.exit(o),f):k===null||k===32||k===41||Ml(k)?e(k):(n.enter(r),n.enter(s),n.enter(a),n.enter("chunkString",{contentType:"string"}),g(k))}function f(k){return k===62?(n.enter(o),n.consume(k),n.exit(o),n.exit(i),n.exit(r),t):(n.enter(a),n.enter("chunkString",{contentType:"string"}),h(k))}function h(k){return k===62?(n.exit("chunkString"),n.exit(a),f(k)):k===null||k===60||ie(k)?e(k):(n.consume(k),k===92?p:h)}function p(k){return k===60||k===62||k===92?(n.consume(k),h):h(k)}function g(k){return!u&&(k===null||k===41||He(k))?(n.exit("chunkString"),n.exit(a),n.exit(s),n.exit(r),t(k)):u<c&&k===40?(n.consume(k),u++,g):k===41?(n.consume(k),u--,g):k===null||k===32||k===40||Ml(k)?e(k):(n.consume(k),k===92?y:g)}function y(k){return k===40||k===41||k===92?(n.consume(k),g):g(k)}}function Wy(n,t,e,r,i,o){const s=this;let a=0,l;return c;function c(h){return n.enter(r),n.enter(i),n.consume(h),n.exit(i),n.enter(o),u}function u(h){return a>999||h===null||h===91||h===93&&!l||h===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?e(h):h===93?(n.exit(o),n.enter(i),n.consume(h),n.exit(i),n.exit(r),t):ie(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),u):(n.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||ie(h)||a++>999?(n.exit("chunkString"),u(h)):(n.consume(h),l||(l=!be(h)),h===92?f:d)}function f(h){return h===91||h===92||h===93?(n.consume(h),a++,d):d(h)}}function Ky(n,t,e,r,i,o){let s;return a;function a(f){return f===34||f===39||f===40?(n.enter(r),n.enter(i),n.consume(f),n.exit(i),s=f===40?41:f,l):e(f)}function l(f){return f===s?(n.enter(i),n.consume(f),n.exit(i),n.exit(r),t):(n.enter(o),c(f))}function c(f){return f===s?(n.exit(o),l(s)):f===null?e(f):ie(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),Ce(n,c,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===s||f===null||ie(f)?(n.exit("chunkString"),c(f)):(n.consume(f),f===92?d:u)}function d(f){return f===s||f===92?(n.consume(f),u):u(f)}}function Ss(n,t){let e;return r;function r(i){return ie(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),e=!0,r):be(i)?Ce(n,r,e?"linePrefix":"lineSuffix")(i):t(i)}}const y1={name:"definition",tokenize:w1},k1={partial:!0,tokenize:x1};function w1(n,t,e){const r=this;let i;return o;function o(h){return n.enter("definition"),s(h)}function s(h){return Wy.call(r,n,a,e,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=Dn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(n.enter("definitionMarker"),n.consume(h),n.exit("definitionMarker"),l):e(h)}function l(h){return He(h)?Ss(n,c)(h):c(h)}function c(h){return qy(n,u,e,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function u(h){return n.attempt(k1,d,d)(h)}function d(h){return be(h)?Ce(n,f,"whitespace")(h):f(h)}function f(h){return h===null||ie(h)?(n.exit("definition"),r.parser.defined.push(i),t(h)):e(h)}}function x1(n,t,e){return r;function r(a){return He(a)?Ss(n,i)(a):e(a)}function i(a){return Ky(n,o,e,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return be(a)?Ce(n,s,"whitespace")(a):s(a)}function s(a){return a===null||ie(a)?t(a):e(a)}}const E1={name:"hardBreakEscape",tokenize:C1};function C1(n,t,e){return r;function r(o){return n.enter("hardBreakEscape"),n.consume(o),i}function i(o){return ie(o)?(n.exit("hardBreakEscape"),t(o)):e(o)}}const S1={name:"headingAtx",resolve:v1,tokenize:_1};function v1(n,t){let e=n.length-2,r=3,i,o;return n[r][1].type==="whitespace"&&(r+=2),e-2>r&&n[e][1].type==="whitespace"&&(e-=2),n[e][1].type==="atxHeadingSequence"&&(r===e-1||e-4>r&&n[e-2][1].type==="whitespace")&&(e-=r+1===e?2:4),e>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[e][1].end},o={type:"chunkText",start:n[r][1].start,end:n[e][1].end,contentType:"text"},un(n,r,e-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),n}function _1(n,t,e){let r=0;return i;function i(u){return n.enter("atxHeading"),o(u)}function o(u){return n.enter("atxHeadingSequence"),s(u)}function s(u){return u===35&&r++<6?(n.consume(u),s):u===null||He(u)?(n.exit("atxHeadingSequence"),a(u)):e(u)}function a(u){return u===35?(n.enter("atxHeadingSequence"),l(u)):u===null||ie(u)?(n.exit("atxHeading"),t(u)):be(u)?Ce(n,a,"whitespace")(u):(n.enter("atxHeadingText"),c(u))}function l(u){return u===35?(n.consume(u),l):(n.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||He(u)?(n.exit("atxHeadingText"),a(u)):(n.consume(u),c)}}const N1=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],eg=["pre","script","style","textarea"],T1={concrete:!0,name:"htmlFlow",resolveTo:O1,tokenize:I1},M1={partial:!0,tokenize:R1},A1={partial:!0,tokenize:D1};function O1(n){let t=n.length;for(;t--&&!(n[t][0]==="enter"&&n[t][1].type==="htmlFlow"););return t>1&&n[t-2][1].type==="linePrefix"&&(n[t][1].start=n[t-2][1].start,n[t+1][1].start=n[t-2][1].start,n.splice(t-2,2)),n}function I1(n,t,e){const r=this;let i,o,s,a,l;return c;function c(S){return u(S)}function u(S){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(S),d}function d(S){return S===33?(n.consume(S),f):S===47?(n.consume(S),o=!0,g):S===63?(n.consume(S),i=3,r.interrupt?t:C):Rt(S)?(n.consume(S),s=String.fromCharCode(S),y):e(S)}function f(S){return S===45?(n.consume(S),i=2,h):S===91?(n.consume(S),i=5,a=0,p):Rt(S)?(n.consume(S),i=4,r.interrupt?t:C):e(S)}function h(S){return S===45?(n.consume(S),r.interrupt?t:C):e(S)}function p(S){const Be="CDATA[";return S===Be.charCodeAt(a++)?(n.consume(S),a===Be.length?r.interrupt?t:K:p):e(S)}function g(S){return Rt(S)?(n.consume(S),s=String.fromCharCode(S),y):e(S)}function y(S){if(S===null||S===47||S===62||He(S)){const Be=S===47,ze=s.toLowerCase();return!Be&&!o&&eg.includes(ze)?(i=1,r.interrupt?t(S):K(S)):N1.includes(s.toLowerCase())?(i=6,Be?(n.consume(S),k):r.interrupt?t(S):K(S)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?e(S):o?v(S):E(S))}return S===45||Gt(S)?(n.consume(S),s+=String.fromCharCode(S),y):e(S)}function k(S){return S===62?(n.consume(S),r.interrupt?t:K):e(S)}function v(S){return be(S)?(n.consume(S),v):N(S)}function E(S){return S===47?(n.consume(S),N):S===58||S===95||Rt(S)?(n.consume(S),R):be(S)?(n.consume(S),E):N(S)}function R(S){return S===45||S===46||S===58||S===95||Gt(S)?(n.consume(S),R):A(S)}function A(S){return S===61?(n.consume(S),w):be(S)?(n.consume(S),A):E(S)}function w(S){return S===null||S===60||S===61||S===62||S===96?e(S):S===34||S===39?(n.consume(S),l=S,T):be(S)?(n.consume(S),w):I(S)}function T(S){return S===l?(n.consume(S),l=null,F):S===null||ie(S)?e(S):(n.consume(S),T)}function I(S){return S===null||S===34||S===39||S===47||S===60||S===61||S===62||S===96||He(S)?A(S):(n.consume(S),I)}function F(S){return S===47||S===62||be(S)?E(S):e(S)}function N(S){return S===62?(n.consume(S),$):e(S)}function $(S){return S===null||ie(S)?K(S):be(S)?(n.consume(S),$):e(S)}function K(S){return S===45&&i===2?(n.consume(S),oe):S===60&&i===1?(n.consume(S),de):S===62&&i===4?(n.consume(S),Le):S===63&&i===3?(n.consume(S),C):S===93&&i===5?(n.consume(S),Ge):ie(S)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(M1,Xe,Z)(S)):S===null||ie(S)?(n.exit("htmlFlowData"),Z(S)):(n.consume(S),K)}function Z(S){return n.check(A1,te,Xe)(S)}function te(S){return n.enter("lineEnding"),n.consume(S),n.exit("lineEnding"),j}function j(S){return S===null||ie(S)?Z(S):(n.enter("htmlFlowData"),K(S))}function oe(S){return S===45?(n.consume(S),C):K(S)}function de(S){return S===47?(n.consume(S),s="",ye):K(S)}function ye(S){if(S===62){const Be=s.toLowerCase();return eg.includes(Be)?(n.consume(S),Le):K(S)}return Rt(S)&&s.length<8?(n.consume(S),s+=String.fromCharCode(S),ye):K(S)}function Ge(S){return S===93?(n.consume(S),C):K(S)}function C(S){return S===62?(n.consume(S),Le):S===45&&i===2?(n.consume(S),C):K(S)}function Le(S){return S===null||ie(S)?(n.exit("htmlFlowData"),Xe(S)):(n.consume(S),Le)}function Xe(S){return n.exit("htmlFlow"),t(S)}}function D1(n,t,e){const r=this;return i;function i(s){return ie(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),o):e(s)}function o(s){return r.parser.lazy[r.now().line]?e(s):t(s)}}function R1(n,t,e){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(ua,t,e)}}const L1={name:"htmlText",tokenize:P1};function P1(n,t,e){const r=this;let i,o,s;return a;function a(C){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(C),l}function l(C){return C===33?(n.consume(C),c):C===47?(n.consume(C),A):C===63?(n.consume(C),E):Rt(C)?(n.consume(C),I):e(C)}function c(C){return C===45?(n.consume(C),u):C===91?(n.consume(C),o=0,p):Rt(C)?(n.consume(C),v):e(C)}function u(C){return C===45?(n.consume(C),h):e(C)}function d(C){return C===null?e(C):C===45?(n.consume(C),f):ie(C)?(s=d,de(C)):(n.consume(C),d)}function f(C){return C===45?(n.consume(C),h):d(C)}function h(C){return C===62?oe(C):C===45?f(C):d(C)}function p(C){const Le="CDATA[";return C===Le.charCodeAt(o++)?(n.consume(C),o===Le.length?g:p):e(C)}function g(C){return C===null?e(C):C===93?(n.consume(C),y):ie(C)?(s=g,de(C)):(n.consume(C),g)}function y(C){return C===93?(n.consume(C),k):g(C)}function k(C){return C===62?oe(C):C===93?(n.consume(C),k):g(C)}function v(C){return C===null||C===62?oe(C):ie(C)?(s=v,de(C)):(n.consume(C),v)}function E(C){return C===null?e(C):C===63?(n.consume(C),R):ie(C)?(s=E,de(C)):(n.consume(C),E)}function R(C){return C===62?oe(C):E(C)}function A(C){return Rt(C)?(n.consume(C),w):e(C)}function w(C){return C===45||Gt(C)?(n.consume(C),w):T(C)}function T(C){return ie(C)?(s=T,de(C)):be(C)?(n.consume(C),T):oe(C)}function I(C){return C===45||Gt(C)?(n.consume(C),I):C===47||C===62||He(C)?F(C):e(C)}function F(C){return C===47?(n.consume(C),oe):C===58||C===95||Rt(C)?(n.consume(C),N):ie(C)?(s=F,de(C)):be(C)?(n.consume(C),F):oe(C)}function N(C){return C===45||C===46||C===58||C===95||Gt(C)?(n.consume(C),N):$(C)}function $(C){return C===61?(n.consume(C),K):ie(C)?(s=$,de(C)):be(C)?(n.consume(C),$):F(C)}function K(C){return C===null||C===60||C===61||C===62||C===96?e(C):C===34||C===39?(n.consume(C),i=C,Z):ie(C)?(s=K,de(C)):be(C)?(n.consume(C),K):(n.consume(C),te)}function Z(C){return C===i?(n.consume(C),i=void 0,j):C===null?e(C):ie(C)?(s=Z,de(C)):(n.consume(C),Z)}function te(C){return C===null||C===34||C===39||C===60||C===61||C===96?e(C):C===47||C===62||He(C)?F(C):(n.consume(C),te)}function j(C){return C===47||C===62||He(C)?F(C):e(C)}function oe(C){return C===62?(n.consume(C),n.exit("htmlTextData"),n.exit("htmlText"),t):e(C)}function de(C){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(C),n.exit("lineEnding"),ye}function ye(C){return be(C)?Ce(n,Ge,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):Ge(C)}function Ge(C){return n.enter("htmlTextData"),s(C)}}const _f={name:"labelEnd",resolveAll:$1,resolveTo:H1,tokenize:U1},B1={tokenize:q1},z1={tokenize:W1},F1={tokenize:K1};function $1(n){let t=-1;const e=[];for(;++t<n.length;){const r=n[t][1];if(e.push(n[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return n.length!==e.length&&un(n,0,n.length,e),n}function H1(n,t){let e=n.length,r=0,i,o,s,a;for(;e--;)if(i=n[e][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[e][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(n[e][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=e,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=e);const l={type:n[o][1].type==="labelLink"?"link":"image",start:{...n[o][1].start},end:{...n[n.length-1][1].end}},c={type:"label",start:{...n[o][1].start},end:{...n[s][1].end}},u={type:"labelText",start:{...n[o+r+2][1].end},end:{...n[s-2][1].start}};return a=[["enter",l,t],["enter",c,t]],a=wn(a,n.slice(o+1,o+r+3)),a=wn(a,[["enter",u,t]]),a=wn(a,jl(t.parser.constructs.insideSpan.null,n.slice(o+r+4,s-3),t)),a=wn(a,[["exit",u,t],n[s-2],n[s-1],["exit",c,t]]),a=wn(a,n.slice(s+1)),a=wn(a,[["exit",l,t]]),un(n,o,n.length,a),n}function U1(n,t,e){const r=this;let i=r.events.length,o,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return a;function a(f){return o?o._inactive?d(f):(s=r.parser.defined.includes(Dn(r.sliceSerialize({start:o.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(f),n.exit("labelMarker"),n.exit("labelEnd"),l):e(f)}function l(f){return f===40?n.attempt(B1,u,s?u:d)(f):f===91?n.attempt(z1,u,s?c:d)(f):s?u(f):d(f)}function c(f){return n.attempt(F1,u,d)(f)}function u(f){return t(f)}function d(f){return o._balanced=!0,e(f)}}function q1(n,t,e){return r;function r(d){return n.enter("resource"),n.enter("resourceMarker"),n.consume(d),n.exit("resourceMarker"),i}function i(d){return He(d)?Ss(n,o)(d):o(d)}function o(d){return d===41?u(d):qy(n,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function s(d){return He(d)?Ss(n,l)(d):u(d)}function a(d){return e(d)}function l(d){return d===34||d===39||d===40?Ky(n,c,e,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return He(d)?Ss(n,u)(d):u(d)}function u(d){return d===41?(n.enter("resourceMarker"),n.consume(d),n.exit("resourceMarker"),n.exit("resource"),t):e(d)}}function W1(n,t,e){const r=this;return i;function i(a){return Wy.call(r,n,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return r.parser.defined.includes(Dn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):e(a)}function s(a){return e(a)}}function K1(n,t,e){return r;function r(o){return n.enter("reference"),n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),i}function i(o){return o===93?(n.enter("referenceMarker"),n.consume(o),n.exit("referenceMarker"),n.exit("reference"),t):e(o)}}const V1={name:"labelStartImage",resolveAll:_f.resolveAll,tokenize:Y1};function Y1(n,t,e){const r=this;return i;function i(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),o}function o(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),s):e(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?e(a):t(a)}}const G1={name:"labelStartLink",resolveAll:_f.resolveAll,tokenize:j1};function j1(n,t,e){const r=this;return i;function i(s){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?e(s):t(s)}}const bu={name:"lineEnding",tokenize:J1};function J1(n,t){return e;function e(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),Ce(n,t,"linePrefix")}}const Qa={name:"thematicBreak",tokenize:X1};function X1(n,t,e){let r=0,i;return o;function o(c){return n.enter("thematicBreak"),s(c)}function s(c){return i=c,a(c)}function a(c){return c===i?(n.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||ie(c))?(n.exit("thematicBreak"),t(c)):e(c)}function l(c){return c===i?(n.consume(c),r++,l):(n.exit("thematicBreakSequence"),be(c)?Ce(n,a,"whitespace")(c):a(c))}}const Ut={continuation:{tokenize:tv},exit:rv,name:"list",tokenize:ev},Z1={partial:!0,tokenize:iv},Q1={partial:!0,tokenize:nv};function ev(n,t,e){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:Ed(h)){if(r.containerState.type||(r.containerState.type=p,n.enter(p,{_container:!0})),p==="listUnordered")return n.enter("listItemPrefix"),h===42||h===45?n.check(Qa,e,c)(h):c(h);if(!r.interrupt||h===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),l(h)}return e(h)}function l(h){return Ed(h)&&++s<10?(n.consume(h),l):(!r.interrupt||s<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(n.exit("listItemValue"),c(h)):e(h)}function c(h){return n.enter("listItemMarker"),n.consume(h),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,n.check(ua,r.interrupt?e:u,n.attempt(Z1,f,d))}function u(h){return r.containerState.initialBlankLine=!0,o++,f(h)}function d(h){return be(h)?(n.enter("listItemPrefixWhitespace"),n.consume(h),n.exit("listItemPrefixWhitespace"),f):e(h)}function f(h){return r.containerState.size=o+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,t(h)}}function tv(n,t,e){const r=this;return r.containerState._closeFlow=void 0,n.check(ua,i,o);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ce(n,t,"listItemIndent",r.containerState.size+1)(a)}function o(a){return r.containerState.furtherBlankLines||!be(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(Q1,t,s)(a))}function s(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ce(n,n.attempt(Ut,t,e),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function nv(n,t,e){const r=this;return Ce(n,i,"listItemIndent",r.containerState.size+1);function i(o){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(o):e(o)}}function rv(n){n.exit(this.containerState.type)}function iv(n,t,e){const r=this;return Ce(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const s=r.events[r.events.length-1];return!be(o)&&s&&s[1].type==="listItemPrefixWhitespace"?t(o):e(o)}}const tg={name:"setextUnderline",resolveTo:ov,tokenize:sv};function ov(n,t){let e=n.length,r,i,o;for(;e--;)if(n[e][0]==="enter"){if(n[e][1].type==="content"){r=e;break}n[e][1].type==="paragraph"&&(i=e)}else n[e][1].type==="content"&&n.splice(e,1),!o&&n[e][1].type==="definition"&&(o=e);const s={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",o?(n.splice(i,0,["enter",s,t]),n.splice(o+1,0,["exit",n[r][1],t]),n[r][1].end={...n[o][1].end}):n[r][1]=s,n.push(["exit",s,t]),n}function sv(n,t,e){const r=this;let i;return o;function o(c){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(n.enter("setextHeadingLine"),i=c,s(c)):e(c)}function s(c){return n.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(n.consume(c),a):(n.exit("setextHeadingLineSequence"),be(c)?Ce(n,l,"lineSuffix")(c):l(c))}function l(c){return c===null||ie(c)?(n.exit("setextHeadingLine"),t(c)):e(c)}}const av={tokenize:lv};function lv(n){const t=this,e=n.attempt(ua,r,n.attempt(this.parser.constructs.flowInitial,i,Ce(n,n.attempt(this.parser.constructs.flow,i,n.attempt(h1,i)),"linePrefix")));return e;function r(o){if(o===null){n.consume(o);return}return n.enter("lineEndingBlank"),n.consume(o),n.exit("lineEndingBlank"),t.currentConstruct=void 0,e}function i(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),t.currentConstruct=void 0,e}}const cv={resolveAll:Yy()},uv=Vy("string"),dv=Vy("text");function Vy(n){return{resolveAll:Yy(n==="text"?fv:void 0),tokenize:t};function t(e){const r=this,i=this.parser.constructs[n],o=e.attempt(i,s,a);return s;function s(u){return c(u)?o(u):a(u)}function a(u){if(u===null){e.consume(u);return}return e.enter("data"),e.consume(u),l}function l(u){return c(u)?(e.exit("data"),o(u)):(e.consume(u),l)}function c(u){if(u===null)return!0;const d=i[u];let f=-1;if(d)for(;++f<d.length;){const h=d[f];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Yy(n){return t;function t(e,r){let i=-1,o;for(;++i<=e.length;)o===void 0?e[i]&&e[i][1].type==="data"&&(o=i,i++):(!e[i]||e[i][1].type!=="data")&&(i!==o+2&&(e[o][1].end=e[i-1][1].end,e.splice(o+2,i-o-2),i=o+2),o=void 0);return n?n(e,r):e}}function fv(n,t){let e=0;for(;++e<=n.length;)if((e===n.length||n[e][1].type==="lineEnding")&&n[e-1][1].type==="data"){const r=n[e-1][1],i=t.sliceStream(r);let o=i.length,s=-1,a=0,l;for(;o--;){const c=i[o];if(typeof c=="string"){for(s=c.length;c.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(c===-2)l=!0,a++;else if(c!==-1){o++;break}}if(t._contentTypeTextTrailing&&e===n.length&&(a=0),a){const c={type:e===n.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:r.start._bufferIndex+s,_index:r.start._index+o,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(n.splice(e,0,["enter",c,t],["exit",c,t]),e+=2)}e++}return n}const hv={42:Ut,43:Ut,45:Ut,48:Ut,49:Ut,50:Ut,51:Ut,52:Ut,53:Ut,54:Ut,55:Ut,56:Ut,57:Ut,62:Fy},pv={91:y1},mv={[-2]:gu,[-1]:gu,32:gu},gv={35:S1,42:Qa,45:[tg,Qa],60:T1,61:tg,95:Qa,96:Qm,126:Qm},bv={38:Hy,92:$y},yv={[-5]:bu,[-4]:bu,[-3]:bu,33:V1,38:Hy,42:Cd,60:[GS,L1],91:G1,92:[E1,$y],93:_f,95:Cd,96:a1},kv={null:[Cd,cv]},wv={null:[42,95]},xv={null:[]},Ev=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:wv,contentInitial:pv,disable:xv,document:hv,flow:gv,flowInitial:mv,insideSpan:kv,string:bv,text:yv},Symbol.toStringTag,{value:"Module"}));function Cv(n,t,e){let r={_bufferIndex:-1,_index:0,line:e&&e.line||1,column:e&&e.column||1,offset:e&&e.offset||0};const i={},o=[];let s=[],a=[];const l={attempt:T(A),check:T(w),consume:v,enter:E,exit:R,interrupt:T(w,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:p,parser:n,previous:null,sliceSerialize:f,sliceStream:h,write:d};let u=t.tokenize.call(c,l);return t.resolveAll&&o.push(t),c;function d($){return s=wn(s,$),y(),s[s.length-1]!==null?[]:(I(t,0),c.events=jl(o,c.events,c),c.events)}function f($,K){return vv(h($),K)}function h($){return Sv(s,$)}function p(){const{_bufferIndex:$,_index:K,line:Z,column:te,offset:j}=r;return{_bufferIndex:$,_index:K,line:Z,column:te,offset:j}}function g($){i[$.line]=$.column,N()}function y(){let $;for(;r._index<s.length;){const K=s[r._index];if(typeof K=="string")for($=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===$&&r._bufferIndex<K.length;)k(K.charCodeAt(r._bufferIndex));else k(K)}}function k($){u=u($)}function v($){ie($)?(r.line++,r.column=1,r.offset+=$===-3?2:1,N()):$!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=$}function E($,K){const Z=K||{};return Z.type=$,Z.start=p(),c.events.push(["enter",Z,c]),a.push(Z),Z}function R($){const K=a.pop();return K.end=p(),c.events.push(["exit",K,c]),K}function A($,K){I($,K.from)}function w($,K){K.restore()}function T($,K){return Z;function Z(te,j,oe){let de,ye,Ge,C;return Array.isArray(te)?Xe(te):"tokenize"in te?Xe([te]):Le(te);function Le(Me){return ve;function ve(pe){const Fe=pe!==null&&Me[pe],$e=pe!==null&&Me.null,Ze=[...Array.isArray(Fe)?Fe:Fe?[Fe]:[],...Array.isArray($e)?$e:$e?[$e]:[]];return Xe(Ze)(pe)}}function Xe(Me){return de=Me,ye=0,Me.length===0?oe:S(Me[ye])}function S(Me){return ve;function ve(pe){return C=F(),Ge=Me,Me.partial||(c.currentConstruct=Me),Me.name&&c.parser.constructs.disable.null.includes(Me.name)?ze():Me.tokenize.call(K?Object.assign(Object.create(c),K):c,l,Be,ze)(pe)}}function Be(Me){return $(Ge,C),j}function ze(Me){return C.restore(),++ye<de.length?S(de[ye]):oe}}}function I($,K){$.resolveAll&&!o.includes($)&&o.push($),$.resolve&&un(c.events,K,c.events.length-K,$.resolve(c.events.slice(K),c)),$.resolveTo&&(c.events=$.resolveTo(c.events,c))}function F(){const $=p(),K=c.previous,Z=c.currentConstruct,te=c.events.length,j=Array.from(a);return{from:te,restore:oe};function oe(){r=$,c.previous=K,c.currentConstruct=Z,c.events.length=te,a=j,N()}}function N(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Sv(n,t){const e=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let s;if(e===i)s=[n[e].slice(r,o)];else{if(s=n.slice(e,i),r>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(r):s.shift()}o>0&&s.push(n[i].slice(0,o))}return s}function vv(n,t){let e=-1;const r=[];let i;for(;++e<n.length;){const o=n[e];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&i)continue;s=" ";break}default:s=String.fromCharCode(o)}i=o===-2,r.push(s)}return r.join("")}function _v(n){const r={constructs:By([Ev,...(n||{}).extensions||[]]),content:i(HS),defined:[],document:i(qS),flow:i(av),lazy:{},string:i(uv),text:i(dv)};return r;function i(o){return s;function s(a){return Cv(r,o,a)}}}function Nv(n){for(;!Uy(n););return n}const ng=/[\0\t\n\r]/g;function Tv(){let n=1,t="",e=!0,r;return i;function i(o,s,a){const l=[];let c,u,d,f,h;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),d=0,t="",e&&(o.charCodeAt(0)===65279&&d++,e=void 0);d<o.length;){if(ng.lastIndex=d,c=ng.exec(o),f=c&&c.index!==void 0?c.index:o.length,h=o.charCodeAt(f),!c){t=o.slice(d);break}if(h===10&&d===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<f&&(l.push(o.slice(d,f)),n+=f-d),h){case 0:{l.push(65533),n++;break}case 9:{for(u=Math.ceil(n/4)*4,l.push(-2);n++<u;)l.push(-1);break}case 10:{l.push(-4),n=1;break}default:r=!0,n=1}d=f+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const Mv=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Gy(n){return n.replace(Mv,Av)}function Av(n,t,e){if(t)return t;if(e.charCodeAt(0)===35){const i=e.charCodeAt(1),o=i===120||i===88;return zy(e.slice(o?2:1),o?16:10)}return vf(e)||n}function vs(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?rg(n.position):"start"in n||"end"in n?rg(n):"line"in n||"column"in n?Sd(n):""}function Sd(n){return ig(n&&n.line)+":"+ig(n&&n.column)}function rg(n){return Sd(n&&n.start)+"-"+Sd(n&&n.end)}function ig(n){return n&&typeof n=="number"?n:1}const jy={}.hasOwnProperty;function Ov(n,t,e){return typeof t!="string"&&(e=t,t=void 0),Iv(e)(Nv(_v(e).document().write(Tv()(n,t,!0))))}function Iv(n){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(_n),autolinkProtocol:F,autolinkEmail:F,atxHeading:o(rr),blockQuote:o($e),characterEscape:F,characterReference:F,codeFenced:o(Ze),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(Ze,s),codeText:o(it,s),codeTextData:F,data:F,codeFlowValue:F,definition:o(At),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(Ar),hardBreakEscape:o(Pn),hardBreakTrailing:o(Pn),htmlFlow:o(Bn,s),htmlFlowData:F,htmlText:o(Bn,s),htmlTextData:F,image:o(ir),label:s,link:o(_n),listItem:o(sr),listItemValue:f,listOrdered:o(or,d),listUnordered:o(or),paragraph:o(Or),reference:S,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(rr),strong:o(zn),thematicBreak:o(Ft)},exit:{atxHeading:l(),atxHeadingSequence:A,autolink:l(),autolinkEmail:Fe,autolinkProtocol:pe,blockQuote:l(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:ze,characterReferenceMarkerNumeric:ze,characterReferenceValue:Me,characterReference:ve,codeFenced:l(y),codeFencedFence:g,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:N,codeIndented:l(k),codeText:l(j),codeTextData:N,data:N,definition:l(),definitionDestinationString:R,definitionLabelString:v,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(K),hardBreakTrailing:l(K),htmlFlow:l(Z),htmlFlowData:N,htmlText:l(te),htmlTextData:N,image:l(de),label:Ge,labelText:ye,lineEnding:$,link:l(oe),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Be,resourceDestinationString:C,resourceTitleString:Le,resource:Xe,setextHeading:l(I),setextHeadingLineSequence:T,setextHeadingText:w,strong:l(),thematicBreak:l()}};Jy(t,(n||{}).mdastExtensions||[]);const e={};return r;function r(O){let U={type:"root",children:[]};const se={stack:[U],tokenStack:[],config:t,enter:a,exit:c,buffer:s,resume:u,data:e},fe=[];let we=-1;for(;++we<O.length;)if(O[we][1].type==="listOrdered"||O[we][1].type==="listUnordered")if(O[we][0]==="enter")fe.push(we);else{const mt=fe.pop();we=i(O,mt,we)}for(we=-1;++we<O.length;){const mt=t[O[we][0]];jy.call(mt,O[we][1].type)&&mt[O[we][1].type].call(Object.assign({sliceSerialize:O[we][2].sliceSerialize},se),O[we][1])}if(se.tokenStack.length>0){const mt=se.tokenStack[se.tokenStack.length-1];(mt[1]||og).call(se,void 0,mt[0])}for(U.position={start:Rr(O.length>0?O[0][1].start:{line:1,column:1,offset:0}),end:Rr(O.length>0?O[O.length-2][1].end:{line:1,column:1,offset:0})},we=-1;++we<t.transforms.length;)U=t.transforms[we](U)||U;return U}function i(O,U,se){let fe=U-1,we=-1,mt=!1,Ot,It,pn,_e;for(;++fe<=se;){const nt=O[fe];switch(nt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{nt[0]==="enter"?we++:we--,_e=void 0;break}case"lineEndingBlank":{nt[0]==="enter"&&(Ot&&!_e&&!we&&!pn&&(pn=fe),_e=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:_e=void 0}if(!we&&nt[0]==="enter"&&nt[1].type==="listItemPrefix"||we===-1&&nt[0]==="exit"&&(nt[1].type==="listUnordered"||nt[1].type==="listOrdered")){if(Ot){let $t=fe;for(It=void 0;$t--;){const gt=O[$t];if(gt[1].type==="lineEnding"||gt[1].type==="lineEndingBlank"){if(gt[0]==="exit")continue;It&&(O[It][1].type="lineEndingBlank",mt=!0),gt[1].type="lineEnding",It=$t}else if(!(gt[1].type==="linePrefix"||gt[1].type==="blockQuotePrefix"||gt[1].type==="blockQuotePrefixWhitespace"||gt[1].type==="blockQuoteMarker"||gt[1].type==="listItemIndent"))break}pn&&(!It||pn<It)&&(Ot._spread=!0),Ot.end=Object.assign({},It?O[It][1].start:nt[1].end),O.splice(It||fe,0,["exit",Ot,nt[2]]),fe++,se++}if(nt[1].type==="listItemPrefix"){const $t={type:"listItem",_spread:!1,start:Object.assign({},nt[1].start),end:void 0};Ot=$t,O.splice(fe,0,["enter",$t,nt[2]]),fe++,se++,pn=void 0,_e=!0}}}return O[U][1]._spread=mt,se}function o(O,U){return se;function se(fe){a.call(this,O(fe),fe),U&&U.call(this,fe)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(O,U,se){this.stack[this.stack.length-1].children.push(O),this.stack.push(O),this.tokenStack.push([U,se||void 0]),O.position={start:Rr(U.start),end:void 0}}function l(O){return U;function U(se){O&&O.call(this,se),c.call(this,se)}}function c(O,U){const se=this.stack.pop(),fe=this.tokenStack.pop();if(fe)fe[0].type!==O.type&&(U?U.call(this,O,fe[0]):(fe[1]||og).call(this,O,fe[0]));else throw new Error("Cannot close `"+O.type+"` ("+vs({start:O.start,end:O.end})+"): it’s not open");se.position.end=Rr(O.end)}function u(){return Sf(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(O){if(this.data.expectingFirstListItemValue){const U=this.stack[this.stack.length-2];U.start=Number.parseInt(this.sliceSerialize(O),10),this.data.expectingFirstListItemValue=void 0}}function h(){const O=this.resume(),U=this.stack[this.stack.length-1];U.lang=O}function p(){const O=this.resume(),U=this.stack[this.stack.length-1];U.meta=O}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const O=this.resume(),U=this.stack[this.stack.length-1];U.value=O.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const O=this.resume(),U=this.stack[this.stack.length-1];U.value=O.replace(/(\r?\n|\r)$/g,"")}function v(O){const U=this.resume(),se=this.stack[this.stack.length-1];se.label=U,se.identifier=Dn(this.sliceSerialize(O)).toLowerCase()}function E(){const O=this.resume(),U=this.stack[this.stack.length-1];U.title=O}function R(){const O=this.resume(),U=this.stack[this.stack.length-1];U.url=O}function A(O){const U=this.stack[this.stack.length-1];if(!U.depth){const se=this.sliceSerialize(O).length;U.depth=se}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function T(O){const U=this.stack[this.stack.length-1];U.depth=this.sliceSerialize(O).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function F(O){const se=this.stack[this.stack.length-1].children;let fe=se[se.length-1];(!fe||fe.type!=="text")&&(fe=zt(),fe.position={start:Rr(O.start),end:void 0},se.push(fe)),this.stack.push(fe)}function N(O){const U=this.stack.pop();U.value+=this.sliceSerialize(O),U.position.end=Rr(O.end)}function $(O){const U=this.stack[this.stack.length-1];if(this.data.atHardBreak){const se=U.children[U.children.length-1];se.position.end=Rr(O.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(U.type)&&(F.call(this,O),N.call(this,O))}function K(){this.data.atHardBreak=!0}function Z(){const O=this.resume(),U=this.stack[this.stack.length-1];U.value=O}function te(){const O=this.resume(),U=this.stack[this.stack.length-1];U.value=O}function j(){const O=this.resume(),U=this.stack[this.stack.length-1];U.value=O}function oe(){const O=this.stack[this.stack.length-1];if(this.data.inReference){const U=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=U,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function de(){const O=this.stack[this.stack.length-1];if(this.data.inReference){const U=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=U,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function ye(O){const U=this.sliceSerialize(O),se=this.stack[this.stack.length-2];se.label=Gy(U),se.identifier=Dn(U).toLowerCase()}function Ge(){const O=this.stack[this.stack.length-1],U=this.resume(),se=this.stack[this.stack.length-1];if(this.data.inReference=!0,se.type==="link"){const fe=O.children;se.children=fe}else se.alt=U}function C(){const O=this.resume(),U=this.stack[this.stack.length-1];U.url=O}function Le(){const O=this.resume(),U=this.stack[this.stack.length-1];U.title=O}function Xe(){this.data.inReference=void 0}function S(){this.data.referenceType="collapsed"}function Be(O){const U=this.resume(),se=this.stack[this.stack.length-1];se.label=U,se.identifier=Dn(this.sliceSerialize(O)).toLowerCase(),this.data.referenceType="full"}function ze(O){this.data.characterReferenceType=O.type}function Me(O){const U=this.sliceSerialize(O),se=this.data.characterReferenceType;let fe;se?(fe=zy(U,se==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):fe=vf(U);const we=this.stack[this.stack.length-1];we.value+=fe}function ve(O){const U=this.stack.pop();U.position.end=Rr(O.end)}function pe(O){N.call(this,O);const U=this.stack[this.stack.length-1];U.url=this.sliceSerialize(O)}function Fe(O){N.call(this,O);const U=this.stack[this.stack.length-1];U.url="mailto:"+this.sliceSerialize(O)}function $e(){return{type:"blockquote",children:[]}}function Ze(){return{type:"code",lang:null,meta:null,value:""}}function it(){return{type:"inlineCode",value:""}}function At(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ar(){return{type:"emphasis",children:[]}}function rr(){return{type:"heading",depth:0,children:[]}}function Pn(){return{type:"break"}}function Bn(){return{type:"html",value:""}}function ir(){return{type:"image",title:null,url:"",alt:null}}function _n(){return{type:"link",title:null,url:"",children:[]}}function or(O){return{type:"list",ordered:O.type==="listOrdered",start:null,spread:O._spread,children:[]}}function sr(O){return{type:"listItem",spread:O._spread,checked:null,children:[]}}function Or(){return{type:"paragraph",children:[]}}function zn(){return{type:"strong",children:[]}}function zt(){return{type:"text",value:""}}function Ft(){return{type:"thematicBreak"}}}function Rr(n){return{line:n.line,column:n.column,offset:n.offset}}function Jy(n,t){let e=-1;for(;++e<t.length;){const r=t[e];Array.isArray(r)?Jy(n,r):Dv(n,r)}}function Dv(n,t){let e;for(e in t)if(jy.call(t,e))switch(e){case"canContainEols":{const r=t[e];r&&n[e].push(...r);break}case"transforms":{const r=t[e];r&&n[e].push(...r);break}case"enter":case"exit":{const r=t[e];r&&Object.assign(n[e],r);break}}}function og(n,t){throw n?new Error("Cannot close `"+n.type+"` ("+vs({start:n.start,end:n.end})+"): a different token (`"+t.type+"`, "+vs({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+vs({start:t.start,end:t.end})+") is still open")}function vd(n){const t=this;t.parser=e;function e(r){return Ov(r,{...t.data("settings"),...n,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const sg={}.hasOwnProperty;function Rv(n,t){const e=t||{};function r(i,...o){let s=r.invalid;const a=r.handlers;if(i&&sg.call(i,n)){const l=String(i[n]);s=sg.call(a,l)?a[l]:r.unknown}if(s)return s.call(this,i,...o)}return r.handlers=e.handlers||{},r.invalid=e.invalid,r.unknown=e.unknown,r}const Lv={}.hasOwnProperty;function Xy(n,t){let e=-1,r;if(t.extensions)for(;++e<t.extensions.length;)Xy(n,t.extensions[e]);for(r in t)if(Lv.call(t,r))switch(r){case"extensions":break;case"unsafe":{ag(n[r],t[r]);break}case"join":{ag(n[r],t[r]);break}case"handlers":{Pv(n[r],t[r]);break}default:n.options[r]=t[r]}return n}function ag(n,t){t&&n.push(...t)}function Pv(n,t){t&&Object.assign(n,t)}function Bv(n,t,e,r){const i=e.enter("blockquote"),o=e.createTracker(r);o.move("> "),o.shift(2);const s=e.indentLines(e.containerFlow(n,o.current()),zv);return i(),s}function zv(n,t,e){return">"+(e?"":" ")+n}function Zy(n,t){return lg(n,t.inConstruct,!0)&&!lg(n,t.notInConstruct,!1)}function lg(n,t,e){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return e;let r=-1;for(;++r<t.length;)if(n.includes(t[r]))return!0;return!1}function cg(n,t,e,r){let i=-1;for(;++i<e.unsafe.length;)if(e.unsafe[i].character===`
`&&Zy(e.stack,e.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Fv(n,t){const e=String(n);let r=e.indexOf(t),i=r,o=0,s=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>s&&(s=o):o=1,i=r+t.length,r=e.indexOf(t,i);return s}function _d(n,t){return!!(t.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function $v(n){const t=n.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Hv(n,t,e,r){const i=$v(e),o=n.value||"",s=i==="`"?"GraveAccent":"Tilde";if(_d(n,e)){const d=e.enter("codeIndented"),f=e.indentLines(o,Uv);return d(),f}const a=e.createTracker(r),l=i.repeat(Math.max(Fv(o,i)+1,3)),c=e.enter("codeFenced");let u=a.move(l);if(n.lang){const d=e.enter(`codeFencedLang${s}`);u+=a.move(e.safe(n.lang,{before:u,after:" ",encode:["`"],...a.current()})),d()}if(n.lang&&n.meta){const d=e.enter(`codeFencedMeta${s}`);u+=a.move(" "),u+=a.move(e.safe(n.meta,{before:u,after:`
`,encode:["`"],...a.current()})),d()}return u+=a.move(`
`),o&&(u+=a.move(o+`
`)),u+=a.move(l),c(),u}function Uv(n,t,e){return(e?"":"    ")+n}function Nf(n){const t=n.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function qv(n,t,e,r){const i=Nf(e),o=i==='"'?"Quote":"Apostrophe",s=e.enter("definition");let a=e.enter("label");const l=e.createTracker(r);let c=l.move("[");return c+=l.move(e.safe(e.associationId(n),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!n.url||/[\0- \u007F]/.test(n.url)?(a=e.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(e.safe(n.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=e.enter("destinationRaw"),c+=l.move(e.safe(n.url,{before:c,after:n.title?" ":`
`,...l.current()}))),a(),n.title&&(a=e.enter(`title${o}`),c+=l.move(" "+i),c+=l.move(e.safe(n.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),s(),c}function Wv(n){const t=n.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Qr(n){return"&#x"+n.toString(16).toUpperCase()+";"}function Al(n,t,e){const r=Lo(n),i=Lo(t);return r===void 0?i===void 0?e==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Qy.peek=Kv;function Qy(n,t,e,r){const i=Wv(e),o=e.enter("emphasis"),s=e.createTracker(r),a=s.move(i);let l=s.move(e.containerPhrasing(n,{after:i,before:a,...s.current()}));const c=l.charCodeAt(0),u=Al(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=Qr(c)+l.slice(1));const d=l.charCodeAt(l.length-1),f=Al(r.after.charCodeAt(0),d,i);f.inside&&(l=l.slice(0,-1)+Qr(d));const h=s.move(i);return o(),e.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},a+l+h}function Kv(n,t,e){return e.options.emphasis||"*"}const Jl=(function(n){if(n==null)return jv;if(typeof n=="function")return Xl(n);if(typeof n=="object")return Array.isArray(n)?Vv(n):Yv(n);if(typeof n=="string")return Gv(n);throw new Error("Expected function, string, or object as test")});function Vv(n){const t=[];let e=-1;for(;++e<n.length;)t[e]=Jl(n[e]);return Xl(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function Yv(n){const t=n;return Xl(e);function e(r){const i=r;let o;for(o in n)if(i[o]!==t[o])return!1;return!0}}function Gv(n){return Xl(t);function t(e){return e&&e.type===n}}function Xl(n){return t;function t(e,r,i){return!!(Jv(e)&&n.call(this,e,typeof r=="number"?r:void 0,i||void 0))}}function jv(){return!0}function Jv(n){return n!==null&&typeof n=="object"&&"type"in n}const ek=[],Xv=!0,Nd=!1,Td="skip";function Tf(n,t,e,r){let i;typeof t=="function"&&typeof e!="function"?(r=e,e=t):i=t;const o=Jl(i),s=r?-1:1;a(n,void 0,[])();function a(l,c,u){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return f;function f(){let h=ek,p,g,y;if((!t||o(l,c,u[u.length-1]||void 0))&&(h=Zv(e(l,u)),h[0]===Nd))return h;if("children"in l&&l.children){const k=l;if(k.children&&h[0]!==Td)for(g=(r?k.children.length:-1)+s,y=u.concat(k);g>-1&&g<k.children.length;){const v=k.children[g];if(p=a(v,g,y)(),p[0]===Nd)return p;g=typeof p[1]=="number"?p[1]:g+s}}return h}}}function Zv(n){return Array.isArray(n)?n:typeof n=="number"?[Xv,n]:n==null?ek:[n]}function $o(n,t,e,r){let i,o,s;typeof t=="function"&&typeof e!="function"?(o=void 0,s=t,i=e):(o=t,s=e,i=r),Tf(n,o,a,i);function a(l,c){const u=c[c.length-1],d=u?u.children.indexOf(l):void 0;return s(l,d,u)}}function tk(n,t){let e=!1;return $o(n,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return e=!0,Nd}),!!((!n.depth||n.depth<3)&&Sf(n)&&(t.options.setext||e))}function Qv(n,t,e,r){const i=Math.max(Math.min(6,n.depth||1),1),o=e.createTracker(r);if(tk(n,e)){const u=e.enter("headingSetext"),d=e.enter("phrasing"),f=e.containerPhrasing(n,{...o.current(),before:`
`,after:`
`});return d(),u(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const s="#".repeat(i),a=e.enter("headingAtx"),l=e.enter("phrasing");o.move(s+" ");let c=e.containerPhrasing(n,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(c)&&(c=Qr(c.charCodeAt(0))+c.slice(1)),c=c?s+" "+c:s,e.options.closeAtx&&(c+=" "+s),l(),a(),c}nk.peek=e_;function nk(n){return n.value||""}function e_(){return"<"}rk.peek=t_;function rk(n,t,e,r){const i=Nf(e),o=i==='"'?"Quote":"Apostrophe",s=e.enter("image");let a=e.enter("label");const l=e.createTracker(r);let c=l.move("![");return c+=l.move(e.safe(n.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(a=e.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(e.safe(n.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=e.enter("destinationRaw"),c+=l.move(e.safe(n.url,{before:c,after:n.title?" ":")",...l.current()}))),a(),n.title&&(a=e.enter(`title${o}`),c+=l.move(" "+i),c+=l.move(e.safe(n.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),s(),c}function t_(){return"!"}ik.peek=n_;function ik(n,t,e,r){const i=n.referenceType,o=e.enter("imageReference");let s=e.enter("label");const a=e.createTracker(r);let l=a.move("![");const c=e.safe(n.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),s();const u=e.stack;e.stack=[],s=e.enter("reference");const d=e.safe(e.associationId(n),{before:l,after:"]",...a.current()});return s(),e.stack=u,o(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function n_(){return"!"}ok.peek=r_;function ok(n,t,e){let r=n.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<e.unsafe.length;){const s=e.unsafe[o],a=e.compilePattern(s);let l;if(s.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function r_(){return"`"}function sk(n,t){const e=Sf(n);return!!(!t.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(e===n.url||"mailto:"+e===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}ak.peek=i_;function ak(n,t,e,r){const i=Nf(e),o=i==='"'?"Quote":"Apostrophe",s=e.createTracker(r);let a,l;if(sk(n,e)){const u=e.stack;e.stack=[],a=e.enter("autolink");let d=s.move("<");return d+=s.move(e.containerPhrasing(n,{before:d,after:">",...s.current()})),d+=s.move(">"),a(),e.stack=u,d}a=e.enter("link"),l=e.enter("label");let c=s.move("[");return c+=s.move(e.containerPhrasing(n,{before:c,after:"](",...s.current()})),c+=s.move("]("),l(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(l=e.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(e.safe(n.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(l=e.enter("destinationRaw"),c+=s.move(e.safe(n.url,{before:c,after:n.title?" ":")",...s.current()}))),l(),n.title&&(l=e.enter(`title${o}`),c+=s.move(" "+i),c+=s.move(e.safe(n.title,{before:c,after:i,...s.current()})),c+=s.move(i),l()),c+=s.move(")"),a(),c}function i_(n,t,e){return sk(n,e)?"<":"["}lk.peek=o_;function lk(n,t,e,r){const i=n.referenceType,o=e.enter("linkReference");let s=e.enter("label");const a=e.createTracker(r);let l=a.move("[");const c=e.containerPhrasing(n,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),s();const u=e.stack;e.stack=[],s=e.enter("reference");const d=e.safe(e.associationId(n),{before:l,after:"]",...a.current()});return s(),e.stack=u,o(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function o_(){return"["}function Mf(n){const t=n.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function s_(n){const t=Mf(n),e=n.options.bulletOther;if(!e)return t==="*"?"-":"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(e===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+e+"`) to be different");return e}function a_(n){const t=n.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function ck(n){const t=n.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function l_(n,t,e,r){const i=e.enter("list"),o=e.bulletCurrent;let s=n.ordered?a_(e):Mf(e);const a=n.ordered?s==="."?")":".":s_(e);let l=t&&e.bulletLastUsed?s===e.bulletLastUsed:!1;if(!n.ordered){const u=n.children?n.children[0]:void 0;if((s==="*"||s==="-")&&u&&(!u.children||!u.children[0])&&e.stack[e.stack.length-1]==="list"&&e.stack[e.stack.length-2]==="listItem"&&e.stack[e.stack.length-3]==="list"&&e.stack[e.stack.length-4]==="listItem"&&e.indexStack[e.indexStack.length-1]===0&&e.indexStack[e.indexStack.length-2]===0&&e.indexStack[e.indexStack.length-3]===0&&(l=!0),ck(e)===s&&u){let d=-1;for(;++d<n.children.length;){const f=n.children[d];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(s=a),e.bulletCurrent=s;const c=e.containerFlow(n,r);return e.bulletLastUsed=s,e.bulletCurrent=o,i(),c}function c_(n){const t=n.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function u_(n,t,e,r){const i=c_(e);let o=e.bulletCurrent||Mf(e);t&&t.type==="list"&&t.ordered&&(o=(typeof t.start=="number"&&t.start>-1?t.start:1)+(e.options.incrementListMarker===!1?0:t.children.indexOf(n))+o);let s=o.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||n.spread))&&(s=Math.ceil(s/4)*4);const a=e.createTracker(r);a.move(o+" ".repeat(s-o.length)),a.shift(s);const l=e.enter("listItem"),c=e.indentLines(e.containerFlow(n,a.current()),u);return l(),c;function u(d,f,h){return f?(h?"":" ".repeat(s))+d:(h?o:o+" ".repeat(s-o.length))+d}}function d_(n,t,e,r){const i=e.enter("paragraph"),o=e.enter("phrasing"),s=e.containerPhrasing(n,r);return o(),i(),s}const f_=Jl(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function h_(n,t,e,r){return(n.children.some(function(s){return f_(s)})?e.containerPhrasing:e.containerFlow).call(e,n,r)}function p_(n){const t=n.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}uk.peek=m_;function uk(n,t,e,r){const i=p_(e),o=e.enter("strong"),s=e.createTracker(r),a=s.move(i+i);let l=s.move(e.containerPhrasing(n,{after:i,before:a,...s.current()}));const c=l.charCodeAt(0),u=Al(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=Qr(c)+l.slice(1));const d=l.charCodeAt(l.length-1),f=Al(r.after.charCodeAt(0),d,i);f.inside&&(l=l.slice(0,-1)+Qr(d));const h=s.move(i+i);return o(),e.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},a+l+h}function m_(n,t,e){return e.options.strong||"*"}function g_(n,t,e,r){return e.safe(n.value,r)}function b_(n){const t=n.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function y_(n,t,e){const r=(ck(e)+(e.options.ruleSpaces?" ":"")).repeat(b_(e));return e.options.ruleSpaces?r.slice(0,-1):r}const Af={blockquote:Bv,break:cg,code:Hv,definition:qv,emphasis:Qy,hardBreak:cg,heading:Qv,html:nk,image:rk,imageReference:ik,inlineCode:ok,link:ak,linkReference:lk,list:l_,listItem:u_,paragraph:d_,root:h_,strong:uk,text:g_,thematicBreak:y_},k_=[w_];function w_(n,t,e,r){if(t.type==="code"&&_d(t,r)&&(n.type==="list"||n.type===t.type&&_d(n,r)))return!1;if("spread"in e&&typeof e.spread=="boolean")return n.type==="paragraph"&&(n.type===t.type||t.type==="definition"||t.type==="heading"&&tk(t,r))?void 0:e.spread?1:0}const fi=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],x_=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:fi},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:fi},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:fi},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:fi},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:fi},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:fi},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:fi},{atBreak:!0,character:"~"}];function E_(n){return n.label||!n.identifier?n.label||"":Gy(n.identifier)}function C_(n){if(!n._compiled){const t=(n.atBreak?"[\\r\\n][\\t ]*":"")+(n.before?"(?:"+n.before+")":"");n._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(n.character)?"\\":"")+n.character+(n.after?"(?:"+n.after+")":""),"g")}return n._compiled}function S_(n,t,e){const r=t.indexStack,i=n.children||[],o=[];let s=-1,a=e.before,l;r.push(-1);let c=t.createTracker(e);for(;++s<i.length;){const u=i[s];let d;if(r[r.length-1]=s,s+1<i.length){let p=t.handle.handlers[i[s+1].type];p&&p.peek&&(p=p.peek),d=p?p(i[s+1],n,t,{before:"",after:"",...c.current()}).charAt(0):""}else d=e.after;o.length>0&&(a==="\r"||a===`
`)&&u.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),a=" ",c=t.createTracker(e),c.move(o.join("")));let f=t.handle(u,n,t,{...c.current(),after:d,before:a});l&&l===f.slice(0,1)&&(f=Qr(l.charCodeAt(0))+f.slice(1));const h=t.attentionEncodeSurroundingInfo;t.attentionEncodeSurroundingInfo=void 0,l=void 0,h&&(o.length>0&&h.before&&a===o[o.length-1].slice(-1)&&(o[o.length-1]=o[o.length-1].slice(0,-1)+Qr(a.charCodeAt(0))),h.after&&(l=d)),c.move(f),o.push(f),a=f.slice(-1)}return r.pop(),o.join("")}function v_(n,t,e){const r=t.indexStack,i=n.children||[],o=t.createTracker(e),s=[];let a=-1;for(r.push(-1);++a<i.length;){const l=i[a];r[r.length-1]=a,s.push(o.move(t.handle(l,n,t,{before:`
`,after:`
`,...o.current()}))),l.type!=="list"&&(t.bulletLastUsed=void 0),a<i.length-1&&s.push(o.move(__(l,i[a+1],n,t)))}return r.pop(),s.join("")}function __(n,t,e,r){let i=r.join.length;for(;i--;){const o=r.join[i](n,t,e,r);if(o===!0||o===1)break;if(typeof o=="number")return`
`.repeat(1+o);if(o===!1)return`

<!---->

`}return`

`}const N_=/\r?\n|\r/g;function T_(n,t){const e=[];let r=0,i=0,o;for(;o=N_.exec(n);)s(n.slice(r,o.index)),e.push(o[0]),r=o.index+o[0].length,i++;return s(n.slice(r)),e.join("");function s(a){e.push(t(a,i,!a))}}function M_(n,t,e){const r=(e.before||"")+(t||"")+(e.after||""),i=[],o=[],s={};let a=-1;for(;++a<n.unsafe.length;){const u=n.unsafe[a];if(!Zy(n.stack,u))continue;const d=n.compilePattern(u);let f;for(;f=d.exec(r);){const h="before"in u||!!u.atBreak,p="after"in u,g=f.index+(h?f[1].length:0);i.includes(g)?(s[g].before&&!h&&(s[g].before=!1),s[g].after&&!p&&(s[g].after=!1)):(i.push(g),s[g]={before:h,after:p})}}i.sort(A_);let l=e.before?e.before.length:0;const c=r.length-(e.after?e.after.length:0);for(a=-1;++a<i.length;){const u=i[a];u<l||u>=c||u+1<c&&i[a+1]===u+1&&s[u].after&&!s[u+1].before&&!s[u+1].after||i[a-1]===u-1&&s[u].before&&!s[u-1].before&&!s[u-1].after||(l!==u&&o.push(ug(r.slice(l,u),"\\")),l=u,/[!-/:-@[-`{-~]/.test(r.charAt(u))&&(!e.encode||!e.encode.includes(r.charAt(u)))?o.push("\\"):(o.push(Qr(r.charCodeAt(u))),l++))}return o.push(ug(r.slice(l,c),e.after)),o.join("")}function A_(n,t){return n-t}function ug(n,t){const e=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],o=n+t;let s=-1,a=0,l;for(;l=e.exec(o);)r.push(l.index);for(;++s<r.length;)a!==r[s]&&i.push(n.slice(a,r[s])),i.push("\\"),a=r[s];return i.push(n.slice(a)),i.join("")}function O_(n){const t=n||{},e=t.now||{};let r=t.lineShift||0,i=e.line||1,o=e.column||1;return{move:l,current:s,shift:a};function s(){return{now:{line:i,column:o},lineShift:r}}function a(c){r+=c}function l(c){const u=c||"",d=u.split(/\r?\n|\r/g),f=d[d.length-1];return i+=d.length-1,o=d.length===1?o+f.length:1+f.length+r,u}}function I_(n,t){const e=t||{},r={associationId:E_,containerPhrasing:P_,containerFlow:B_,createTracker:O_,compilePattern:C_,enter:o,handlers:{...Af},handle:void 0,indentLines:T_,indexStack:[],join:[...k_],options:{},safe:z_,stack:[],unsafe:[...x_]};Xy(r,e),r.options.tightDefinitions&&r.join.push(L_),r.handle=Rv("type",{invalid:D_,unknown:R_,handlers:r.handlers});let i=r.handle(n,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function o(s){return r.stack.push(s),a;function a(){r.stack.pop()}}}function D_(n){throw new Error("Cannot handle value `"+n+"`, expected node")}function R_(n){const t=n;throw new Error("Cannot handle unknown node `"+t.type+"`")}function L_(n,t){if(n.type==="definition"&&n.type===t.type)return 0}function P_(n,t){return S_(n,this,t)}function B_(n,t){return v_(n,this,t)}function z_(n,t){return M_(this,n,t)}function Md(n){const t=this;t.compiler=e;function e(r){return I_(r,{...t.data("settings"),...n,extensions:t.data("toMarkdownExtensions")||[]})}}function dg(n){if(n)throw n}var yu,fg;function F_(){if(fg)return yu;fg=1;var n=Object.prototype.hasOwnProperty,t=Object.prototype.toString,e=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):t.call(c)==="[object Array]"},o=function(c){if(!c||t.call(c)!=="[object Object]")return!1;var u=n.call(c,"constructor"),d=c.constructor&&c.constructor.prototype&&n.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!d)return!1;var f;for(f in c);return typeof f>"u"||n.call(c,f)},s=function(c,u){e&&u.name==="__proto__"?e(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},a=function(c,u){if(u==="__proto__")if(n.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return yu=function l(){var c,u,d,f,h,p,g=arguments[0],y=1,k=arguments.length,v=!1;for(typeof g=="boolean"&&(v=g,g=arguments[1]||{},y=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});y<k;++y)if(c=arguments[y],c!=null)for(u in c)d=a(g,u),f=a(c,u),g!==f&&(v&&f&&(o(f)||(h=i(f)))?(h?(h=!1,p=d&&i(d)?d:[]):p=d&&o(d)?d:{},s(g,{name:u,newValue:l(v,p,f)})):typeof f<"u"&&s(g,{name:u,newValue:f}));return g},yu}var $_=F_();const ku=Hb($_);function Ad(n){if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function H_(){const n=[],t={run:e,use:r};return t;function e(...i){let o=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...i);function a(l,...c){const u=n[++o];let d=-1;if(l){s(l);return}for(;++d<i.length;)(c[d]===null||c[d]===void 0)&&(c[d]=i[d]);i=c,u?U_(u,a)(...c):s(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),t}}function U_(n,t){let e;return r;function r(...s){const a=n.length>s.length;let l;a&&s.push(i);try{l=n.apply(this,s)}catch(c){const u=c;if(a&&e)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(o,i):l instanceof Error?i(l):o(l))}function i(s,...a){e||(e=!0,t(s,...a))}function o(s){i(null,s)}}class Qt extends Error{constructor(t,e,r){super(),typeof e=="string"&&(r=e,e=void 0);let i="",o={},s=!1;if(e&&("line"in e&&"column"in e?o={place:e}:"start"in e&&"end"in e?o={place:e}:"type"in e?o={ancestors:[e],place:e.position}:o={...e}),typeof t=="string"?i=t:!o.cause&&t&&(s=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?o.ruleId=r:(o.source=r.slice(0,l),o.ruleId=r.slice(l+1))}if(!o.place&&o.ancestors&&o.ancestors){const l=o.ancestors[o.ancestors.length-1];l&&(o.place=l.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=vs(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Qt.prototype.file="";Qt.prototype.name="";Qt.prototype.reason="";Qt.prototype.message="";Qt.prototype.stack="";Qt.prototype.column=void 0;Qt.prototype.line=void 0;Qt.prototype.ancestors=void 0;Qt.prototype.cause=void 0;Qt.prototype.fatal=void 0;Qt.prototype.place=void 0;Qt.prototype.ruleId=void 0;Qt.prototype.source=void 0;const Vn={basename:q_,dirname:W_,extname:K_,join:V_,sep:"/"};function q_(n,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');da(n);let e=0,r=-1,i=n.length,o;if(t===void 0||t.length===0||t.length>n.length){for(;i--;)if(n.codePointAt(i)===47){if(o){e=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":n.slice(e,r)}if(t===n)return"";let s=-1,a=t.length-1;for(;i--;)if(n.codePointAt(i)===47){if(o){e=i+1;break}}else s<0&&(o=!0,s=i+1),a>-1&&(n.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=s));return e===r?r=s:r<0&&(r=n.length),n.slice(e,r)}function W_(n){if(da(n),n.length===0)return".";let t=-1,e=n.length,r;for(;--e;)if(n.codePointAt(e)===47){if(r){t=e;break}}else r||(r=!0);return t<0?n.codePointAt(0)===47?"/":".":t===1&&n.codePointAt(0)===47?"//":n.slice(0,t)}function K_(n){da(n);let t=n.length,e=-1,r=0,i=-1,o=0,s;for(;t--;){const a=n.codePointAt(t);if(a===47){if(s){r=t+1;break}continue}e<0&&(s=!0,e=t+1),a===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||e<0||o===0||o===1&&i===e-1&&i===r+1?"":n.slice(i,e)}function V_(...n){let t=-1,e;for(;++t<n.length;)da(n[t]),n[t]&&(e=e===void 0?n[t]:e+"/"+n[t]);return e===void 0?".":Y_(e)}function Y_(n){da(n);const t=n.codePointAt(0)===47;let e=G_(n,!t);return e.length===0&&!t&&(e="."),e.length>0&&n.codePointAt(n.length-1)===47&&(e+="/"),t?"/"+e:e}function G_(n,t){let e="",r=0,i=-1,o=0,s=-1,a,l;for(;++s<=n.length;){if(s<n.length)a=n.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(i===s-1||o===1))if(i!==s-1&&o===2){if(e.length<2||r!==2||e.codePointAt(e.length-1)!==46||e.codePointAt(e.length-2)!==46){if(e.length>2){if(l=e.lastIndexOf("/"),l!==e.length-1){l<0?(e="",r=0):(e=e.slice(0,l),r=e.length-1-e.lastIndexOf("/")),i=s,o=0;continue}}else if(e.length>0){e="",r=0,i=s,o=0;continue}}t&&(e=e.length>0?e+"/..":"..",r=2)}else e.length>0?e+="/"+n.slice(i+1,s):e=n.slice(i+1,s),r=s-i-1;i=s,o=0}else a===46&&o>-1?o++:o=-1}return e}function da(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const j_={cwd:J_};function J_(){return"/"}function Od(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function X_(n){if(typeof n=="string")n=new URL(n);else if(!Od(n)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(n.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Z_(n)}function Z_(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=n.pathname;let e=-1;for(;++e<t.length;)if(t.codePointAt(e)===37&&t.codePointAt(e+1)===50){const r=t.codePointAt(e+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const wu=["history","path","basename","stem","extname","dirname"];class Q_{constructor(t){let e;t?Od(t)?e={path:t}:typeof t=="string"||eN(t)?e={value:t}:e=t:e={},this.cwd="cwd"in e?"":j_.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<wu.length;){const o=wu[r];o in e&&e[o]!==void 0&&e[o]!==null&&(this[o]=o==="history"?[...e[o]]:e[o])}let i;for(i in e)wu.includes(i)||(this[i]=e[i])}get basename(){return typeof this.path=="string"?Vn.basename(this.path):void 0}set basename(t){Eu(t,"basename"),xu(t,"basename"),this.path=Vn.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Vn.dirname(this.path):void 0}set dirname(t){hg(this.basename,"dirname"),this.path=Vn.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Vn.extname(this.path):void 0}set extname(t){if(xu(t,"extname"),hg(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vn.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Od(t)&&(t=X_(t)),Eu(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Vn.basename(this.path,this.extname):void 0}set stem(t){Eu(t,"stem"),xu(t,"stem"),this.path=Vn.join(this.dirname||"",t+(this.extname||""))}fail(t,e,r){const i=this.message(t,e,r);throw i.fatal=!0,i}info(t,e,r){const i=this.message(t,e,r);return i.fatal=void 0,i}message(t,e,r){const i=new Qt(t,e,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function xu(n,t){if(n&&n.includes(Vn.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Vn.sep+"`")}function Eu(n,t){if(!n)throw new Error("`"+t+"` cannot be empty")}function hg(n,t){if(!n)throw new Error("Setting `"+t+"` requires `path` to be set too")}function eN(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const tN=(function(n){const r=this.constructor.prototype,i=r[n],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),nN={}.hasOwnProperty;class Of extends tN{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=H_()}copy(){const t=new Of;let e=-1;for(;++e<this.attachers.length;){const r=this.attachers[e];t.use(...r)}return t.data(ku(!0,{},this.namespace)),t}data(t,e){return typeof t=="string"?arguments.length===2?(vu("data",this.frozen),this.namespace[t]=e,this):nN.call(this.namespace,t)&&this.namespace[t]||void 0:t?(vu("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[e,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=e.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const e=Wa(t),r=this.parser||this.Parser;return Cu("parse",r),r(String(e),e)}process(t,e){const r=this;return this.freeze(),Cu("process",this.parser||this.Parser),Su("process",this.compiler||this.Compiler),e?i(void 0,e):new Promise(i);function i(o,s){const a=Wa(t),l=r.parse(a);r.run(l,a,function(u,d,f){if(u||!d||!f)return c(u);const h=d,p=r.stringify(h,f);iN(p)?f.value=p:f.result=p,c(u,f)});function c(u,d){u||!d?s(u):o?o(d):e(void 0,d)}}}processSync(t){let e=!1,r;return this.freeze(),Cu("processSync",this.parser||this.Parser),Su("processSync",this.compiler||this.Compiler),this.process(t,i),mg("processSync","process",e),r;function i(o,s){e=!0,dg(o),r=s}}run(t,e,r){pg(t),this.freeze();const i=this.transformers;return!r&&typeof e=="function"&&(r=e,e=void 0),r?o(void 0,r):new Promise(o);function o(s,a){const l=Wa(e);i.run(t,l,c);function c(u,d,f){const h=d||t;u?a(u):s?s(h):r(void 0,h,f)}}}runSync(t,e){let r=!1,i;return this.run(t,e,o),mg("runSync","run",r),i;function o(s,a){dg(s),i=a,r=!0}}stringify(t,e){this.freeze();const r=Wa(e),i=this.compiler||this.Compiler;return Su("stringify",i),pg(t),i(t,r)}use(t,...e){const r=this.attachers,i=this.namespace;if(vu("use",this.frozen),t!=null)if(typeof t=="function")l(t,e);else if(typeof t=="object")Array.isArray(t)?a(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...d]=c;l(u,d)}else s(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function s(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=ku(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const d=c[u];o(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let d=-1,f=-1;for(;++d<r.length;)if(r[d][0]===c){f=d;break}if(f===-1)r.push([c,...u]);else if(u.length>0){let[h,...p]=u;const g=r[f][1];Ad(g)&&Ad(h)&&(h=ku(!0,g,h)),r[f]=[c,h,...p]}}}}const Id=new Of().freeze();function Cu(n,t){if(typeof t!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function Su(n,t){if(typeof t!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function vu(n,t){if(t)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function pg(n){if(!Ad(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function mg(n,t,e){if(!e)throw new Error("`"+n+"` finished async. Use `"+t+"` instead")}function Wa(n){return rN(n)?n:new Q_(n)}function rN(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function iN(n){return typeof n=="string"||oN(n)}function oN(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}var dk=n=>{throw TypeError(n)},fk=(n,t,e)=>t.has(n)||dk("Cannot "+e),ge=(n,t,e)=>(fk(n,t,"read from private field"),e?e.call(n):t.get(n)),ot=(n,t,e)=>t.has(n)?dk("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),Ve=(n,t,e,r)=>(fk(n,t,"write to private field"),t.set(n,e),e),Kn,ss,el,tl,nl,as,ls,ur,cs,rl,il,us,ol,ds,sl,al,to,pi,ll,fs;class hk{}class pk{constructor(){this.elements=[],this.size=()=>this.elements.length,this.top=()=>this.elements.at(-1),this.push=t=>{var e;(e=this.top())==null||e.push(t)},this.open=t=>{this.elements.push(t)},this.close=()=>{const t=this.elements.pop();if(!t)throw my();return t}}}class If extends hk{constructor(t,e,r){super(),this.type=t,this.content=e,this.attrs=r}push(t,...e){this.content.push(t,...e)}pop(){return this.content.pop()}static create(t,e,r){return new If(t,e,r)}}const Dd=class extends pk{constructor(t){super(),ot(this,Kn),ot(this,ss),ot(this,el),ot(this,tl),ot(this,nl),ot(this,as),ot(this,ls),Ve(this,Kn,Ee.none),Ve(this,ss,e=>e.isText),Ve(this,el,(e,r)=>{if(ge(this,ss).call(this,e)&&ge(this,ss).call(this,r)&&Ee.sameSet(e.marks,r.marks))return this.schema.text(e.text+r.text,e.marks)}),Ve(this,tl,e=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.parseMarkdown.match(e));if(!r)throw eS(e);return r}),Ve(this,nl,e=>{const r=ge(this,tl).call(this,e);r.spec.parseMarkdown.runner(this,e,r)}),this.injectRoot=(e,r,i)=>(this.openNode(r,i),this.next(e.children),this),this.openNode=(e,r)=>(this.open(If.create(e,[],r)),this),Ve(this,as,()=>{Ve(this,Kn,Ee.none);const e=this.close();return ge(this,ls).call(this,e.type,e.attrs,e.content)}),this.closeNode=()=>{try{ge(this,as).call(this)}catch(e){console.error(e)}return this},Ve(this,ls,(e,r,i)=>{const o=e.createAndFill(r,i,ge(this,Kn));if(!o)throw QC(e,r,i);return this.push(o),o}),this.addNode=(e,r,i)=>{try{ge(this,ls).call(this,e,r,i)}catch(o){console.error(o)}return this},this.openMark=(e,r)=>{const i=e.create(r);return Ve(this,Kn,i.addToSet(ge(this,Kn))),this},this.closeMark=e=>(Ve(this,Kn,e.removeFromSet(ge(this,Kn))),this),this.addText=e=>{try{const r=this.top();if(!r)throw my();const i=r.pop(),o=this.schema.text(e,ge(this,Kn));if(!i)return r.push(o),this;const s=ge(this,el).call(this,i,o);return s?(r.push(s),this):(r.push(i,o),this)}catch(r){return console.error(r),this}},this.build=()=>{let e;do e=ge(this,as).call(this);while(this.size());return e},this.next=(e=[])=>([e].flat().forEach(r=>ge(this,nl).call(this,r)),this),this.toDoc=()=>this.build(),this.run=(e,r)=>{const i=e.runSync(e.parse(r),r);return this.next(i),this},this.schema=t}};Kn=new WeakMap;ss=new WeakMap;el=new WeakMap;tl=new WeakMap;nl=new WeakMap;as=new WeakMap;ls=new WeakMap;Dd.create=(n,t)=>{const e=new Dd(n);return r=>(e.run(t,r),e.toDoc())};let sN=Dd;const Rd=class extends hk{constructor(t,e,r,i={}){super(),this.type=t,this.children=e,this.value=r,this.props=i,this.push=(o,...s)=>{this.children||(this.children=[]),this.children.push(o,...s)},this.pop=()=>{var o;return(o=this.children)==null?void 0:o.pop()}}};Rd.create=(n,t,e,r={})=>new Rd(n,t,e,r);let gg=Rd;const aN=n=>Object.prototype.hasOwnProperty.call(n,"size"),Ld=class extends pk{constructor(t){super(),ot(this,ur),ot(this,cs),ot(this,rl),ot(this,il),ot(this,us),ot(this,ol),ot(this,ds),ot(this,sl),ot(this,al),ot(this,to),ot(this,pi),ot(this,ll),ot(this,fs),Ve(this,ur,Ee.none),Ve(this,cs,e=>{const r=Object.values({...this.schema.nodes,...this.schema.marks}).find(i=>i.spec.toMarkdown.match(e));if(!r)throw tS(e.type);return r}),Ve(this,rl,e=>ge(this,cs).call(this,e).spec.toMarkdown.runner(this,e)),Ve(this,il,(e,r)=>ge(this,cs).call(this,e).spec.toMarkdown.runner(this,e,r)),Ve(this,us,e=>{const{marks:r}=e,i=a=>a.type.spec.priority??50;[...r].sort((a,l)=>i(a)-i(l)).every(a=>!ge(this,il).call(this,a,e))&&ge(this,rl).call(this,e),r.forEach(a=>ge(this,fs).call(this,a))}),Ve(this,ol,(e,r)=>{var l;if(e.type===r||((l=e.children)==null?void 0:l.length)!==1)return e;const i=c=>{var d;if(c.type===r)return c;if(((d=c.children)==null?void 0:d.length)!==1)return null;const[u]=c.children;return u?i(u):null},o=i(e);if(!o)return e;const s=o.children?[...o.children]:void 0,a={...e,children:s};return a.children=s,o.children=[a],o}),Ve(this,ds,e=>{const{children:r}=e;return r&&(e.children=r.reduce((i,o,s)=>{if(s===0)return[o];const a=i.at(-1);if(a&&a.isMark&&o.isMark){o=ge(this,ol).call(this,o,a.type);const{children:l,...c}=o,{children:u,...d}=a;if(o.type===a.type&&l&&u&&JSON.stringify(c)===JSON.stringify(d)){const f={...d,children:[...u,...l]};return i.slice(0,-1).concat(ge(this,ds).call(this,f))}}return i.concat(o)},[])),e}),Ve(this,sl,e=>{const r={...e.props,type:e.type};return e.children&&(r.children=e.children),e.value&&(r.value=e.value),r}),this.openNode=(e,r,i)=>(this.open(gg.create(e,void 0,r,i)),this),Ve(this,al,(e,r)=>{let i="",o="";const s=e.children;let a=-1,l=-1;const c=d=>{d&&d.forEach((f,h)=>{f.type==="text"&&f.value&&(a<0&&(a=h),l=h)})};if(s){c(s);const d=s==null?void 0:s[l],f=s==null?void 0:s[a];if(d&&d.value.endsWith(" ")){const h=d.value,p=h.trimEnd();o=h.slice(p.length),d.value=p}if(f&&f.value.startsWith(" ")){const h=f.value,p=h.trimStart();i=h.slice(0,h.length-p.length),f.value=p}}i.length&&ge(this,pi).call(this,"text",void 0,i);const u=r();return o.length&&ge(this,pi).call(this,"text",void 0,o),u}),Ve(this,to,(e=!1)=>{const r=this.close(),i=()=>ge(this,pi).call(this,r.type,r.children,r.value,r.props);return e?ge(this,al).call(this,r,i):i()}),this.closeNode=()=>(ge(this,to).call(this),this),Ve(this,pi,(e,r,i,o)=>{const s=gg.create(e,r,i,o),a=ge(this,ds).call(this,ge(this,sl).call(this,s));return this.push(a),a}),this.addNode=(e,r,i,o)=>(ge(this,pi).call(this,e,r,i,o),this),Ve(this,ll,(e,r,i,o)=>e.isInSet(ge(this,ur))?this:(Ve(this,ur,e.addToSet(ge(this,ur))),this.openNode(r,i,{...o,isMark:!0}))),Ve(this,fs,e=>{e.isInSet(ge(this,ur))&&(Ve(this,ur,e.type.removeFromSet(ge(this,ur))),ge(this,to).call(this,!0))}),this.withMark=(e,r,i,o)=>(ge(this,ll).call(this,e,r,i,o),this),this.closeMark=e=>(ge(this,fs).call(this,e),this),this.build=()=>{let e=null;do e=ge(this,to).call(this);while(this.size());return e},this.next=e=>aN(e)?(e.forEach(r=>{ge(this,us).call(this,r)}),this):(ge(this,us).call(this,e),this),this.toString=e=>e.stringify(this.build()),this.run=e=>(this.next(e),this),this.schema=t}};ur=new WeakMap;cs=new WeakMap;rl=new WeakMap;il=new WeakMap;us=new WeakMap;ol=new WeakMap;ds=new WeakMap;sl=new WeakMap;al=new WeakMap;to=new WeakMap;pi=new WeakMap;ll=new WeakMap;fs=new WeakMap;Ld.create=(n,t)=>{const e=new Ld(n);return r=>(e.run(r),e.toString(t))};let lN=Ld;const mk=65535,gk=Math.pow(2,16);function cN(n,t){return n+t*gk}function bg(n){return n&mk}function uN(n){return(n-(n&mk))/gk}const bk=1,yk=2,cl=4,kk=8;class Pd{constructor(t,e,r){this.pos=t,this.delInfo=e,this.recover=r}get deleted(){return(this.delInfo&kk)>0}get deletedBefore(){return(this.delInfo&(bk|cl))>0}get deletedAfter(){return(this.delInfo&(yk|cl))>0}get deletedAcross(){return(this.delInfo&cl)>0}}class ln{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&ln.empty)return ln.empty}recover(t){let e=0,r=bg(t);if(!this.inverted)for(let i=0;i<r;i++)e+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+e+uN(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[a+o],u=this.ranges[a+s],d=l+c;if(t<=d){let f=c?t==l?-1:t==d?1:e:e,h=l+i+(f<0?0:u);if(r)return h;let p=t==(e<0?l:d)?null:cN(a/3,t-l),g=t==l?yk:t==d?bk:cl;return(e<0?t!=l:t!=d)&&(g|=kk),new Pd(h,g,p)}i+=u-c}return r?t+i:new Pd(t+i,0,null)}touches(t,e){let r=0,i=bg(e),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[a+o],u=l+c;if(t<=u&&a==i*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(t){let e=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[i+e],u=this.ranges[i+r];t(a,a+c,l,l+u),o+=u-c}}invert(){return new ln(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?ln.empty:new ln(t<0?[0,-t,0]:[0,0,t])}}ln.empty=new ln([]);class Hs{constructor(t,e,r=0,i=t?t.length:0){this.mirror=e,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||e)}get maps(){return this._maps}slice(t=0,e=this.maps.length){return new Hs(this._maps,this.mirror,t,e)}appendMap(t,e){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),e!=null&&this.setMirror(this._maps.length-1,e)}appendMapping(t){for(let e=0,r=this._maps.length;e<t._maps.length;e++){let i=t.getMirror(e);this.appendMap(t._maps[e],i!=null&&i<e?r+i:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,r=this._maps.length+t._maps.length;e>=0;e--){let i=t.getMirror(e);this.appendMap(t._maps[e].invert(),i!=null&&i>e?r-i-1:void 0)}}invert(){let t=new Hs;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],a=s.mapResult(t,e);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,t=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,t=a.pos}return r?t:new Pd(t,i,null)}}const _u=Object.create(null);class Mt{getMap(){return ln.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=_u[e.stepType];if(!r)throw new RangeError(`No step type ${e.stepType} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in _u)throw new RangeError("Duplicate use of step JSON ID "+t);return _u[t]=e,e.prototype.jsonID=t,e}}class at{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new at(t,null)}static fail(t){return new at(null,t)}static fromReplace(t,e,r,i){try{return at.ok(t.replace(e,r,i))}catch(o){if(o instanceof _l)return at.fail(o.message);throw o}}}function Df(n,t,e){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(Df(o.content,t,o))),o.isInline&&(o=t(o,e,i)),r.push(o)}return B.fromArray(r)}class wr extends Mt{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new G(Df(e.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),e.openStart,e.openEnd);return at.fromReplace(t,this.from,this.to,o)}invert(){return new Jn(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new wr(e.pos,r.pos,this.mark)}merge(t){return t instanceof wr&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new wr(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new wr(e.from,e.to,t.markFromJSON(e.mark))}}Mt.jsonID("addMark",wr);class Jn extends Mt{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=new G(Df(e.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),e.openStart,e.openEnd);return at.fromReplace(t,this.from,this.to,r)}invert(){return new wr(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new Jn(e.pos,r.pos,this.mark)}merge(t){return t instanceof Jn&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Jn(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Jn(e.from,e.to,t.markFromJSON(e.mark))}}Mt.jsonID("removeMark",Jn);class Vr extends Mt{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return at.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return at.fromReplace(t,this.pos,this.pos+1,new G(B.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let r=this.mark.addToSet(e.marks);if(r.length==e.marks.length){for(let i=0;i<e.marks.length;i++)if(!e.marks[i].isInSet(r))return new Vr(this.pos,e.marks[i]);return new Vr(this.pos,this.mark)}}return new qi(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Vr(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Vr(e.pos,t.markFromJSON(e.mark))}}Mt.jsonID("addNodeMark",Vr);class qi extends Mt{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return at.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return at.fromReplace(t,this.pos,this.pos+1,new G(B.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new Vr(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new qi(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new qi(e.pos,t.markFromJSON(e.mark))}}Mt.jsonID("removeNodeMark",qi);class ft extends Mt{constructor(t,e,r,i=!1){super(),this.from=t,this.to=e,this.slice=r,this.structure=i}apply(t){return this.structure&&Bd(t,this.from,this.to)?at.fail("Structure replace would overwrite content"):at.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new ln([this.from,this.to-this.from,this.slice.size])}invert(t){return new ft(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new ft(e.pos,Math.max(e.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof ft)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let e=this.slice.size+t.slice.size==0?G.empty:new G(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new ft(this.from,this.to+(t.to-t.from),e,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let e=this.slice.size+t.slice.size==0?G.empty:new G(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new ft(t.from,this.to,e,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ft(e.from,e.to,G.fromJSON(t,e.slice),!!e.structure)}}Mt.jsonID("replace",ft);class Tt extends Mt{constructor(t,e,r,i,o,s,a=!1){super(),this.from=t,this.to=e,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(t){if(this.structure&&(Bd(t,this.from,this.gapFrom)||Bd(t,this.gapTo,this.to)))return at.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return at.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,e.content);return r?at.fromReplace(t,this.from,this.to,r):at.fail("Content does not fit in gap")}getMap(){return new ln([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new Tt(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||i<e.pos||o>r.pos?null:new Tt(e.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Tt(e.from,e.to,e.gapFrom,e.gapTo,G.fromJSON(t,e.slice),e.insert,!!e.structure)}}Mt.jsonID("replaceAround",Tt);function Bd(n,t,e){let r=n.resolve(t),i=e-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function dN(n,t,e,r){let i=[],o=[],s,a;n.doc.nodesBetween(t,e,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,t),h=Math.min(c+l.nodeSize,e),p=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(p)||(s&&s.to==f&&s.mark.eq(d[g])?s.to=h:i.push(s=new Jn(f,h,d[g])));a&&a.to==f?a.to=h:o.push(a=new wr(f,h,r))}}),i.forEach(l=>n.step(l)),o.forEach(l=>n.step(l))}function fN(n,t,e,r){let i=[],o=0;n.doc.nodesBetween(t,e,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof Yl){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,e);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==o-1&&d.eq(i[h].style)&&(f=p)}f?(f.to=c,f.step=o):i.push({style:d,from:Math.max(a,t),to:c,step:o})}}}),i.forEach(s=>n.step(new Jn(s.from,s.to,s.style)))}function Rf(n,t,e,r=e.contentMatch,i=!0){let o=n.doc.nodeAt(t),s=[],a=t+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new ft(a,u,G.empty));else{r=d;for(let f=0;f<c.marks.length;f++)e.allowsMarkType(c.marks[f].type)||n.step(new Jn(a,u,c.marks[f]));if(i&&c.isText&&e.whitespace!="pre"){let f,h=/\r?\n|\r/g,p;for(;f=h.exec(c.text);)p||(p=new G(B.from(e.schema.text(" ",e.allowedMarks(c.marks))),0,0)),s.push(new ft(a+f.index,a+f.index+f[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(B.empty,!0);n.replace(a,a,new G(l,0,0))}for(let l=s.length-1;l>=0;l--)n.step(s[l])}function hN(n,t,e){return(t==0||n.canReplace(t,n.childCount))&&(e==n.childCount||n.canReplace(0,e))}function Zl(n){let e=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),s=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,s,e))return r;if(r==0||i.type.spec.isolating||!hN(i,o,s))break}return null}function pN(n,t,e){let{$from:r,$to:i,depth:o}=t,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=B.empty,d=0;for(let p=o,g=!1;p>e;p--)g||r.index(p)>0?(g=!0,u=B.from(r.node(p).copy(u)),d++):l--;let f=B.empty,h=0;for(let p=o,g=!1;p>e;p--)g||i.after(p+1)<i.end(p)?(g=!0,f=B.from(i.node(p).copy(f)),h++):c++;n.step(new Tt(l,c,s,a,new G(u.append(f),d,h),u.size-d,!0))}function Lf(n,t,e=null,r=n){let i=mN(n,t),o=i&&gN(r,t);return o?i.map(yg).concat({type:t,attrs:e}).concat(o.map(yg)):null}function yg(n){return{type:n,attrs:null}}function mN(n,t){let{parent:e,startIndex:r,endIndex:i}=n,o=e.contentMatchAt(r).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return e.canReplaceWith(r,i,s)?o:null}function gN(n,t){let{parent:e,startIndex:r,endIndex:i}=n,o=e.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(e.child(c).type);return!l||!l.validEnd?null:s}function bN(n,t,e){let r=B.empty;for(let s=e.length-1;s>=0;s--){if(r.size){let a=e[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=B.from(e[s].type.create(e[s].attrs,r))}let i=t.start,o=t.end;n.step(new Tt(i,o,i,o,new G(r,0,0),e.length,!0))}function yN(n,t,e,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(t,e,(s,a)=>{let l=typeof i=="function"?i(s):i;if(s.isTextblock&&!s.hasMarkup(r,l)&&kN(n.doc,n.mapping.slice(o).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?c=!1:!h&&p&&(c=!0)}c===!1&&xk(n,s,a,o),Rf(n,n.mapping.slice(o).map(a,1),r,void 0,c===null);let u=n.mapping.slice(o),d=u.map(a,1),f=u.map(a+s.nodeSize,1);return n.step(new Tt(d,f,d+1,f-1,new G(B.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&wk(n,s,a,o),!1}})}function wk(n,t,e,r){t.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let l=n.mapping.slice(r).map(e+1+o+s.index);n.replaceWith(l,l+1,t.type.schema.linebreakReplacement.create())}}})}function xk(n,t,e,r){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let s=n.mapping.slice(r).map(e+1+o);n.replaceWith(s,s+1,t.type.schema.text(`
`))}})}function kN(n,t,e){let r=n.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,e)}function wN(n,t,e,r,i){let o=n.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);let s=e.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(t,t+o.nodeSize,s);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);n.step(new Tt(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new G(B.from(s),0,0),1,!0))}function _s(n,t,e=1,r){let i=n.resolve(t),o=i.depth-e,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=e-2;c>o;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!g.type.validContent(h))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function xN(n,t,e=1,r){let i=n.doc.resolve(t),o=B.empty,s=B.empty;for(let a=i.depth,l=i.depth-e,c=e-1;a>l;a--,c--){o=B.from(i.node(a).copy(o));let u=r&&r[c];s=B.from(u?u.type.create(u.attrs,s):i.node(a).copy(s))}n.step(new ft(t,t,new G(o.append(s),e,e),!0))}function Ql(n,t){let e=n.resolve(t),r=e.index();return CN(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(r,r+1)}function EN(n,t){t.content.size||n.type.compatibleContent(t.type);let e=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<t.childCount;i++){let o=t.child(i),s=o.type==r?n.type.schema.nodes.text:o.type;if(e=e.matchType(s),!e||!n.type.allowsMarks(o.marks))return!1}return e.validEnd}function CN(n,t){return!!(n&&t&&!n.isLeaf&&EN(n,t))}function SN(n,t,e){let r=null,{linebreakReplacement:i}=n.doc.type.schema,o=n.doc.resolve(t-e),s=o.node().type;if(i&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=n.steps.length;if(r===!1){let u=n.doc.resolve(t+e);xk(n,u.node(),u.before(),a)}s.inlineContent&&Rf(n,t+e-1,s,o.node().contentMatchAt(o.index()),r==null);let l=n.mapping.slice(a),c=l.map(t-e);if(n.step(new ft(c,l.map(t+e,-1),G.empty,!0)),r===!0){let u=n.doc.resolve(c);wk(n,u.node(),u.before(),n.steps.length)}return n}function vN(n,t,e){let r=n.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),e))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,e))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,e))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function _N(n,t,e){let r=n.resolve(t);if(!e.content.size)return t;let i=e.content;for(let o=0;o<e.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(e.openStart==0&&e.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function ec(n,t,e=t,r=G.empty){if(t==e&&!r.size)return null;let i=n.resolve(t),o=n.resolve(e);return Ek(i,o,r)?new ft(t,e,r):new NN(i,o,r).fit()}function Ek(n,t,e){return!e.openStart&&!e.openEnd&&n.start()==t.start()&&n.parent.canReplace(n.index(),t.index(),e.content)}class NN{constructor(t,e,r){this.$from=t,this.$to=e,this.unplaced=r,this.frontier=[],this.placed=B.empty;for(let i=0;i<=t.depth;i++){let o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=B.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new G(o,s,a);return t>-1?new Tt(r.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||r.pos!=this.$to.pos?new ft(r.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let o=e.firstChild;if(e.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){t=r;break}e=o.content}for(let e=1;e<=2;e++)for(let r=e==1?t:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Nu(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(e==1&&(s?c.matchType(s.type)||(d=c.fillBefore(B.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:d};if(e==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:t,openStart:e,openEnd:r}=this.unplaced,i=Nu(t,e);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new G(t,e+1,Math.max(r,i.size+e>=t.size-r?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:r}=this.unplaced,i=Nu(t,e);if(i.childCount<=1&&e>0){let o=t.size-e<=e+i.size;this.unplaced=new G(hs(t,e-1,1),e-1,o?e-1:r)}else this.unplaced=new G(hs(t,e,1),e,r)}placeNodes({sliceDepth:t,frontierDepth:e,parent:r,inject:i,wrap:o}){for(;this.depth>e;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-t,c=0,u=[],{match:d,type:f}=this.frontier[e];if(i){for(let g=0;g<i.childCount;g++)u.push(i.child(g));d=d.matchFragment(i)}let h=a.size+t-(s.content.size-s.openEnd);for(;c<a.childCount;){let g=a.child(c),y=d.matchType(g.type);if(!y)break;c++,(c>1||l==0||g.content.size)&&(d=y,u.push(Ck(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=ps(this.placed,e,B.from(u)),this.frontier[e].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=a;g<h;g++){let k=y.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),y=k.content}this.unplaced=p?t==0?G.empty:new G(hs(s.content,t-1,1),t-1,h<0?s.openEnd:t-1):new G(hs(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!Tu(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:r,type:i}=this.frontier[e],o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=Tu(t,e,i,r,o);if(s){for(let a=e-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Tu(t,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:e,fit:s,move:o?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=ps(this.placed,e.depth,e.fit)),t=e.move;for(let r=e.depth+1;r<=t.depth;r++){let i=t.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,o)}return t}openFrontierNode(t,e=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=ps(this.placed,this.depth,B.from(t.create(e,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(B.empty,!0);e.childCount&&(this.placed=ps(this.placed,this.frontier.length,e))}}function hs(n,t,e){return t==0?n.cutByIndex(e,n.childCount):n.replaceChild(0,n.firstChild.copy(hs(n.firstChild.content,t-1,e)))}function ps(n,t,e){return t==0?n.append(e):n.replaceChild(n.childCount-1,n.lastChild.copy(ps(n.lastChild.content,t-1,e)))}function Nu(n,t){for(let e=0;e<t;e++)n=n.firstChild.content;return n}function Ck(n,t,e){if(t<=0)return n;let r=n.content;return t>1&&(r=r.replaceChild(0,Ck(r.firstChild,t-1,r.childCount==1?e-1:0))),t>0&&(r=n.type.contentMatch.fillBefore(r).append(r),e<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(B.empty,!0)))),n.copy(r)}function Tu(n,t,e,r,i){let o=n.node(t),s=i?n.indexAfter(t):n.index(t);if(s==o.childCount&&!e.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!TN(e,o.content,s)?a:null}function TN(n,t,e){for(let r=e;r<t.childCount;r++)if(!n.allowsMarks(t.child(r).marks))return!0;return!1}function MN(n){return n.spec.defining||n.spec.definingForContent}function AN(n,t,e,r){if(!r.size)return n.deleteRange(t,e);let i=n.doc.resolve(t),o=n.doc.resolve(e);if(Ek(i,o,r))return n.step(new ft(t,e,r));let s=vk(i,n.doc.resolve(e));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(f)>-1?a=f:i.before(f)==h&&s.splice(1,0,-f)}let l=s.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f],p=MN(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(a)-1)))u=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),p=c[h];if(p)for(let g=0;g<s.length;g++){let y=s[(g+l)%s.length],k=!0;y<0&&(k=!1,y=-y);let v=i.node(y-1),E=i.index(y-1);if(v.canReplaceWith(E,E,p.type,p.marks))return n.replace(i.before(y),k?o.after(y):e,new G(Sk(r.content,0,r.openStart,h),h,r.openEnd))}}let d=n.steps.length;for(let f=s.length-1;f>=0&&(n.replace(t,e,r),!(n.steps.length>d));f--){let h=s[f];h<0||(t=i.before(h),e=o.after(h))}}function Sk(n,t,e,r,i){if(t<e){let o=n.firstChild;n=n.replaceChild(0,o.copy(Sk(o.content,t+1,e,r,o)))}if(t>r){let o=i.contentMatchAt(0),s=o.fillBefore(n).append(n);n=s.append(o.matchFragment(s).fillBefore(B.empty,!0))}return n}function ON(n,t,e,r){if(!r.isInline&&t==e&&n.doc.resolve(t).parent.content.size){let i=vN(n.doc,t,r.type);i!=null&&(t=e=i)}n.replaceRange(t,e,new G(B.from(r),0,0))}function IN(n,t,e){let r=n.doc.resolve(t),i=n.doc.resolve(e),o=vk(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return n.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(t-r.start(s)==r.depth-s&&e>r.end(s)&&i.end(s)-e!=i.depth-s&&r.start(s-1)==i.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),i.index(s-1)))return n.delete(r.before(s),e);n.delete(t,e)}function vk(n,t){let e=[],r=Math.min(n.depth,t.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||t.end(i)>t.pos+(t.depth-i)||n.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(o==t.start(i)||i==n.depth&&i==t.depth&&n.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==o-1)&&e.push(i)}return e}class po extends Mt{constructor(t,e,r){super(),this.pos=t,this.attr=e,this.value=r}apply(t){let e=t.nodeAt(this.pos);if(!e)return at.fail("No node at attribute step's position");let r=Object.create(null);for(let o in e.attrs)r[o]=e.attrs[o];r[this.attr]=this.value;let i=e.type.create(r,null,e.marks);return at.fromReplace(t,this.pos,this.pos+1,new G(B.from(i),0,e.isLeaf?0:1))}getMap(){return ln.empty}invert(t){return new po(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new po(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new po(e.pos,e.attr,e.value)}}Mt.jsonID("attr",po);class Us extends Mt{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let i in t.attrs)e[i]=t.attrs[i];e[this.attr]=this.value;let r=t.type.create(e,t.content,t.marks);return at.ok(r)}getMap(){return ln.empty}invert(t){return new Us(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Us(e.attr,e.value)}}Mt.jsonID("docAttr",Us);let Po=class extends Error{};Po=function n(t){let e=Error.call(this,t);return e.__proto__=n.prototype,e};Po.prototype=Object.create(Error.prototype);Po.prototype.constructor=Po;Po.prototype.name="TransformError";class _k{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Hs}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new Po(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,r=G.empty){let i=ec(this.doc,t,e,r);return i&&this.step(i),this}replaceWith(t,e,r){return this.replace(t,e,new G(B.from(r),0,0))}delete(t,e){return this.replace(t,e,G.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,r){return AN(this,t,e,r),this}replaceRangeWith(t,e,r){return ON(this,t,e,r),this}deleteRange(t,e){return IN(this,t,e),this}lift(t,e){return pN(this,t,e),this}join(t,e=1){return SN(this,t,e),this}wrap(t,e){return bN(this,t,e),this}setBlockType(t,e=t,r,i=null){return yN(this,t,e,r,i),this}setNodeMarkup(t,e,r=null,i){return wN(this,t,e,r,i),this}setNodeAttribute(t,e,r){return this.step(new po(t,e,r)),this}setDocAttribute(t,e){return this.step(new Us(t,e)),this}addNodeMark(t,e){return this.step(new Vr(t,e)),this}removeNodeMark(t,e){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(e instanceof Ee)e.isInSet(r.marks)&&this.step(new qi(t,e));else{let i=r.marks,o,s=[];for(;o=e.isInSet(i);)s.push(new qi(t,o)),i=o.removeFromSet(i);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(t,e=1,r){return xN(this,t,e,r),this}addMark(t,e,r){return dN(this,t,e,r),this}removeMark(t,e,r){return fN(this,t,e,r),this}clearIncompatible(t,e,r){return Rf(this,t,e,r),this}}const Mu=Object.create(null);class le{constructor(t,e,r){this.$anchor=t,this.$head=e,this.ranges=r||[new Nk(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=G.empty){let r=e.content.lastChild,i=null;for(let a=0;a<e.openEnd;a++)i=r,r=r.lastChild;let o=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=t.mapping.slice(o);t.replaceRange(u.map(l.pos),u.map(c.pos),a?G.empty:e),a==0&&xg(t,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,e){let r=t.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=t.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);o?t.deleteRange(c,u):(t.replaceRangeWith(c,u,e),xg(t,r,e.isInline?-1:1))}}static findFrom(t,e,r=!1){let i=t.parent.inlineContent?new ce(t):no(t.node(0),t.parent,t.pos,t.index(),e,r);if(i)return i;for(let o=t.depth-1;o>=0;o--){let s=e<0?no(t.node(0),t.node(o),t.before(o+1),t.index(o),e,r):no(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,r);if(s)return s}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new jt(t.node(0))}static atStart(t){return no(t,t,0,0,1)||new jt(t)}static atEnd(t){return no(t,t,t.content.size,t.childCount,-1)||new jt(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Mu[e.type];if(!r)throw new RangeError(`No selection type ${e.type} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in Mu)throw new RangeError("Duplicate use of selection JSON ID "+t);return Mu[t]=e,e.prototype.jsonID=t,e}getBookmark(){return ce.between(this.$anchor,this.$head).getBookmark()}}le.prototype.visible=!0;class Nk{constructor(t,e){this.$from=t,this.$to=e}}let kg=!1;function wg(n){!kg&&!n.parent.inlineContent&&(kg=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ce extends le{constructor(t,e=t){wg(t),wg(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let r=t.resolve(e.map(this.head));if(!r.parent.inlineContent)return le.near(r);let i=t.resolve(e.map(this.anchor));return new ce(i.parent.inlineContent?i:r,r)}replace(t,e=G.empty){if(super.replace(t,e),e==G.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof ce&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new tc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if(typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ce(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,r=e){let i=t.resolve(e);return new this(i,r==e?i:t.resolve(r))}static between(t,e,r){let i=t.pos-e.pos;if((!r||i)&&(r=i>=0?1:-1),!e.parent.inlineContent){let o=le.findFrom(e,r,!0)||le.findFrom(e,-r,!0);if(o)e=o.$head;else return le.near(e,r)}return t.parent.inlineContent||(i==0?t=e:(t=(le.findFrom(t,-r,!0)||le.findFrom(t,r,!0)).$anchor,t.pos<e.pos!=i<0&&(t=e))),new ce(t,e)}}le.jsonID("text",ce);class tc{constructor(t,e){this.anchor=t,this.head=e}map(t){return new tc(t.map(this.anchor),t.map(this.head))}resolve(t){return ce.between(t.resolve(this.anchor),t.resolve(this.head))}}class re extends le{constructor(t){let e=t.nodeAfter,r=t.node(0).resolve(t.pos+e.nodeSize);super(t,r),this.node=e}map(t,e){let{deleted:r,pos:i}=e.mapResult(this.anchor),o=t.resolve(i);return r?le.near(o):new re(o)}content(){return new G(B.from(this.node),0,0)}eq(t){return t instanceof re&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Pf(this.anchor)}static fromJSON(t,e){if(typeof e.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new re(t.resolve(e.anchor))}static create(t,e){return new re(t.resolve(e))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}re.prototype.visible=!1;le.jsonID("node",re);class Pf{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:r}=t.mapResult(this.anchor);return e?new tc(r,r):new Pf(r)}resolve(t){let e=t.resolve(this.anchor),r=e.nodeAfter;return r&&re.isSelectable(r)?new re(e):le.near(e)}}class jt extends le{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=G.empty){if(e==G.empty){t.delete(0,t.doc.content.size);let r=le.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new jt(t)}map(t){return new jt(t)}eq(t){return t instanceof jt}getBookmark(){return DN}}le.jsonID("all",jt);const DN={map(){return this},resolve(n){return new jt(n)}};function no(n,t,e,r,i,o=!1){if(t.inlineContent)return ce.create(n,e);for(let s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let a=t.child(s);if(a.isAtom){if(!o&&re.isSelectable(a))return re.create(n,e-(i<0?a.nodeSize:0))}else{let l=no(n,a,e+i,i<0?a.childCount:0,i,o);if(l)return l}e+=a.nodeSize*i}return null}function xg(n,t,e){let r=n.steps.length-1;if(r<t)return;let i=n.steps[r];if(!(i instanceof ft||i instanceof Tt))return;let o=n.mapping.maps[r],s;o.forEach((a,l,c,u)=>{s==null&&(s=u)}),n.setSelection(le.near(n.doc.resolve(s),e))}const Eg=1,Ka=2,Cg=4;class RN extends _k{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Eg)&~Ka,this.storedMarks=null,this}get selectionSet(){return(this.updated&Eg)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Ka,this}ensureMarks(t){return Ee.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ka)>0}addStep(t,e){super.addStep(t,e),this.updated=this.updated&~Ka,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let r=this.selection;return e&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ee.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,r){let i=this.doc.type.schema;if(e==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=e),r=r??e,!t)return this.deleteRange(e,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(e);o=r==e?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(e,r,i.text(t,o)),this.selection.empty||this.setSelection(le.near(this.selection.$to)),this}}setMeta(t,e){return this.meta[typeof t=="string"?t:t.key]=e,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Cg,this}get scrolledIntoView(){return(this.updated&Cg)>0}}function Sg(n,t){return!t||!n?n:n.bind(t)}class ms{constructor(t,e,r){this.name=t,this.init=Sg(e.init,r),this.apply=Sg(e.apply,r)}}const LN=[new ms("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new ms("selection",{init(n,t){return n.selection||le.atStart(t.doc)},apply(n){return n.selection}}),new ms("storedMarks",{init(n){return n.storedMarks||null},apply(n,t,e,r){return r.selection.$cursor?n.storedMarks:null}}),new ms("scrollToSelection",{init(){return 0},apply(n,t){return n.scrolledIntoView?t+1:t}})];class Au{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=LN.slice(),e&&e.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ms(r.key,r.spec.state,r))})}}class bi{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=e){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],r=this.applyInner(t),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,c=i?i[s].state:this,u=l<e.length&&a.spec.appendTransaction.call(a,l?e.slice(l):e,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",t),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:e.length}:{state:this,n:0})}e.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:e.length})}}if(!o)return{state:r,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new bi(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];e[o.name]=o.apply(t,this[o.name],this,e)}return e}get tr(){return new RN(this)}static create(t){let e=new Au(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new bi(e);for(let i=0;i<e.fields.length;i++)r[e.fields[i].name]=e.fields[i].init(t,r);return r}reconfigure(t){let e=new Au(this.schema,t.plugins),r=e.fields,i=new bi(e);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(t,i)}return i}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],o=i.spec.state;o&&o.toJSON&&(e[r]=o.toJSON.call(i,this[i.key]))}return e}static fromJSON(t,e,r){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new Au(t.schema,t.plugins),o=new bi(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=Cr.fromJSON(t.schema,e.doc);else if(s.name=="selection")o.selection=le.fromJSON(o.doc,e.selection);else if(s.name=="storedMarks")e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(e,a)){o[s.name]=c.fromJSON.call(l,t,e[a],o);return}}o[s.name]=s.init(t,o)}}),o}}function Tk(n,t,e){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=Tk(i,t,{})),e[r]=i}return e}class et{constructor(t){this.spec=t,this.props={},t.props&&Tk(t.props,this,this.props),this.key=t.key?t.key.key:Mk("plugin")}getState(t){return t[this.key]}}const Ou=Object.create(null);function Mk(n){return n in Ou?n+"$"+ ++Ou[n]:(Ou[n]=0,n+"$")}class tt{constructor(t="key"){this.key=Mk(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Bf=(n,t)=>n.selection.empty?!1:(t&&t(n.tr.deleteSelection().scrollIntoView()),!0);function Ak(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("backward",n):e.parentOffset>0)?null:e}const Ok=(n,t,e)=>{let r=Ak(n,e);if(!r)return!1;let i=zf(r);if(!i){let s=r.blockRange(),a=s&&Zl(s);return a==null?!1:(t&&t(n.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(Rk(n,i,t,-1))return!0;if(r.parent.content.size==0&&(Bo(o,"end")||re.isSelectable(o)))for(let s=r.depth;;s--){let a=ec(n.doc,r.before(s),r.after(s),G.empty);if(a&&a.slice.size<a.to-a.from){if(t){let l=n.tr.step(a);l.setSelection(Bo(o,"end")?le.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):re.create(l.doc,i.pos-o.nodeSize)),t(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(t&&t(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},PN=(n,t,e)=>{let r=Ak(n,e);if(!r)return!1;let i=zf(r);return i?BN(n,i,t):!1};function BN(n,t,e){let r=t.nodeBefore,i=r,o=t.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let s=t.nodeAfter,a=s,l=t.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=ec(n.doc,o,l,G.empty);if(!c||c.from!=o||c instanceof ft&&c.slice.size>=l-o)return!1;if(e){let u=n.tr.step(c);u.setSelection(ce.create(u.doc,o)),e(u.scrollIntoView())}return!0}function Bo(n,t,e=!1){for(let r=n;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(e&&r.childCount!=1)return!1}return!1}const Ik=(n,t,e)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(e?!e.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=zf(r)}let s=o&&o.nodeBefore;return!s||!re.isSelectable(s)?!1:(t&&t(n.tr.setSelection(re.create(n.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function zf(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){if(n.index(t)>0)return n.doc.resolve(n.before(t+1));if(n.node(t).type.spec.isolating)break}return null}function zN(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("forward",n):e.parentOffset<e.parent.content.size)?null:e}const FN=(n,t,e)=>{let r=zN(n,e);if(!r)return!1;let i=Dk(r);if(!i)return!1;let o=i.nodeAfter;if(Rk(n,i,t,1))return!0;if(r.parent.content.size==0&&(Bo(o,"start")||re.isSelectable(o))){let s=ec(n.doc,r.before(),r.after(),G.empty);if(s&&s.slice.size<s.to-s.from){if(t){let a=n.tr.step(s);a.setSelection(Bo(o,"start")?le.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):re.create(a.doc,a.mapping.map(i.pos))),t(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(t&&t(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},$N=(n,t,e)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(e?!e.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=Dk(r)}let s=o&&o.nodeAfter;return!s||!re.isSelectable(s)?!1:(t&&t(n.tr.setSelection(re.create(n.doc,o.pos)).scrollIntoView()),!0)};function Dk(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){let e=n.node(t);if(n.index(t)+1<e.childCount)return n.doc.resolve(n.after(t+1));if(e.type.spec.isolating)break}return null}const HN=(n,t)=>{let{$head:e,$anchor:r}=n.selection;return!e.parent.type.spec.code||!e.sameParent(r)?!1:(t&&t(n.tr.insertText(`
`).scrollIntoView()),!0)};function Ff(n){for(let t=0;t<n.edgeCount;t++){let{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const UN=(n,t)=>{let{$head:e,$anchor:r}=n.selection;if(!e.parent.type.spec.code||!e.sameParent(r))return!1;let i=e.node(-1),o=e.indexAfter(-1),s=Ff(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(t){let a=e.after(),l=n.tr.replaceWith(a,a,s.createAndFill());l.setSelection(le.near(l.doc.resolve(a),1)),t(l.scrollIntoView())}return!0},qN=(n,t)=>{let e=n.selection,{$from:r,$to:i}=e;if(e instanceof jt||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Ff(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(s,o.createAndFill());a.setSelection(ce.create(a.doc,s+1)),t(a.scrollIntoView())}return!0},WN=(n,t)=>{let{$cursor:e}=n.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let o=e.before();if(_s(n.doc,o))return t&&t(n.tr.split(o).scrollIntoView()),!0}let r=e.blockRange(),i=r&&Zl(r);return i==null?!1:(t&&t(n.tr.lift(r,i).scrollIntoView()),!0)};function KN(n){return(t,e)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof re&&t.selection.node.isBlock)return!r.parentOffset||!_s(t.doc,r.pos)?!1:(e&&e(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],s,a,l=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){l=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),a=Ff(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),o.unshift(l&&a?{type:a}:null),s=h;break}else{if(h==1)return!1;o.unshift(null)}let u=t.tr;(t.selection instanceof ce||t.selection instanceof jt)&&u.deleteSelection();let d=u.mapping.map(r.pos),f=_s(u.doc,d,o.length,o);if(f||(o[0]=a?{type:a}:null,f=_s(u.doc,d,o.length,o)),!f)return!1;if(u.split(d,o.length,o),!l&&c&&r.node(s).type!=a){let h=u.mapping.map(r.before(s)),p=u.doc.resolve(h);a&&r.node(s-1).canReplaceWith(p.index(),p.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(s)),a)}return e&&e(u.scrollIntoView()),!0}}const VN=KN(),YN=(n,t)=>(t&&t(n.tr.setSelection(new jt(n.doc))),!0);function GN(n,t,e){let r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(o-1,o)?(e&&e(n.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(i.isTextblock||Ql(n.doc,t.pos))?!1:(e&&e(n.tr.join(t.pos).scrollIntoView()),!0)}function Rk(n,t,e,r){let i=t.nodeBefore,o=t.nodeAfter,s,a,l=i.type.spec.isolating||o.type.spec.isolating;if(!l&&GN(n,t,e))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(s=(a=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&a.matchType(s[0]||o.type).validEnd){if(e){let h=t.pos+o.nodeSize,p=B.empty;for(let k=s.length-1;k>=0;k--)p=B.from(s[k].create(null,p));p=B.from(i.copy(p));let g=n.tr.step(new Tt(t.pos-1,h,t.pos,h,new G(p,1,0),s.length,!0)),y=g.doc.resolve(h+2*s.length);y.nodeAfter&&y.nodeAfter.type==i.type&&Ql(g.doc,y.pos)&&g.join(y.pos),e(g.scrollIntoView())}return!0}let u=o.type.spec.isolating||r>0&&l?null:le.findFrom(t,1),d=u&&u.$from.blockRange(u.$to),f=d&&Zl(d);if(f!=null&&f>=t.depth)return e&&e(n.tr.lift(d,f).scrollIntoView()),!0;if(c&&Bo(o,"start",!0)&&Bo(i,"end")){let h=i,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let g=o,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(h.canReplace(h.childCount,h.childCount,g.content)){if(e){let k=B.empty;for(let E=p.length-1;E>=0;E--)k=B.from(p[E].copy(k));let v=n.tr.step(new Tt(t.pos-p.length,t.pos+o.nodeSize,t.pos+y,t.pos+o.nodeSize-y,new G(k,p.length,0),0,!0));e(v.scrollIntoView())}return!0}}return!1}function Lk(n){return function(t,e){let r=t.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(e&&e(t.tr.setSelection(ce.create(t.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const jN=Lk(-1),JN=Lk(1);function $f(n,t=null){return function(e,r){let{$from:i,$to:o}=e.selection,s=i.blockRange(o),a=s&&Lf(s,n,t);return a?(r&&r(e.tr.wrap(s,a).scrollIntoView()),!0):!1}}function qs(n,t=null){return function(e,r){let i=!1;for(let o=0;o<e.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=e.selection.ranges[o];e.doc.nodesBetween(s,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(n,t)))if(l.type==n)i=!0;else{let u=e.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,n)}})}if(!i)return!1;if(r){let o=e.tr;for(let s=0;s<e.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=e.selection.ranges[s];o.setBlockType(a,l,n,t)}r(o.scrollIntoView())}return!0}}function XN(n,t,e,r){for(let i=0;i<t.length;i++){let{$from:o,$to:s}=t[i],a=o.depth==0?n.inlineContent&&n.type.allowsMarkType(e):!1;if(n.nodesBetween(o.pos,s.pos,(l,c)=>{if(a)return!1;a=l.inlineContent&&l.type.allowsMarkType(e)}),a)return!0}return!1}function nc(n,t=null,e){return function(r,i){let{empty:o,$cursor:s,ranges:a}=r.selection;if(o&&!s||!XN(r.doc,a,n))return!1;if(i)if(s)n.isInSet(r.storedMarks||s.marks())?i(r.tr.removeStoredMark(n)):i(r.tr.addStoredMark(n.create(t)));else{let l,c=r.tr;l=!a.some(u=>r.doc.rangeHasMark(u.$from.pos,u.$to.pos,n));for(let u=0;u<a.length;u++){let{$from:d,$to:f}=a[u];if(!l)c.removeMark(d.pos,f.pos,n);else{let h=d.pos,p=f.pos,g=d.nodeAfter,y=f.nodeBefore,k=g&&g.isText?/^\s*/.exec(g.text)[0].length:0,v=y&&y.isText?/\s*$/.exec(y.text)[0].length:0;h+k<p&&(h+=k,p-=v),c.addMark(h,p,n.create(t))}}i(c.scrollIntoView())}return!0}}function Ho(...n){return function(t,e,r){for(let i=0;i<n.length;i++)if(n[i](t,e,r))return!0;return!1}}let Iu=Ho(Bf,Ok,Ik),vg=Ho(Bf,FN,$N);const hr={Enter:Ho(HN,qN,WN,VN),"Mod-Enter":UN,Backspace:Iu,"Mod-Backspace":Iu,"Shift-Backspace":Iu,Delete:vg,"Mod-Delete":vg,"Mod-a":YN},Pk={"Ctrl-h":hr.Backspace,"Alt-Backspace":hr["Mod-Backspace"],"Ctrl-d":hr.Delete,"Ctrl-Alt-Backspace":hr["Mod-Delete"],"Alt-Delete":hr["Mod-Delete"],"Alt-d":hr["Mod-Delete"],"Ctrl-a":jN,"Ctrl-e":JN};for(let n in hr)Pk[n]=hr[n];const ZN=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,QN=ZN?Pk:hr;class hn{constructor(t,e,r={}){this.match=t,this.match=t,this.handler=typeof e=="string"?eT(e):e,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1,this.inCodeMark=r.inCodeMark!==!1}}function eT(n){return function(t,e,r,i){let o=n;if(e[1]){let s=e[0].lastIndexOf(e[1]);o+=e[0].slice(s+e[1].length),r+=s;let a=r-i;a>0&&(o=e[0].slice(s-a,s)+o,r=i)}return t.tr.insertText(o,r,i)}}const tT=(n,t)=>{let e=n.plugins;for(let r=0;r<e.length;r++){let i=e[r],o;if(i.spec.isInputRules&&(o=i.getState(n))){if(t){let s=n.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l--)s.step(a.steps[l].invert(a.docs[l]));if(o.text){let l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,n.schema.text(o.text,l))}else s.delete(o.from,o.to);t(s)}return!0}}return!1};new hn(/--$/,"—",{inCodeMark:!1});new hn(/\.\.\.$/,"…",{inCodeMark:!1});new hn(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“",{inCodeMark:!1});new hn(/"$/,"”",{inCodeMark:!1});new hn(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘",{inCodeMark:!1});new hn(/'$/,"’",{inCodeMark:!1});function Hf(n,t,e=null,r){return new hn(n,(i,o,s,a)=>{let l=e instanceof Function?e(o):e,c=i.tr.delete(s,a),u=c.doc.resolve(s),d=u.blockRange(),f=d&&Lf(d,t,l);if(!f)return null;c.wrap(d,f);let h=c.doc.resolve(s-1).nodeBefore;return h&&h.type==t&&Ql(c.doc,s-1)&&(!r||r(o,h))&&c.join(s-1),c})}function Bk(n,t,e=null){return new hn(n,(r,i,o,s)=>{let a=r.doc.resolve(o),l=e instanceof Function?e(i):e;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t)?r.tr.delete(o,s).setBlockType(o,o,t,l):null})}const ei=typeof navigator<"u"?navigator:null,_g=typeof document<"u"?document:null,ri=ei&&ei.userAgent||"",zd=/Edge\/(\d+)/.exec(ri),zk=/MSIE \d/.exec(ri),Fd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ri),rc=!!(zk||Fd||zd),nT=zk?document.documentMode:Fd?+Fd[1]:zd?+zd[1]:0,Fk=!rc&&/gecko\/(\d+)/i.test(ri),rT=Fk&&+(/Firefox\/(\d+)/.exec(ri)||[0,0])[1],$d=!rc&&/Chrome\/(\d+)/.exec(ri),iT=!!$d,oT=$d?+$d[1]:0,$k=!rc&&!!ei&&/Apple Computer/.test(ei.vendor),Hk=$k&&(/Mobile\/\w+/.test(ri)||!!ei&&ei.maxTouchPoints>2),sT=Hk||(ei?/Mac/.test(ei.platform):!1),aT=/Android \d/.test(ri),Uk=!!_g&&"webkitFontSmoothing"in _g.documentElement.style,lT=Uk?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;var Va=Object.freeze({__proto__:null,android:aT,chrome:iT,chrome_version:oT,gecko:Fk,gecko_version:rT,ie:rc,ie_version:nT,ios:Hk,mac:sT,safari:$k,webkit:Uk,webkit_version:lT});function Du(n,t,e,r,i,o){if(n.composing)return!1;const s=n.state,a=s.doc.resolve(t);if(a.parent.type.spec.code)return!1;const l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,void 0,"￼")+r;for(let c of i){const u=c,d=u.match.exec(l),f=d&&d[0]&&u.handler(s,d,t-(d[0].length-r.length),e);if(f)return u.undoable!==!1&&f.setMeta(o,{transform:f,from:t,to:e,text:r}),n.dispatch(f),!0}return!1}const cT=new tt("MILKDOWN_CUSTOM_INPUTRULES");function uT({rules:n}){const t=new et({key:cT,isInputRules:!0,state:{init(){return null},apply(e,r){const i=e.getMeta(this);return i||(e.selectionSet||e.docChanged?null:r)}},props:{handleTextInput(e,r,i,o){return Du(e,r,i,o,n,t)},handleDOMEvents:{compositionend:e=>(setTimeout(()=>{const{$cursor:r}=e.state.selection;r&&Du(e,r.pos,r.pos,"",n,t)}),!1)},handleKeyDown(e,r){if(r.key!=="Enter")return!1;const{$cursor:i}=e.state.selection;return i?Du(e,i.pos,i.pos,`
`,n,t):!1}}});return t}function fa(n,t,e={}){return new hn(n,(r,i,o,s)=>{var a,l,c,u;const{tr:d}=r,f=i.length;let h=i[f-1],p=i[0],g=[],y=s;const k={group:h,fullMatch:p,start:o,end:s},v=(a=e.updateCaptured)==null?void 0:a.call(e,k);if(Object.assign(k,v),{group:h,fullMatch:p,start:o,end:s}=k,p===null||(h==null?void 0:h.trim())==="")return null;if(h){const E=p.search(/\S/),R=o+p.indexOf(h),A=R+h.length;g=(l=d.storedMarks)!=null?l:[],A<s&&d.delete(A,s),R>o&&d.delete(o+E,R),y=o+E+h.length;const w=(c=e.getAttr)==null?void 0:c.call(e,i);d.addMark(o,y,t.create(w)),d.setStoredMarks(g),(u=e.beforeDispatch)==null||u.call(e,{match:i,start:o,end:s,tr:d})}return d})}function qk(n){return Object.assign(Object.create(n),n).setTime(Date.now())}function dT(n,t){return Array.isArray(n)&&n.includes(t.type)||t.type===n}function Wk(n){if(n.content.childCount===1){const t=n.content.firstChild;if((t==null?void 0:t.type.name)==="text"&&t.marks.length===0)return t;if((t==null?void 0:t.type.name)==="paragraph"&&t.childCount===1){const e=t.firstChild;if((e==null?void 0:e.type.name)==="text"&&e.marks.length===0)return e}}return!1}function Kk(n){return t=>{for(let e=t.depth;e>0;e-=1){const r=t.node(e);if(n(r)){const i=t.before(e),o=t.after(e);return{from:i,to:o,node:r}}}}}function fT(n,t){return Kk(e=>e.type===t)(n)}function hT(n,t){const e=t.nodes[n];if(!e)throw nS("node",n);return e}function pT(n){return t=>{for(let e=t.depth;e>0;e--){const r=t.node(e);if(n(r))return{pos:e>0?t.before(e):0,start:t.start(e),depth:e,node:r}}}}function mT(n,t){if(!(n instanceof re))return;const{node:e,$from:r}=n;if(dT(t,e))return{node:e,pos:r.pos,start:r.start(r.depth),depth:r.depth}}const gT=(n,t)=>{const{selection:e,doc:r}=n;if(e instanceof re)return{hasNode:e.node.type===t,pos:e.from,target:e.node};const{from:i,to:o}=e;let s=!1,a=-1,l=null;return r.nodesBetween(i,o,(c,u)=>l?!1:c.type===t?(s=!0,a=u,l=c,!1):!0),{hasNode:s,pos:a,target:l}};var ti={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ol={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},bT=typeof navigator<"u"&&/Mac/.test(navigator.platform),yT=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var wt=0;wt<10;wt++)ti[48+wt]=ti[96+wt]=String(wt);for(var wt=1;wt<=24;wt++)ti[wt+111]="F"+wt;for(var wt=65;wt<=90;wt++)ti[wt]=String.fromCharCode(wt+32),Ol[wt]=String.fromCharCode(wt);for(var Ru in ti)Ol.hasOwnProperty(Ru)||(Ol[Ru]=ti[Ru]);function kT(n){var t=bT&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||yT&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",e=!t&&n.key||(n.shiftKey?Ol:ti)[n.keyCode]||n.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}const wT=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),xT=typeof navigator<"u"&&/Win/.test(navigator.platform);function ET(n){let t=n.split(/-(?!$)/),e=t[t.length-1];e=="Space"&&(e=" ");let r,i,o,s;for(let a=0;a<t.length-1;a++){let l=t[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))wT?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(e="Alt-"+e),i&&(e="Ctrl-"+e),s&&(e="Meta-"+e),o&&(e="Shift-"+e),e}function CT(n){let t=Object.create(null);for(let e in n)t[ET(e)]=n[e];return t}function Lu(n,t,e=!0){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),e&&t.shiftKey&&(n="Shift-"+n),n}function ST(n){return new et({props:{handleKeyDown:Uf(n)}})}function Uf(n){let t=CT(n);return function(e,r){let i=kT(r),o,s=t[Lu(i,r)];if(s&&s(e.state,e.dispatch,e))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=t[Lu(i,r,!1)];if(a&&a(e.state,e.dispatch,e))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(xT&&r.ctrlKey&&r.altKey)&&(o=ti[r.keyCode])&&o!=i){let a=t[Lu(o,r)];if(a&&a(e.state,e.dispatch,e))return!0}}return!1}}const xt=function(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t},zo=function(n){let t=n.assignedSlot||n.parentNode;return t&&t.nodeType==11?t.host:t};let Hd=null;const fr=function(n,t,e){let r=Hd||(Hd=document.createRange());return r.setEnd(n,e??n.nodeValue.length),r.setStart(n,t||0),r},vT=function(){Hd=null},Wi=function(n,t,e,r){return e&&(Ng(n,t,e,r,-1)||Ng(n,t,e,r,1))},_T=/^(img|br|input|textarea|hr)$/i;function Ng(n,t,e,r,i){for(var o;;){if(n==e&&t==r)return!0;if(t==(i<0?0:xn(n))){let s=n.parentNode;if(!s||s.nodeType!=1||ha(n)||_T.test(n.nodeName)||n.contentEditable=="false")return!1;t=xt(n)+(i<0?0:1),n=s}else if(n.nodeType==1){let s=n.childNodes[t+(i<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((o=s.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)t+=i;else return!1;else n=s,t=i<0?xn(n):0}else return!1}}function xn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function NT(n,t){for(;;){if(n.nodeType==3&&t)return n;if(n.nodeType==1&&t>0){if(n.contentEditable=="false")return null;n=n.childNodes[t-1],t=xn(n)}else if(n.parentNode&&!ha(n))t=xt(n),n=n.parentNode;else return null}}function TT(n,t){for(;;){if(n.nodeType==3&&t<n.nodeValue.length)return n;if(n.nodeType==1&&t<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[t],t=0}else if(n.parentNode&&!ha(n))t=xt(n)+1,n=n.parentNode;else return null}}function MT(n,t,e){for(let r=t==0,i=t==xn(n);r||i;){if(n==e)return!0;let o=xt(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==xn(n)}}function ha(n){let t;for(let e=n;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==n||t.contentDOM==n)}const ic=function(n){return n.focusNode&&Wi(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function gi(n,t){let e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=n,e.key=e.code=t,e}function AT(n){let t=n.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function OT(n,t,e){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(t,e);if(r)return{node:r.offsetNode,offset:Math.min(xn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(t,e);if(r)return{node:r.startContainer,offset:Math.min(xn(r.startContainer),r.startOffset)}}}const Qn=typeof navigator<"u"?navigator:null,Tg=typeof document<"u"?document:null,ii=Qn&&Qn.userAgent||"",Ud=/Edge\/(\d+)/.exec(ii),Vk=/MSIE \d/.exec(ii),qd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ii),Jt=!!(Vk||qd||Ud),jr=Vk?document.documentMode:qd?+qd[1]:Ud?+Ud[1]:0,En=!Jt&&/gecko\/(\d+)/i.test(ii);En&&+(/Firefox\/(\d+)/.exec(ii)||[0,0])[1];const Wd=!Jt&&/Chrome\/(\d+)/.exec(ii),Nt=!!Wd,Yk=Wd?+Wd[1]:0,Lt=!Jt&&!!Qn&&/Apple Computer/.test(Qn.vendor),Fo=Lt&&(/Mobile\/\w+/.test(ii)||!!Qn&&Qn.maxTouchPoints>2),kn=Fo||(Qn?/Mac/.test(Qn.platform):!1),IT=Qn?/Win/.test(Qn.platform):!1,xr=/Android \d/.test(ii),pa=!!Tg&&"webkitFontSmoothing"in Tg.documentElement.style,DT=pa?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function RT(n){let t=n.defaultView&&n.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function cr(n,t){return typeof n=="number"?n:n[t]}function LT(n){let t=n.getBoundingClientRect(),e=t.width/n.offsetWidth||1,r=t.height/n.offsetHeight||1;return{left:t.left,right:t.left+n.clientWidth*e,top:t.top,bottom:t.top+n.clientHeight*r}}function Mg(n,t,e){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let s=e||n.dom;s;){if(s.nodeType!=1){s=zo(s);continue}let a=s,l=a==o.body,c=l?RT(o):LT(a),u=0,d=0;if(t.top<c.top+cr(r,"top")?d=-(c.top-t.top+cr(i,"top")):t.bottom>c.bottom-cr(r,"bottom")&&(d=t.bottom-t.top>c.bottom-c.top?t.top+cr(i,"top")-c.top:t.bottom-c.bottom+cr(i,"bottom")),t.left<c.left+cr(r,"left")?u=-(c.left-t.left+cr(i,"left")):t.right>c.right-cr(r,"right")&&(u=t.right-c.right+cr(i,"right")),u||d)if(l)o.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let g=a.scrollLeft-h,y=a.scrollTop-p;t={left:t.left-g,top:t.top-y,right:t.right-g,bottom:t.bottom-y}}let f=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(f))break;s=f=="absolute"?s.offsetParent:zo(s)}}function PT(n){let t=n.dom.getBoundingClientRect(),e=Math.max(0,t.top),r,i;for(let o=(t.left+t.right)/2,s=e+1;s<Math.min(innerHeight,t.bottom);s+=5){let a=n.root.elementFromPoint(o,s);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=e-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:Gk(n.dom)}}function Gk(n){let t=[],e=n.ownerDocument;for(let r=n;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=e);r=zo(r));return t}function BT({refDOM:n,refTop:t,stack:e}){let r=n?n.getBoundingClientRect().top:0;jk(e,r==0?0:r-t)}function jk(n,t){for(let e=0;e<n.length;e++){let{dom:r,top:i,left:o}=n[e];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Qi=null;function zT(n){if(n.setActive)return n.setActive();if(Qi)return n.focus(Qi);let t=Gk(n);n.focus(Qi==null?{get preventScroll(){return Qi={preventScroll:!0},!0}}:void 0),Qi||(Qi=!1,jk(t,0))}function Jk(n,t){let e,r=2e8,i,o=0,s=t.top,a=t.top,l,c;for(let u=n.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=fr(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);let g=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(g<r){e=u,r=g,i=g&&e.nodeType==3?{left:p.right<t.left?p.right:p.left,top:t.top}:t,u.nodeType==1&&g&&(o=d+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!l&&p.left<=t.left&&p.right>=t.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!e&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(o=d+1)}}return!e&&l&&(e=l,i=c,r=0),e&&e.nodeType==3?FT(e,i):!e||r&&e.nodeType==1?{node:n,offset:o}:Jk(e,i)}function FT(n,t){let e=n.nodeValue.length,r=document.createRange();for(let i=0;i<e;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=Lr(r,1);if(o.top!=o.bottom&&qf(t,o))return{node:n,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function qf(n,t){return n.left>=t.left-1&&n.left<=t.right+1&&n.top>=t.top-1&&n.top<=t.bottom+1}function $T(n,t){let e=n.parentNode;return e&&/^li$/i.test(e.nodeName)&&t.left<n.getBoundingClientRect().left?e:n}function HT(n,t,e){let{node:r,offset:i}=Jk(t,e),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&e.left>(s.left+s.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function UT(n,t,e,r){let i=-1;for(let o=t,s=!1;o!=n.dom;){let a=n.docView.nearestDesc(o,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&l.left>r.left||l.top>r.top?i=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return i>-1?i:n.docView.posFromDOM(t,e,-1)}function Xk(n,t,e){let r=n.childNodes.length;if(r&&e.top<e.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-e.top)/(e.bottom-e.top))-2)),o=i;;){let s=n.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(qf(t,c))return Xk(s,t,c)}}if((o=(o+1)%r)==i)break}return n}function qT(n,t){let e=n.dom.ownerDocument,r,i=0,o=OT(e,t.left,t.top);o&&({node:r,offset:i}=o);let s=(n.root.elementFromPoint?n.root:e).elementFromPoint(t.left,t.top),a;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=n.dom.getBoundingClientRect();if(!qf(t,c)||(s=Xk(n.dom,t,c),!s))return null}if(Lt)for(let c=s;r&&c;c=zo(c))c.draggable&&(r=void 0);if(s=$T(s,t),r){if(En&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}let c;pa&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=t.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=UT(n,r,i,t))}a==null&&(a=HT(n,s,t));let l=n.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Ag(n){return n.top<n.bottom||n.left<n.right}function Lr(n,t){let e=n.getClientRects();if(e.length){let r=e[t<0?0:e.length-1];if(Ag(r))return r}return Array.prototype.find.call(e,Ag)||n.getBoundingClientRect()}const WT=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Zk(n,t,e){let{node:r,offset:i,atom:o}=n.docView.domFromPos(t,e<0?-1:1),s=pa||En;if(r.nodeType==3)if(s&&(WT.test(r.nodeValue)||(e<0?!i:i==r.nodeValue.length))){let l=Lr(fr(r,i,i),e);if(En&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Lr(fr(r,i-1,i-1),-1);if(c.top==l.top){let u=Lr(fr(r,i,i+1),-1);if(u.top!=l.top)return ns(u,u.left<c.left)}}return l}else{let l=i,c=i,u=e<0?1:-1;return e<0&&!i?(c++,u=-1):e>=0&&i==r.nodeValue.length?(l--,u=1):e<0?l--:c++,ns(Lr(fr(r,l,c),u),u<0)}if(!n.state.doc.resolve(t-(o||0)).parent.inlineContent){if(o==null&&i&&(e<0||i==xn(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Pu(l.getBoundingClientRect(),!1)}if(o==null&&i<xn(r)){let l=r.childNodes[i];if(l.nodeType==1)return Pu(l.getBoundingClientRect(),!0)}return Pu(r.getBoundingClientRect(),e>=0)}if(o==null&&i&&(e<0||i==xn(r))){let l=r.childNodes[i-1],c=l.nodeType==3?fr(l,xn(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return ns(Lr(c,1),!1)}if(o==null&&i<xn(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?fr(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return ns(Lr(c,-1),!0)}return ns(Lr(r.nodeType==3?fr(r):r,-e),e>=0)}function ns(n,t){if(n.width==0)return n;let e=t?n.left:n.right;return{top:n.top,bottom:n.bottom,left:e,right:e}}function Pu(n,t){if(n.height==0)return n;let e=t?n.top:n.bottom;return{top:e,bottom:e,left:n.left,right:n.right}}function Qk(n,t,e){let r=n.state,i=n.root.activeElement;r!=t&&n.updateState(t),i!=n.dom&&n.focus();try{return e()}finally{r!=t&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function KT(n,t,e){let r=t.selection,i=e=="up"?r.$from:r.$to;return Qk(n,t,()=>{let{node:o}=n.docView.domFromPos(i.pos,e=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=Zk(n,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=fr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(e=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const VT=/[\u0590-\u08ac]/;function YT(n,t,e){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=n.domSelection();return a?!VT.test(r.parent.textContent)||!a.modify?e=="left"||e=="backward"?o:s:Qk(n,t,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=n.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",e,"character");let h=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:g}=n.domSelectionRange(),y=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),y}):r.pos==r.start()||r.pos==r.end()}let Og=null,Ig=null,Dg=!1;function GT(n,t,e){return Og==t&&Ig==e?Dg:(Og=t,Ig=e,Dg=e=="up"||e=="down"?KT(n,t,e):YT(n,t,e))}const Cn=0,Rg=1,yi=2,er=3;class ma{constructor(t,e,r,i){this.parent=t,this.children=e,this.dom=r,this.contentDOM=i,this.dirty=Cn,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,r=this.posAtStart;;e++){let i=this.children[e];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let o,s;if(t==this.contentDOM)o=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(t==this.contentDOM)o=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=e>xt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(e==0)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&e==t.childNodes.length)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let r=!0,i=t;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!e||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(t.nodeType==1?t:t.parentNode):s==t))r=!1;else return o}}getDesc(t){let e=t.pmViewDesc;for(let r=e;r;r=r.parent)if(r==this)return e}posFromDOM(t,e,r){for(let i=t;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(t,e,r)}return-1}descAt(t){for(let e=0,r=0;e<this.children.length;e++){let i=this.children[e],o=r+i.size;if(r==t&&o!=r){for(;!i.border&&i.children.length;)for(let s=0;s<i.children.length;s++){let a=i.children[s];if(a.size){i=a;break}}return i}if(t<o)return i.descAt(t-r-i.border);r=o}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>t||s instanceof tw){i=t-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,e);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof ew&&o.side>=0;r--);if(e<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&e&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,e):{node:this.contentDOM,offset:o?xt(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,e):{node:this.contentDOM,offset:o?xt(o.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(i==-1&&t<=c){let u=s+l.border;if(t>=u&&e<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(t,e,u);t=s;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=xt(f.dom)+1;break}t-=f.size}i==-1&&(i=0)}if(i>-1&&(c>e||a==this.children.length-1)){e=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=xt(d.dom);break}e+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:t,to:e,fromOffset:i,toOffset:o}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return e.size==0||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:r}=this.domFromPos(t,0);if(e.nodeType!=1||r==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[r]}setSelection(t,e,r,i=!1){let o=Math.min(t,e),s=Math.max(t,e);for(let h=0,p=0;h<this.children.length;h++){let g=this.children[h],y=p+g.size;if(o>p&&s<y)return g.setSelection(t-p-g.border,e-p-g.border,r,i);p=y}let a=this.domFromPos(t,t?-1:1),l=e==t?a:this.domFromPos(e,e?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((En||Lt)&&t==e){let{node:h,offset:p}=a;if(h.nodeType==3){if(d=!!(p&&h.nodeValue[p-1]==`
`),d&&p==h.nodeValue.length)for(let g=h,y;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:xt(y)+1});break}let k=g.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{let g=h.childNodes[p-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(En&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&Lt)&&Wi(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Wi(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||t==e)&&!(d&&En)){c.collapse(a.node,a.offset);try{t!=e&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(t>e){let p=a;a=l,l=p}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?t<=s&&e>=r:t<s&&e>r){let a=r+o.border,l=s-o.border;if(t>=a&&e<=l){this.dirty=t==r||e==s?yi:Rg,t==a&&e==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=er:o.markDirty(t-a,e-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?yi:er}r=s}this.dirty=yi}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let r=t==1?yi:Rg;e.dirty<r&&(e.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class ew extends ma{constructor(t,e,r,i){let o,s=e.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!e.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(t,[],s,null),this.widget=e,this.widget=e,o=this}matchesWidget(t){return this.dirty==Cn&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return e?e(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class jT extends ma{constructor(t,e,r,i){super(t,[],e,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Ki extends ma{constructor(t,e,r,i,o){super(t,[],r,i),this.mark=e,this.spec=o}static create(t,e,r,i){let o=i.nodeViews[e.type.name],s=o&&o(e,i,r);return(!s||!s.dom)&&(s=Nr.renderSpec(document,e.type.spec.toDOM(e,r),null,e.attrs)),new Ki(t,e,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&er||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=er&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),this.dirty!=Cn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Cn}}slice(t,e,r){let i=Ki.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;e<s&&(o=Vd(o,e,s,r)),t>0&&(o=Vd(o,0,t,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Jr extends ma{constructor(t,e,r,i,o,s,a,l,c){super(t,[],o,s),this.node=e,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(t,e,r,i,o,s){let a=o.nodeViews[e.type.name],l,c=a&&a(e,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(e.isText){if(!u)u=document.createTextNode(e.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Nr.renderSpec(document,e.type.spec.toDOM(e),null,e.attrs));!d&&!e.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),e.type.spec.draggable&&(u.draggable=!0));let f=u;return u=iw(u,r,e),c?l=new JT(t,e,r,i,u,d||null,f,c,o,s+1):e.isText?new oc(t,e,r,i,u,f,o):new Jr(t,e,r,i,u,d||null,f,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let e=this.children.length-1;e>=0;e--){let r=this.children[e];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>B.empty)}return t}matchesNode(t,e,r){return this.dirty==Cn&&t.eq(this.node)&&Il(e,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let r=this.node.inlineContent,i=e,o=t.composing?this.localCompositionInfo(t,e):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new ZT(this,s&&s.node,t);tM(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,t):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Ee.none:this.node.child(u).marks,r,t),l.placeWidget(c,t,i)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,t);let h;l.findNodeMatch(c,u,d,f)||a&&t.state.selection.from>i&&t.state.selection.to<i+c.nodeSize&&(h=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,d,h,t)||l.updateNextNode(c,u,d,t,f,i)||l.addNode(c,u,d,t,i),i+=c.nodeSize}),l.syncToMarks([],r,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==yi)&&(s&&this.protectLocalComposition(t,s),nw(this.contentDOM,this.children,t),Fo&&nM(this.dom))}localCompositionInfo(t,e){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof ce)||r<e||i>e+this.node.content.size)return null;let o=t.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,a=rM(this.node.content,s,r-e,i-e);return a<0?null:{node:o,pos:a,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:r,text:i}){if(this.getDesc(e))return;let o=e;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new jT(this,o,e,i);t.input.compositionNodes.push(s),this.children=Vd(this.children,r,r+i.length,t,s)}update(t,e,r,i){return this.dirty==er||!t.sameMarkup(this.node)?!1:(this.updateInner(t,e,r,i),!0)}updateInner(t,e,r,i){this.updateOuterDeco(e),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Cn}updateOuterDeco(t){if(Il(t,this.outerDeco))return;let e=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=rw(this.dom,this.nodeDOM,Kd(this.outerDeco,this.node,e),Kd(t,this.node,e)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Lg(n,t,e,r,i){iw(r,t,n);let o=new Jr(void 0,n,t,e,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class oc extends Jr{constructor(t,e,r,i,o,s,a){super(t,e,r,i,o,null,s,a,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,r,i){return this.dirty==er||this.dirty!=Cn&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(e),(this.dirty!=Cn||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Cn,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,r){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,e,r){let i=this.node.cut(t,e),o=document.createTextNode(i.text);return new oc(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(t,e){super.markDirty(t,e),this.dom!=this.nodeDOM&&(t==0||e==this.nodeDOM.nodeValue.length)&&(this.dirty=er)}get domAtom(){return!1}isText(t){return this.node.text==t}}class tw extends ma{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Cn&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class JT extends Jr{constructor(t,e,r,i,o,s,a,l,c,u){super(t,e,r,i,o,s,a,c,u),this.spec=l}update(t,e,r,i){if(this.dirty==er)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let o=this.spec.update(t,e,r);return o&&this.updateInner(t,e,r,i),o}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,e,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,r,i){this.spec.setSelection?this.spec.setSelection(t,e,r.root):super.setSelection(t,e,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function nw(n,t,e){let r=n.firstChild,i=!1;for(let o=0;o<t.length;o++){let s=t[o],a=s.dom;if(a.parentNode==n){for(;a!=r;)r=Pg(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(s instanceof Ki){let l=r?r.previousSibling:n.lastChild;nw(s.contentDOM,s.children,e),r=l?l.nextSibling:n.firstChild}}for(;r;)r=Pg(r),i=!0;i&&e.trackWrites==n&&(e.trackWrites=null)}const Ns=function(n){n&&(this.nodeName=n)};Ns.prototype=Object.create(null);const ki=[new Ns];function Kd(n,t,e){if(n.length==0)return ki;let r=e?ki[0]:new Ns,i=[r];for(let o=0;o<n.length;o++){let s=n[o].type.attrs;if(s){s.nodeName&&i.push(r=new Ns(s.nodeName));for(let a in s){let l=s[a];l!=null&&(e&&i.length==1&&i.push(r=new Ns(t.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function rw(n,t,e,r){if(e==ki&&r==ki)return t;let i=t;for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=n&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=ki[0]),i=l}XT(i,a||ki[0],s)}return i}function XT(n,t,e){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in e)&&n.removeAttribute(r);for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&e[r]!=t[r]&&n.setAttribute(r,e[r]);if(t.class!=e.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=e.class?e.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(t.style!=e.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)n.style.removeProperty(i[1])}e.style&&(n.style.cssText+=e.style)}}function iw(n,t,e){return rw(n,n,ki,Kd(t,e,n.nodeType!=1))}function Il(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].type.eq(t[e].type))return!1;return!0}function Pg(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}class ZT{constructor(t,e,r){this.lock=e,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=QT(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let r=t;r<e;r++)this.top.children[r].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,r){let i=0,o=this.stack.length>>1,s=Math.min(o,t.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Cn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(t[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ki.create(this.top,t[o],e,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(t,e,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(t,e,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(t,e,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,e,r,i,o){let s=this.top.children[i];return s.dirty==er&&s.dom==s.contentDOM&&(s.dirty=yi),s.update(t,e,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=e}}updateNextNode(t,e,r,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Jr){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(t.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==t.text&&l.dirty!=er&&Il(e,l.outerDeco));if(!f&&l.update(t,e,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,t,e,r,i,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=yi,d.updateChildren(i,s+1),d.dirty=Cn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,e,r,i,o,s){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content)||!Il(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let a=Jr.create(this.top,e,r,i,o,s);if(a.contentDOM){a.children=t.children,t.children=[];for(let l of a.children)l.parent=a}return t.destroy(),a}addNode(t,e,r,i,o){let s=Jr.create(this.top,t,e,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(t,e,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new ew(this.top,t,e,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof Ki;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof oc)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Lt||Nt)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new tw(this.top,[],r,null);e!=this.top?e.children.push(i):e.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function QT(n,t){let e=t,r=e.children.length,i=n.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let c=e.children[r-1];if(c instanceof Ki)e=c,r=c.children.length;else{a=c,r--;break}}else{if(e==t)break e;r=e.parent.children.indexOf(e),e=e.parent}let l=a.node;if(l){if(l!=n.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function eM(n,t){return n.type.side-t.type.side}function tM(n,t,e,r){let i=t.locals(n),o=0;if(i.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);r(u,i,t.forChild(o,u),c),o+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d;for(;s<i.length&&i[s].to==o;){let y=i[s++];y.widget&&(u?(d||(d=[u])).push(y):u=y)}if(u)if(d){d.sort(eM);for(let y=0;y<d.length;y++)e(d[y],c,!!l)}else e(u,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<n.childCount)h=c,f=n.child(c++);else break;for(let y=0;y<a.length;y++)a[y].to<=o&&a.splice(y--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let p=o+f.nodeSize;if(f.isText){let y=p;s<i.length&&i[s].from<y&&(y=i[s].from);for(let k=0;k<a.length;k++)a[k].to<y&&(y=a[k].to);y<p&&(l=f.cut(y-o),f=f.cut(0,y-o),p=y,h=-1)}else for(;s<i.length&&i[s].to<p;)s++;let g=f.isInline&&!f.isLeaf?a.filter(y=>!y.inline):a.slice();r(f,g,t.forChild(o,f),h),o=p}}function nM(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let t=n.style.cssText;n.style.cssText=t+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=t}}function rM(n,t,e,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let s=n.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<n.childCount;){let c=n.child(i++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=e){if(o>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let c=a<r?l.lastIndexOf(t,r-a-1):-1;if(c>=0&&c+t.length+a>=e)return a+c;if(e==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function Vd(n,t,e,r,i){let o=[];for(let s=0,a=0;s<n.length;s++){let l=n[s],c=a,u=a+=l.size;c>=e||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),i&&(o.push(i),i=void 0),u>e&&o.push(l.slice(e-c,l.size,r)))}return o}function Wf(n,t=null){let e=n.domSelectionRange(),r=n.state.doc;if(!e.focusNode)return null;let i=n.docView.nearestDesc(e.focusNode),o=i&&i.size==0,s=n.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(ic(e)){for(l=s;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&re.isSelectable(d)&&i.parent&&!(d.isInline&&MT(e.focusNode,e.focusOffset,i.dom))){let f=i.posBefore;c=new re(s==f?a:r.resolve(f))}}else{if(e instanceof n.dom.ownerDocument.defaultView.Selection&&e.rangeCount>1){let d=s,f=s;for(let h=0;h<e.rangeCount;h++){let p=e.getRangeAt(h);d=Math.min(d,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,s]=f==n.state.selection.anchor?[f,d]:[d,f],a=r.resolve(s)}else l=n.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=t=="pointer"||n.state.selection.head<a.pos&&!o?1:-1;c=Kf(n,u,a,d)}return c}function ow(n){return n.editable?n.hasFocus():aw(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Sr(n,t=!1){let e=n.state.selection;if(sw(n,e),!!ow(n)){if(!t&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Nt){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Wi(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)oM(n);else{let{anchor:r,head:i}=e,o,s;Bg&&!(e instanceof ce)&&(e.$from.parent.inlineContent||(o=zg(n,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(s=zg(n,e.to))),n.docView.setSelection(r,i,n,t),Bg&&(o&&Fg(o),s&&Fg(s)),e.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&iM(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Bg=Lt||Nt&&Yk<63;function zg(n,t){let{node:e,offset:r}=n.docView.domFromPos(t,0),i=r<e.childNodes.length?e.childNodes[r]:null,o=r?e.childNodes[r-1]:null;if(Lt&&i&&i.contentEditable=="false")return Bu(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return Bu(i);if(o)return Bu(o)}}function Bu(n){return n.contentEditable="true",Lt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Fg(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function iM(n){let t=n.dom.ownerDocument;t.removeEventListener("selectionchange",n.input.hideSelectionGuard);let e=n.domSelectionRange(),r=e.anchorNode,i=e.anchorOffset;t.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(e.anchorNode!=r||e.anchorOffset!=i)&&(t.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!ow(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function oM(n){let t=n.domSelection();if(!t)return;let e=n.cursorWrapper.dom,r=e.nodeName=="IMG";r?t.collapse(e.parentNode,xt(e)+1):t.collapse(e,0),!r&&!n.state.selection.visible&&Jt&&jr<=11&&(e.disabled=!0,e.disabled=!1)}function sw(n,t){if(t instanceof re){let e=n.docView.descAt(t.from);e!=n.lastSelectedViewDesc&&($g(n),e&&e.selectNode(),n.lastSelectedViewDesc=e)}else $g(n)}function $g(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Kf(n,t,e,r){return n.someProp("createSelectionBetween",i=>i(n,t,e))||ce.between(t,e,r)}function Hg(n){return n.editable&&!n.hasFocus()?!1:aw(n)}function aw(n){let t=n.domSelectionRange();if(!t.anchorNode)return!1;try{return n.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(n.editable||n.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function sM(n){let t=n.docView.domFromPos(n.state.selection.anchor,0),e=n.domSelectionRange();return Wi(t.node,t.offset,e.anchorNode,e.anchorOffset)}function Yd(n,t){let{$anchor:e,$head:r}=n.selection,i=t>0?e.max(r):e.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(t>0?i.after():i.before()):null:i;return o&&le.findFrom(o,t)}function Pr(n,t){return n.dispatch(n.state.tr.setSelection(t).scrollIntoView()),!0}function Ug(n,t,e){let r=n.state.selection;if(r instanceof ce)if(e.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=n.state.doc.resolve(i.pos+o.nodeSize*(t<0?-1:1));return Pr(n,new ce(r.$anchor,s))}else if(r.empty){if(n.endOfTextblock(t>0?"forward":"backward")){let i=Yd(n.state,t);return i&&i instanceof re?Pr(n,i):!1}else if(!(kn&&e.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=t<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=n.docView.descAt(a))&&!s.contentDOM?re.isSelectable(o)?Pr(n,new re(t<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):pa?Pr(n,new ce(n.state.doc.resolve(t<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof re&&r.node.isInline)return Pr(n,new ce(t>0?r.$to:r.$from));{let i=Yd(n.state,t);return i?Pr(n,i):!1}}}function Dl(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ts(n,t){let e=n.pmViewDesc;return e&&e.size==0&&(t<0||n.nextSibling||n.nodeName!="BR")}function eo(n,t){return t<0?aM(n):lM(n)}function aM(n){let t=n.domSelectionRange(),e=t.focusNode,r=t.focusOffset;if(!e)return;let i,o,s=!1;for(En&&e.nodeType==1&&r<Dl(e)&&Ts(e.childNodes[r],-1)&&(s=!0);;)if(r>0){if(e.nodeType!=1)break;{let a=e.childNodes[r-1];if(Ts(a,-1))i=e,o=--r;else if(a.nodeType==3)e=a,r=e.nodeValue.length;else break}}else{if(lw(e))break;{let a=e.previousSibling;for(;a&&Ts(a,-1);)i=e.parentNode,o=xt(a),a=a.previousSibling;if(a)e=a,r=Dl(e);else{if(e=e.parentNode,e==n.dom)break;r=0}}}s?Gd(n,e,r):i&&Gd(n,i,o)}function lM(n){let t=n.domSelectionRange(),e=t.focusNode,r=t.focusOffset;if(!e)return;let i=Dl(e),o,s;for(;;)if(r<i){if(e.nodeType!=1)break;let a=e.childNodes[r];if(Ts(a,1))o=e,s=++r;else break}else{if(lw(e))break;{let a=e.nextSibling;for(;a&&Ts(a,1);)o=a.parentNode,s=xt(a)+1,a=a.nextSibling;if(a)e=a,r=0,i=Dl(e);else{if(e=e.parentNode,e==n.dom)break;r=i=0}}}o&&Gd(n,o,s)}function lw(n){let t=n.pmViewDesc;return t&&t.node&&t.node.isBlock}function cM(n,t){for(;n&&t==n.childNodes.length&&!ha(n);)t=xt(n)+1,n=n.parentNode;for(;n&&t<n.childNodes.length;){let e=n.childNodes[t];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;n=e,t=0}}function uM(n,t){for(;n&&!t&&!ha(n);)t=xt(n),n=n.parentNode;for(;n&&t;){let e=n.childNodes[t-1];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;n=e,t=n.childNodes.length}}function Gd(n,t,e){if(t.nodeType!=3){let o,s;(s=cM(t,e))?(t=s,e=0):(o=uM(t,e))&&(t=o,e=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(ic(r)){let o=document.createRange();o.setEnd(t,e),o.setStart(t,e),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(t,e);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Sr(n)},50)}function qg(n,t){let e=n.state.doc.resolve(t);if(!(Nt||IT)&&e.parent.inlineContent){let i=n.coordsAtPos(t);if(t>e.start()){let o=n.coordsAtPos(t-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(t<e.end()){let o=n.coordsAtPos(t+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Wg(n,t,e){let r=n.state.selection;if(r instanceof ce&&!r.empty||e.indexOf("s")>-1||kn&&e.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(t<0?"up":"down")){let s=Yd(n.state,t);if(s&&s instanceof re)return Pr(n,s)}if(!i.parent.inlineContent){let s=t<0?i:o,a=r instanceof jt?le.near(s,t):le.findFrom(s,t);return a?Pr(n,a):!1}return!1}function Kg(n,t){if(!(n.state.selection instanceof ce))return!0;let{$head:e,$anchor:r,empty:i}=n.state.selection;if(!e.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!e.textOffset&&(t<0?e.nodeBefore:e.nodeAfter);if(o&&!o.isText){let s=n.state.tr;return t<0?s.delete(e.pos-o.nodeSize,e.pos):s.delete(e.pos,e.pos+o.nodeSize),n.dispatch(s),!0}return!1}function Vg(n,t,e){n.domObserver.stop(),t.contentEditable=e,n.domObserver.start()}function dM(n){if(!Lt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:e}=n.domSelectionRange();if(t&&t.nodeType==1&&e==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;Vg(n,r,"true"),setTimeout(()=>Vg(n,r,"false"),20)}return!1}function fM(n){let t="";return n.ctrlKey&&(t+="c"),n.metaKey&&(t+="m"),n.altKey&&(t+="a"),n.shiftKey&&(t+="s"),t}function hM(n,t){let e=t.keyCode,r=fM(t);if(e==8||kn&&e==72&&r=="c")return Kg(n,-1)||eo(n,-1);if(e==46&&!t.shiftKey||kn&&e==68&&r=="c")return Kg(n,1)||eo(n,1);if(e==13||e==27)return!0;if(e==37||kn&&e==66&&r=="c"){let i=e==37?qg(n,n.state.selection.from)=="ltr"?-1:1:-1;return Ug(n,i,r)||eo(n,i)}else if(e==39||kn&&e==70&&r=="c"){let i=e==39?qg(n,n.state.selection.from)=="ltr"?1:-1:1;return Ug(n,i,r)||eo(n,i)}else{if(e==38||kn&&e==80&&r=="c")return Wg(n,-1,r)||eo(n,-1);if(e==40||kn&&e==78&&r=="c")return dM(n)||Wg(n,1,r)||eo(n,1);if(r==(kn?"m":"c")&&(e==66||e==73||e==89||e==90))return!0}return!1}function Vf(n,t){n.someProp("transformCopied",h=>{t=h(t,n)});let e=[],{content:r,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;e.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=n.someProp("clipboardSerializer")||Nr.fromSchema(n.state.schema),a=pw(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=hw[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(e)}`);let f=n.someProp("clipboardTextSerializer",h=>h(t,n))||t.content.textBetween(0,t.content.size,`

`);return{dom:l,text:f,slice:t}}function cw(n,t,e,r,i){let o=i.parent.type.spec.code,s,a;if(!e&&!t)return null;let l=!!t&&(r||o||!e);if(l){if(n.someProp("transformPastedText",f=>{t=f(t,o||r,n)}),o)return a=new G(B.from(n.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",f=>{a=f(a,n,!0)}),a;let d=n.someProp("clipboardTextParser",f=>f(t,i,r,n));if(d)a=d;else{let f=i.marks(),{schema:h}=n.state,p=Nr.fromSchema(h);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=s.appendChild(document.createElement("p"));g&&y.appendChild(p.serializeNode(h.text(g,f)))})}}else n.someProp("transformPastedHTML",d=>{e=d(e,n)}),s=bM(e),pa&&yM(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Zr.fromSchema(n.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!pM.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=kM(Yg(a,+u[1],+u[2]),u[4]);else if(a=G.maxOpen(mM(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=Yg(a,d,f)}return n.someProp("transformPasted",d=>{a=d(a,n,l)}),a}const pM=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function mM(n,t){if(n.childCount<2)return n;for(let e=t.depth;e>=0;e--){let i=t.node(e).contentMatchAt(t.index(e)),o,s=[];if(n.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&o.length&&dw(l,o,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=fw(s[s.length-1],o.length));let u=uw(a,l);s.push(u),i=i.matchType(u.type),o=l}}),s)return B.from(s)}return n}function uw(n,t,e=0){for(let r=t.length-1;r>=e;r--)n=t[r].create(null,B.from(n));return n}function dw(n,t,e,r,i){if(i<n.length&&i<t.length&&n[i]==t[i]){let o=dw(n,t,e,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?e.type:n[i+1]))return r.copy(r.content.append(B.from(uw(e,n,i+1))))}}function fw(n,t){if(t==0)return n;let e=n.content.replaceChild(n.childCount-1,fw(n.lastChild,t-1)),r=n.contentMatchAt(n.childCount).fillBefore(B.empty,!0);return n.copy(e.append(r))}function jd(n,t,e,r,i,o){let s=t<0?n.firstChild:n.lastChild,a=s.content;return n.childCount>1&&(o=0),i<r-1&&(a=jd(a,t,e,r,i+1,o)),i>=e&&(a=t<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(B.empty,!0))),n.replaceChild(t<0?0:n.childCount-1,s.copy(a))}function Yg(n,t,e){return t<n.openStart&&(n=new G(jd(n.content,-1,t,n.openStart,0,n.openEnd),t,n.openEnd)),e<n.openEnd&&(n=new G(jd(n.content,1,e,n.openEnd,0,0),n.openStart,e)),n}const hw={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Gg=null;function pw(){return Gg||(Gg=document.implementation.createHTMLDocument("title"))}let zu=null;function gM(n){let t=window.trustedTypes;return t?(zu||(zu=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),zu.createHTML(n)):n}function bM(n){let t=/^(\s*<meta [^>]*>)*/.exec(n);t&&(n=n.slice(t[0].length));let e=pw().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&hw[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),e.innerHTML=gM(n),i)for(let o=0;o<i.length;o++)e=e.querySelector(i[o])||e;return e}function yM(n){let t=n.querySelectorAll(Nt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let e=0;e<t.length;e++){let r=t[e];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function kM(n,t){if(!n.size)return n;let e=n.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return n}let{content:i,openStart:o,openEnd:s}=n;for(let a=r.length-2;a>=0;a-=2){let l=e.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=B.from(l.create(r[a+1],i)),o++,s++}return new G(i,o,s)}const Pt={},Bt={},wM={touchstart:!0,touchmove:!0};class xM{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function EM(n){for(let t in Pt){let e=Pt[t];n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>{SM(n,r)&&!Yf(n,r)&&(n.editable||!(r.type in Bt))&&e(n,r)},wM[t]?{passive:!0}:void 0)}Lt&&n.dom.addEventListener("input",()=>null),Jd(n)}function Yr(n,t){n.input.lastSelectionOrigin=t,n.input.lastSelectionTime=Date.now()}function CM(n){n.domObserver.stop();for(let t in n.input.eventHandlers)n.dom.removeEventListener(t,n.input.eventHandlers[t]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Jd(n){n.someProp("handleDOMEvents",t=>{for(let e in t)n.input.eventHandlers[e]||n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>Yf(n,r))})}function Yf(n,t){return n.someProp("handleDOMEvents",e=>{let r=e[t.type];return r?r(n,t)||t.defaultPrevented:!1})}function SM(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target;e!=n.dom;e=e.parentNode)if(!e||e.nodeType==11||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0}function vM(n,t){!Yf(n,t)&&Pt[t.type]&&(n.editable||!(t.type in Bt))&&Pt[t.type](n,t)}Bt.keydown=(n,t)=>{let e=t;if(n.input.shiftKey=e.keyCode==16||e.shiftKey,!gw(n,e)&&(n.input.lastKeyCode=e.keyCode,n.input.lastKeyCodeTime=Date.now(),!(xr&&Nt&&e.keyCode==13)))if(e.keyCode!=229&&n.domObserver.forceFlush(),Fo&&e.keyCode==13&&!e.ctrlKey&&!e.altKey&&!e.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,gi(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,e))||hM(n,e)?e.preventDefault():Yr(n,"key")};Bt.keyup=(n,t)=>{t.keyCode==16&&(n.input.shiftKey=!1)};Bt.keypress=(n,t)=>{let e=t;if(gw(n,e)||!e.charCode||e.ctrlKey&&!e.altKey||kn&&e.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,e))){e.preventDefault();return}let r=n.state.selection;if(!(r instanceof ce)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(e.charCode),o=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i,o))&&n.dispatch(o()),e.preventDefault()}};function sc(n){return{left:n.clientX,top:n.clientY}}function _M(n,t){let e=t.x-n.clientX,r=t.y-n.clientY;return e*e+r*r<100}function Gf(n,t,e,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(n.someProp(t,a=>s>o.depth?a(n,e,o.nodeAfter,o.before(s),i,!0):a(n,e,o.node(s),o.before(s),i,!1)))return!0;return!1}function mo(n,t,e){if(n.focused||n.focus(),n.state.selection.eq(t))return;let r=n.state.tr.setSelection(t);r.setMeta("pointer",!0),n.dispatch(r)}function NM(n,t){if(t==-1)return!1;let e=n.state.doc.resolve(t),r=e.nodeAfter;return r&&r.isAtom&&re.isSelectable(r)?(mo(n,new re(e)),!0):!1}function TM(n,t){if(t==-1)return!1;let e=n.state.selection,r,i;e instanceof re&&(r=e.node);let o=n.state.doc.resolve(t);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(re.isSelectable(a)){r&&e.$from.depth>0&&s>=e.$from.depth&&o.before(e.$from.depth+1)==e.$from.pos?i=o.before(e.$from.depth):i=o.before(s);break}}return i!=null?(mo(n,re.create(n.state.doc,i)),!0):!1}function MM(n,t,e,r,i){return Gf(n,"handleClickOn",t,e,r)||n.someProp("handleClick",o=>o(n,t,r))||(i?TM(n,e):NM(n,e))}function AM(n,t,e,r){return Gf(n,"handleDoubleClickOn",t,e,r)||n.someProp("handleDoubleClick",i=>i(n,t,r))}function OM(n,t,e,r){return Gf(n,"handleTripleClickOn",t,e,r)||n.someProp("handleTripleClick",i=>i(n,t,r))||IM(n,e,r)}function IM(n,t,e){if(e.button!=0)return!1;let r=n.state.doc;if(t==-1)return r.inlineContent?(mo(n,ce.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)mo(n,ce.create(r,a+1,a+1+s.content.size));else if(re.isSelectable(s))mo(n,re.create(r,a));else continue;return!0}}function jf(n){return Rl(n)}const mw=kn?"metaKey":"ctrlKey";Pt.mousedown=(n,t)=>{let e=t;n.input.shiftKey=e.shiftKey;let r=jf(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&_M(e,n.input.lastClick)&&!e[mw]&&n.input.lastClick.button==e.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:e.clientX,y:e.clientY,type:o,button:e.button};let s=n.posAtCoords(sc(e));s&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new DM(n,s,e,!!r)):(o=="doubleClick"?AM:OM)(n,s.pos,s.inside,e)?e.preventDefault():Yr(n,"pointer"))};class DM{constructor(t,e,r,i){this.view=t,this.pos=e,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[mw],this.allowDefault=r.shiftKey;let o,s;if(e.inside>-1)o=t.state.doc.nodeAt(e.inside),s=e.inside;else{let u=t.state.doc.resolve(e.pos);o=u.parent,s=u.depth?u.before():0}const a=i?null:r.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=t.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof re&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&En&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Yr(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Sr(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(sc(t))),this.updateAllowDefault(t),this.allowDefault||!e?Yr(this.view,"pointer"):MM(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Lt&&this.mightDrag&&!this.mightDrag.node.isAtom||Nt&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(mo(this.view,le.near(this.view.state.doc.resolve(e.pos))),t.preventDefault()):Yr(this.view,"pointer")}move(t){this.updateAllowDefault(t),Yr(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Pt.touchstart=n=>{n.input.lastTouch=Date.now(),jf(n),Yr(n,"pointer")};Pt.touchmove=n=>{n.input.lastTouch=Date.now(),Yr(n,"pointer")};Pt.contextmenu=n=>jf(n);function gw(n,t){return n.composing?!0:Lt&&Math.abs(t.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const RM=xr?5e3:-1;Bt.compositionstart=Bt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:t}=n,e=t.selection.$to;if(t.selection instanceof ce&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||e.marks(),Rl(n,!0),n.markCursor=null;else if(Rl(n,!t.selection.empty),En&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let a=n.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}n.input.composing=!0}bw(n,RM)};Bt.compositionend=(n,t)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=t.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,bw(n,20))};function bw(n,t){clearTimeout(n.input.composingTimeout),t>-1&&(n.input.composingTimeout=setTimeout(()=>Rl(n),t))}function yw(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=PM());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function LM(n){let t=n.domSelectionRange();if(!t.focusNode)return null;let e=NT(t.focusNode,t.focusOffset),r=TT(t.focusNode,t.focusOffset);if(e&&r&&e!=r){let i=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(e==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let s=e.pmViewDesc;if(!(!s||!s.isText(e.nodeValue)))return r}}return e||r}function PM(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Rl(n,t=!1){if(!(xr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),yw(n),t||n.docView&&n.docView.dirty){let e=Wf(n),r=n.state.selection;return e&&!e.eq(r)?n.dispatch(n.state.tr.setSelection(e)):(n.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function BM(n,t){if(!n.dom.parentNode)return;let e=n.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),n.focus()},50)}const Ws=Jt&&jr<15||Fo&&DT<604;Pt.copy=Bt.cut=(n,t)=>{let e=t,r=n.state.selection,i=e.type=="cut";if(r.empty)return;let o=Ws?null:e.clipboardData,s=r.content(),{dom:a,text:l}=Vf(n,s);o?(e.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):BM(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function zM(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function FM(n,t){if(!n.dom.parentNode)return;let e=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),e?Ks(n,r.value,null,i,t):Ks(n,r.textContent,r.innerHTML,i,t)},50)}function Ks(n,t,e,r,i){let o=cw(n,t,e,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,i,o||G.empty)))return!0;if(!o)return!1;let s=zM(o),a=s?n.state.tr.replaceSelectionWith(s,r):n.state.tr.replaceSelection(o);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function kw(n){let t=n.getData("text/plain")||n.getData("Text");if(t)return t;let e=n.getData("text/uri-list");return e?e.replace(/\r?\n/g," "):""}Bt.paste=(n,t)=>{let e=t;if(n.composing&&!xr)return;let r=Ws?null:e.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Ks(n,kw(r),r.getData("text/html"),i,e)?e.preventDefault():FM(n,e)};class ww{constructor(t,e,r){this.slice=t,this.move=e,this.node=r}}const $M=kn?"altKey":"ctrlKey";function xw(n,t){let e=n.someProp("dragCopies",r=>!r(t));return e??!t[$M]}Pt.dragstart=(n,t)=>{let e=t,r=n.input.mouseDown;if(r&&r.done(),!e.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(sc(e)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof re?i.to-1:i.to))){if(r&&r.mightDrag)s=re.create(n.state.doc,r.mightDrag.pos);else if(e.target&&e.target.nodeType==1){let d=n.docView.nearestDesc(e.target,!0);d&&d.node.type.spec.draggable&&d!=n.docView&&(s=re.create(n.state.doc,d.posBefore))}}let a=(s||n.state.selection).content(),{dom:l,text:c,slice:u}=Vf(n,a);(!e.dataTransfer.files.length||!Nt||Yk>120)&&e.dataTransfer.clearData(),e.dataTransfer.setData(Ws?"Text":"text/html",l.innerHTML),e.dataTransfer.effectAllowed="copyMove",Ws||e.dataTransfer.setData("text/plain",c),n.dragging=new ww(u,xw(n,e),s)};Pt.dragend=n=>{let t=n.dragging;window.setTimeout(()=>{n.dragging==t&&(n.dragging=null)},50)};Bt.dragover=Bt.dragenter=(n,t)=>t.preventDefault();Bt.drop=(n,t)=>{let e=t,r=n.dragging;if(n.dragging=null,!e.dataTransfer)return;let i=n.posAtCoords(sc(e));if(!i)return;let o=n.state.doc.resolve(i.pos),s=r&&r.slice;s?n.someProp("transformPasted",p=>{s=p(s,n,!1)}):s=cw(n,kw(e.dataTransfer),Ws?null:e.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&xw(n,e));if(n.someProp("handleDrop",p=>p(n,e,s||G.empty,a))){e.preventDefault();return}if(!s)return;e.preventDefault();let l=s?_N(n.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let c=n.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&re.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new re(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,y,k,v)=>p=v),c.setSelection(Kf(n,h,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Pt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Sr(n)},20))};Pt.blur=(n,t)=>{let e=t;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),e.relatedTarget&&n.dom.contains(e.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Pt.beforeinput=(n,t)=>{if(Nt&&xr&&t.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,gi(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Bt)Pt[n]=Bt[n];function Vs(n,t){if(n==t)return!0;for(let e in n)if(n[e]!==t[e])return!1;for(let e in t)if(!(e in n))return!1;return!0}class Ll{constructor(t,e){this.toDOM=t,this.spec=e||Ii,this.side=this.spec.side||0}map(t,e,r,i){let{pos:o,deleted:s}=t.mapResult(e.from+i,this.side<0?-1:1);return s?null:new ct(o-r,o-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Ll&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Vs(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Xr{constructor(t,e){this.attrs=t,this.spec=e||Ii}map(t,e,r,i){let o=t.map(e.from+i,this.spec.inclusiveStart?-1:1)-r,s=t.map(e.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new ct(o,s,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof Xr&&Vs(this.attrs,t.attrs)&&Vs(this.spec,t.spec)}static is(t){return t.type instanceof Xr}destroy(){}}class Jf{constructor(t,e){this.attrs=t,this.spec=e||Ii}map(t,e,r,i){let o=t.mapResult(e.from+i,1);if(o.deleted)return null;let s=t.mapResult(e.to+i,-1);return s.deleted||s.pos<=o.pos?null:new ct(o.pos-r,s.pos-r,this)}valid(t,e){let{index:r,offset:i}=t.content.findIndex(e.from),o;return i==e.from&&!(o=t.child(r)).isText&&i+o.nodeSize==e.to}eq(t){return this==t||t instanceof Jf&&Vs(this.attrs,t.attrs)&&Vs(this.spec,t.spec)}destroy(){}}class ct{constructor(t,e,r){this.from=t,this.to=e,this.type=r}copy(t,e){return new ct(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,r){return this.type.map(t,this,e,r)}static widget(t,e,r){return new ct(t,t,new Ll(e,r))}static inline(t,e,r,i){return new ct(t,e,new Xr(r,i))}static node(t,e,r,i){return new ct(t,e,new Jf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Xr}get widget(){return this.type instanceof Ll}}const ro=[],Ii={};class We{constructor(t,e){this.local=t.length?t:ro,this.children=e.length?e:ro}static create(t,e){return e.length?Pl(e,t,0,Ii):vt}find(t,e,r){let i=[];return this.findInner(t??0,e??1e9,i,0,r),i}findInner(t,e,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=e&&a.to>=t&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<e&&this.children[s+1]>t){let a=this.children[s]+1;this.children[s+2].findInner(t-a,e-a,r,i+a,o)}}map(t,e,r){return this==vt||t.maps.length==0?this:this.mapInner(t,e,0,0,r||Ii)}mapInner(t,e,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(t,r,i);l&&l.type.valid(e,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?HM(this.children,s||[],t,e,r,i,o):s?new We(s.sort(Di),ro):vt}add(t,e){return e.length?this==vt?We.create(t,e):this.addInner(t,e,0):this}addInner(t,e,r){let i,o=0;t.forEach((a,l)=>{let c=l+r,u;if(u=Cw(e,a,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,u,c+1):i.splice(o,0,l,l+a.nodeSize,Pl(u,a,c+1,Ii)),o+=3}});let s=Ew(o?Sw(e):e,-r);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new We(s.length?this.local.concat(s).sort(Di):this.local,i||this.children)}remove(t){return t.length==0||this==vt?this:this.removeInner(t,0)}removeInner(t,e){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+e,l=r[o+1]+e;for(let u=0,d;u<t.length;u++)(d=t[u])&&d.from>a&&d.to<l&&(t[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,a+1);c!=vt?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<t.length;o++)if(s=t[o])for(let a=0;a<i.length;a++)i[a].eq(s,e)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new We(i,r):vt}forChild(t,e){if(this==vt)return this;if(e.isLeaf)return We.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=t){this.children[a]==t&&(r=this.children[a+2]);break}let o=t+1,s=o+e.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof Xr){let c=Math.max(o,l.from)-o,u=Math.min(s,l.to)-o;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new We(i.sort(Di),ro);return r?new Fr([a,r]):a}return r||vt}eq(t){if(this==t)return!0;if(!(t instanceof We)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return Xf(this.localsInner(t))}localsInner(t){if(this==vt)return ro;if(t.inlineContent||!this.local.some(Xr.is))return this.local;let e=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Xr||e.push(this.local[r]);return e}forEachSet(t){t(this)}}We.empty=new We([],[]);We.removeOverlap=Xf;const vt=We.empty;class Fr{constructor(t){this.members=t}map(t,e){const r=this.members.map(i=>i.map(t,e,Ii));return Fr.from(r)}forChild(t,e){if(e.isLeaf)return We.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(t,e);o!=vt&&(o instanceof Fr?r=r.concat(o.members):r.push(o))}return Fr.from(r)}eq(t){if(!(t instanceof Fr)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(t);if(o.length)if(!e)e=o;else{r&&(e=e.slice(),r=!1);for(let s=0;s<o.length;s++)e.push(o[s])}}return e?Xf(r?e:e.sort(Di)):ro}static from(t){switch(t.length){case 0:return vt;case 1:return t[0];default:return new Fr(t.every(e=>e instanceof We)?t:t.reduce((e,r)=>e.concat(r instanceof We?r:r.members),[]))}}forEachSet(t){for(let e=0;e<this.members.length;e++)this.members[e].forEachSet(t)}}function HM(n,t,e,r,i,o,s){let a=n.slice();for(let c=0,u=o;c<e.maps.length;c++){let d=0;e.maps[c].forEach((f,h,p,g)=>{let y=g-p-(h-f);for(let k=0;k<a.length;k+=3){let v=a[k+1];if(v<0||f>v+u-d)continue;let E=a[k]+u-d;h>=E?a[k+1]=f<=E?-2:-1:f>=u&&y&&(a[k]+=y,a[k+1]+=y)}d+=y}),u=e.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=e.map(n[c]+o),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=e.map(n[c+1]+o,-1),h=f-i,{index:p,offset:g}=r.content.findIndex(d),y=r.maybeChild(p);if(y&&g==d&&g+y.nodeSize==h){let k=a[c+2].mapInner(e,y,u+1,n[c]+o+1,s);k!=vt?(a[c]=d,a[c+1]=h,a[c+2]=k):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=UM(a,n,t,e,i,o,s),u=Pl(c,r,0,s);t=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new We(t.sort(Di),a)}function Ew(n,t){if(!t||!n.length)return n;let e=[];for(let r=0;r<n.length;r++){let i=n[r];e.push(new ct(i.from+t,i.to+t,i.type))}return e}function UM(n,t,e,r,i,o,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?e.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],t[l]+o+1);return e}function Cw(n,t,e){if(t.isLeaf)return null;let r=e+t.nodeSize,i=null;for(let o=0,s;o<n.length;o++)(s=n[o])&&s.from>e&&s.to<r&&((i||(i=[])).push(s),n[o]=null);return i}function Sw(n){let t=[];for(let e=0;e<n.length;e++)n[e]!=null&&t.push(n[e]);return t}function Pl(n,t,e,r){let i=[],o=!1;t.forEach((a,l)=>{let c=Cw(n,a,l+e);if(c){o=!0;let u=Pl(c,a,e+l+1,r);u!=vt&&i.push(l,l+a.nodeSize,u)}});let s=Ew(o?Sw(n):n,-e).sort(Di);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new We(s,i):vt}function Di(n,t){return n.from-t.from||n.to-t.to}function Xf(n){let t=n;for(let e=0;e<t.length-1;e++){let r=t[e];if(r.from!=r.to)for(let i=e+1;i<t.length;i++){let o=t[i];if(o.from==r.from){o.to!=r.to&&(t==n&&(t=n.slice()),t[i]=o.copy(o.from,r.to),jg(t,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(t==n&&(t=n.slice()),t[e]=r.copy(r.from,o.from),jg(t,i,r.copy(o.from,r.to)));break}}}return t}function jg(n,t,e){for(;t<n.length&&Di(e,n[t])>0;)t++;n.splice(t,0,e)}function Fu(n){let t=[];return n.someProp("decorations",e=>{let r=e(n.state);r&&r!=vt&&t.push(r)}),n.cursorWrapper&&t.push(We.create(n.state.doc,[n.cursorWrapper.deco])),Fr.from(t)}const qM={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},WM=Jt&&jr<=11;class KM{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class VM{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new KM,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Jt&&jr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),WM&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,qM)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Hg(this.view)){if(this.suppressingSelectionUpdates)return Sr(this.view);if(Jt&&jr<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Wi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e=new Set,r;for(let o=t.focusNode;o;o=zo(o))e.add(o);for(let o=t.anchorNode;o;o=zo(o))if(e.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Hg(t)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(t.editable)for(let u=0;u<e.length;u++){let d=this.registerMutation(e[u],l);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(a=!0))}if(En&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||jM(t,d)!=h)&&f.remove()}}}let c=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&ic(r)&&(c=Wf(t))&&c.eq(le.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Sr(t),this.currentSelection.set(r),t.scrollToSelection()):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,s),YM(t)),this.handleDOMChange(o,s,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Sr(t),this.currentSelection.set(r))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let u=0;u<t.addedNodes.length;u++){let d=t.addedNodes[u];e.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,o=t.nextSibling;if(Jt&&jr<=11&&t.addedNodes.length)for(let u=0;u<t.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=t.addedNodes[u];(!d||Array.prototype.indexOf.call(t.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(o=f)}let s=i&&i.parentNode==t.target?xt(i)+1:0,a=r.localPosFromDOM(t.target,s,-1),l=o&&o.parentNode==t.target?xt(o):t.target.childNodes.length,c=r.localPosFromDOM(t.target,l,1);return{from:a,to:c}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let Jg=new WeakMap,Xg=!1;function YM(n){if(!Jg.has(n)&&(Jg.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=En,Xg)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Xg=!0}}function Zg(n,t){let e=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,s=n.domAtPos(n.state.selection.anchor);return Wi(s.node,s.offset,i,o)&&([e,r,i,o]=[i,o,e,r]),{anchorNode:e,anchorOffset:r,focusNode:i,focusOffset:o}}function GM(n,t){if(t.getComposedRanges){let i=t.getComposedRanges(n.root)[0];if(i)return Zg(n,i)}let e;function r(i){i.preventDefault(),i.stopImmediatePropagation(),e=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),e?Zg(n,e):null}function jM(n,t){for(let e=t.parentNode;e&&e!=n.dom;e=e.parentNode){let r=n.docView.nearestDesc(e,!0);if(r&&r.node.isBlock)return e}return null}function JM(n,t,e){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=n.docView.parseRange(t,e),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],ic(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Nt&&n.input.lastKeyCode===8)for(let y=o;y>i;y--){let k=r.childNodes[y-1],v=k.pmViewDesc;if(k.nodeName=="BR"&&!v){o=y;break}if(!v||v.size)break}let d=n.state.doc,f=n.someProp("domParser")||Zr.fromSchema(n.state.schema),h=d.resolve(s),p=null,g=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:XM,context:h});if(c&&c[0].pos!=null){let y=c[0].pos,k=c[1]&&c[1].pos;k==null&&(k=y),p={anchor:y+s,head:k+s}}return{doc:g,sel:p,from:s,to:a}}function XM(n){let t=n.pmViewDesc;if(t)return t.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Lt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(n.parentNode.lastChild==n||Lt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ZM=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function QM(n,t,e,r,i){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,t<0){let T=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,I=Wf(n,T);if(I&&!n.state.selection.eq(I)){if(Nt&&xr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",N=>N(n,gi(13,"Enter"))))return;let F=n.state.tr.setSelection(I);T=="pointer"?F.setMeta("pointer",!0):T=="key"&&F.scrollIntoView(),o&&F.setMeta("composition",o),n.dispatch(F)}return}let s=n.state.doc.resolve(t),a=s.sharedDepth(e);t=s.before(a+1),e=n.state.doc.resolve(e).after(a+1);let l=n.state.selection,c=JM(n,t,e),u=n.state.doc,d=u.slice(c.from,c.to),f,h;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(f=n.state.selection.to,h="end"):(f=n.state.selection.from,h="start"),n.input.lastKeyCode=null;let p=nA(d.content,c.doc.content,c.from,f,h);if(p&&n.input.domChangeCount++,(Fo&&n.input.lastIOSEnter>Date.now()-225||xr)&&i.some(T=>T.nodeType==1&&!ZM.test(T.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",T=>T(n,gi(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof ce&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let T=Qg(n,n.state.doc,c.sel);if(T&&!T.eq(n.state.selection)){let I=n.state.tr.setSelection(T);o&&I.setMeta("composition",o),n.dispatch(I)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof ce&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),Jt&&jr<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),y=c.doc.resolveNoCache(p.endB-c.from),k=u.resolve(p.start),v=g.sameParent(y)&&g.parent.inlineContent&&k.end()>=p.endA;if((Fo&&n.input.lastIOSEnter>Date.now()-225&&(!v||i.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!v&&g.pos<c.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&g.pos<y.pos&&!/\S/.test(c.doc.textBetween(g.pos,y.pos,"","")))&&n.someProp("handleKeyDown",T=>T(n,gi(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&tA(u,p.start,p.endA,g,y)&&n.someProp("handleKeyDown",T=>T(n,gi(8,"Backspace")))){xr&&Nt&&n.domObserver.suppressSelectionUpdates();return}Nt&&p.endB==p.start&&(n.input.lastChromeDelete=Date.now()),xr&&!v&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,y=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(T){return T(n,gi(13,"Enter"))})},20));let E=p.start,R=p.endA,A=T=>{let I=T||n.state.tr.replace(E,R,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let F=Qg(n,I.doc,c.sel);F&&!(Nt&&n.composing&&F.empty&&(p.start!=p.endB||n.input.lastChromeDelete<Date.now()-100)&&(F.head==E||F.head==I.mapping.map(R)-1)||Jt&&F.empty&&F.head==E)&&I.setSelection(F)}return o&&I.setMeta("composition",o),I.scrollIntoView()},w;if(v){if(g.pos==y.pos){Jt&&jr<=11&&g.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Sr(n),20));let T=A(n.state.tr.delete(E,R)),I=u.resolve(p.start).marksAcross(u.resolve(p.endA));I&&T.ensureMarks(I),n.dispatch(T)}else if(p.endA==p.endB&&(w=eA(g.parent.content.cut(g.parentOffset,y.parentOffset),k.parent.content.cut(k.parentOffset,p.endA-k.start())))){let T=A(n.state.tr);w.type=="add"?T.addMark(E,R,w.mark):T.removeMark(E,R,w.mark),n.dispatch(T)}else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let T=g.parent.textBetween(g.parentOffset,y.parentOffset),I=()=>A(n.state.tr.insertText(T,E,R));n.someProp("handleTextInput",F=>F(n,E,R,T,I))||n.dispatch(I())}}else n.dispatch(A())}function Qg(n,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:Kf(n,t.resolve(e.anchor),t.resolve(e.head))}function eA(n,t){let e=n.firstChild.marks,r=t.firstChild.marks,i=e,o=r,s,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<e.length;u++)o=e[u].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<t.childCount;u++)c.push(l(t.child(u)));if(B.from(c).eq(n))return{mark:a,type:s}}function tA(n,t,e,r,i){if(e-t<=i.pos-r.pos||$u(r,!0,!1)<i.pos)return!1;let o=n.resolve(t);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&e==t+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=n.resolve($u(o,!0,!0));return!s.parent.isTextblock||s.pos>e||$u(s,!0,!1)<e?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function $u(n,t,e){let r=n.depth,i=t?n.end():n.pos;for(;r>0&&(t||n.indexAfter(r)==n.node(r).childCount);)r--,i++,t=!1;if(e){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function nA(n,t,e,r,i){let o=n.findDiffStart(t,e);if(o==null)return null;let{a:s,b:a}=n.findDiffEnd(t,e+n.size,e+t.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));r-=s+l-o}if(s<o&&n.size<t.size){let l=r<=o&&r>=s?o-r:0;o-=l,o&&o<t.size&&eb(t.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<n.size&&eb(n.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function eb(n){if(n.length!=2)return!1;let t=n.charCodeAt(0),e=n.charCodeAt(1);return t>=56320&&t<=57343&&e>=55296&&e<=56319}class vw{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new xM,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(ob),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=rb(this),nb(this),this.nodeViews=ib(this),this.docView=Lg(this.state.doc,tb(this),Fu(this),this.dom,this),this.domObserver=new VM(this,(r,i,o,s)=>QM(this,r,i,o,s)),this.domObserver.start(),EM(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Jd(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(ob),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let r in this._props)e[r]=this._props[r];e.state=this.state;for(let r in t)e[r]=t[r];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){var r;let i=this.state,o=!1,s=!1;t.storedMarks&&this.composing&&(yw(this),s=!0),this.state=t;let a=i.plugins!=t.plugins||this._props.plugins!=e.plugins;if(a||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let h=ib(this);iA(h,this.nodeViews)&&(this.nodeViews=h,o=!0)}(a||e.handleDOMEvents!=this._props.handleDOMEvents)&&Jd(this),this.editable=rb(this),nb(this);let l=Fu(this),c=tb(this),u=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(t.doc,c,l);(d||!t.selection.eq(i.selection))&&(s=!0);let f=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&PT(this);if(s){this.domObserver.stop();let h=d&&(Jt||Nt)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&rA(i.selection,t.selection);if(d){let p=Nt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=LM(this)),(o||!this.docView.update(t.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Lg(t.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&sM(this))?Sr(this,h):(sw(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&BT(f)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",e=>e(this)))if(this.state.selection instanceof re){let e=this.docView.domAfterPos(this.state.selection.from);e.nodeType==1&&Mg(this,e.getBoundingClientRect(),t)}else Mg(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let r=this.directPlugins[e];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let r=this.state.plugins[e];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let e=0;e<this.pluginViews.length;e++){let r=this.pluginViews[e];r.update&&r.update(this,t)}}updateDraggedNode(t,e){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-e.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new ww(t.slice,t.move,i<0?void 0:re.create(this.state.doc,i))}someProp(t,e){let r=this._props&&this._props[t],i;if(r!=null&&(i=e?e(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[t];if(a!=null&&(i=e?e(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[t];if(a!=null&&(i=e?e(a):a))return i}}hasFocus(){if(Jt){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&zT(this.dom),Sr(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let e=this.dom.parentNode;e;e=e.parentNode)if(e.nodeType==9||e.nodeType==11&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return t||document}updateRoot(){this._root=null}posAtCoords(t){return qT(this,t)}coordsAtPos(t,e=1){return Zk(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,r=-1){let i=this.docView.posFromDOM(t,e,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,e){return GT(this,e||this.state,t)}pasteHTML(t,e){return Ks(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return Ks(this,t,null,!0,e||new ClipboardEvent("paste"))}serializeForClipboard(t){return Vf(this,t)}destroy(){this.docView&&(CM(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Fu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,vT())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return vM(this,t)}domSelectionRange(){let t=this.domSelection();return t?Lt&&this.root.nodeType===11&&AT(this.dom.ownerDocument)==this.dom&&GM(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}vw.prototype.dispatch=function(n){let t=this._props.dispatchTransaction;t?t.call(this,n):this.updateState(this.state.apply(n))};function tb(n){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(n.editable),n.someProp("attributes",e=>{if(typeof e=="function"&&(e=e(n.state)),e)for(let r in e)r=="class"?t.class+=" "+e[r]:r=="style"?t.style=(t.style?t.style+";":"")+e[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(e[r]))}),t.translate||(t.translate="no"),[ct.node(0,n.state.doc.content.size,t)]}function nb(n){if(n.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),n.cursorWrapper={dom:t,deco:ct.widget(n.state.selection.from,t,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function rb(n){return!n.someProp("editable",t=>t(n.state)===!1)}function rA(n,t){let e=Math.min(n.$anchor.sharedDepth(n.head),t.$anchor.sharedDepth(t.head));return n.$anchor.start(e)!=t.$anchor.start(e)}function ib(n){let t=Object.create(null);function e(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return n.someProp("nodeViews",e),n.someProp("markViews",e),t}function iA(n,t){let e=0,r=0;for(let i in n){if(n[i]!=t[i])return!0;e++}for(let i in t)r++;return e!=r}function ob(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}function oi(n,t){return n.meta={package:"@milkdown/core",group:"System",...t},n}const _w={text:(n,t,e,r)=>{const i=n.value;return/^[^*_\\]*\s+$/.test(i)?i:e.safe(i,{...r,encode:[]})},strong:(n,t,e,r)=>{const i=n.marker||e.options.strong||"*",o=e.enter("strong"),s=e.createTracker(r);let a=s.move(i+i);return a+=s.move(e.containerPhrasing(n,{before:a,after:i,...s.current()})),a+=s.move(i+i),o(),a},emphasis:(n,t,e,r)=>{const i=n.marker||e.options.emphasis||"*",o=e.enter("emphasis"),s=e.createTracker(r);let a=s.move(i);return a+=s.move(e.containerPhrasing(n,{before:a,after:i,...s.current()})),a+=s.move(i),o(),a}},dn=Se({},"editorView"),gs=Se({},"editorState"),Hu=Se([],"initTimer"),sb=Se({},"editor"),Ys=Se([],"inputRules"),vr=Se([],"prosePlugins"),Gs=Se([],"remarkPlugins"),Xd=Se([],"nodeView"),Zd=Se([],"markView"),Ri=Se(Id().use(vd).use(Md),"remark"),Ms=Se({handlers:_w,encode:[]},"remarkStringifyOptions"),ul=_r("ConfigReady");function oA(n){const t=e=>(e.record(ul),async()=>(await n(e),e.done(ul),()=>{e.clearTimer(ul)}));return oi(t,{displayName:"Config"}),t}const Li=_r("InitReady");function sA(n){const t=e=>(e.inject(sb,n).inject(vr,[]).inject(Gs,[]).inject(Ys,[]).inject(Xd,[]).inject(Zd,[]).inject(Ms,{handlers:_w,encode:[]}).inject(Ri,Id().use(vd).use(Md)).inject(Hu,[ul]).record(Li),async()=>{await e.waitTimers(Hu);const r=e.get(Ms);return e.set(Ri,Id().use(vd).use(Md,r)),e.done(Li),()=>{e.remove(sb).remove(vr).remove(Gs).remove(Ys).remove(Xd).remove(Zd).remove(Ms).remove(Ri).remove(Hu).clearTimer(Li)}});return oi(t,{displayName:"Init"}),t}const Rn=_r("SchemaReady"),Uu=Se([],"schemaTimer"),Xt=Se({},"schema"),As=Se([],"nodes"),Os=Se([],"marks");function ab(n){var t;return{...n,parseDOM:(t=n.parseDOM)==null?void 0:t.map(e=>({priority:n.priority,...e}))}}const Nw=n=>(n.inject(Xt,{}).inject(As,[]).inject(Os,[]).inject(Uu,[Li]).record(Rn),async()=>{await n.waitTimers(Uu);const t=n.get(Ri),r=n.get(Gs).reduce((a,l)=>a.use(l.plugin,l.options),t);n.set(Ri,r);const i=Object.fromEntries(n.get(As).map(([a,l])=>[a,ab(l)])),o=Object.fromEntries(n.get(Os).map(([a,l])=>[a,ab(l)])),s=new _S({nodes:i,marks:o});return n.set(Xt,s),n.done(Rn),()=>{n.remove(Xt).remove(As).remove(Os).remove(Uu).clearTimer(Rn)}});oi(Nw,{displayName:"Schema"});var xi,yn;class Tw{constructor(){Q(this,xi);Q(this,yn);q(this,xi,new by),q(this,yn,null),this.setCtx=t=>{q(this,yn,t)},this.chain=()=>{if(M(this,yn)==null)throw hu();const t=M(this,yn),e=[],r=this.get.bind(this),i={run:()=>{const s=Ho(...e),a=t.get(dn);return s(a.state,a.dispatch,a)},inline:s=>(e.push(s),i),pipe:o.bind(this)};function o(s,a){const l=r(s);return e.push(l(a)),i}return i}}get ctx(){return M(this,yn)}create(t,e){const r=t.create(M(this,xi).sliceMap);return r.set(e),r}get(t){return M(this,xi).get(t).get()}remove(t){return M(this,xi).remove(t)}call(t,e){if(M(this,yn)==null)throw hu();const i=this.get(t)(e),o=M(this,yn).get(dn);return i(o.state,o.dispatch,o)}inline(t){if(M(this,yn)==null)throw hu();const e=M(this,yn).get(dn);return t(e.state,e.dispatch,e)}}xi=new WeakMap,yn=new WeakMap;function aA(n="cmdKey"){return Se((()=>()=>!1),n)}const Oe=Se(new Tw,"commands"),qu=Se([Rn],"commandsTimer"),Is=_r("CommandsReady"),Mw=n=>{const t=new Tw;return t.setCtx(n),n.inject(Oe,t).inject(qu,[Rn]).record(Is),async()=>(await n.waitTimers(qu),n.done(Is),()=>{n.remove(Oe).remove(qu).clearTimer(Is)})};oi(Mw,{displayName:"Commands"});function lA(n){const t=Ho(tT,Bf,PN,Ik);return n.Backspace=t,n}var Ei,qt;class Aw{constructor(){Q(this,Ei);Q(this,qt);q(this,Ei,null),q(this,qt,[]),this.setCtx=t=>{q(this,Ei,t)},this.add=t=>(M(this,qt).push(t),()=>{q(this,qt,M(this,qt).filter(e=>e!==t))}),this.addObjectKeymap=t=>{const e=[];return Object.entries(t).forEach(([r,i])=>{if(typeof i=="function"){const o={key:r,onRun:()=>i};M(this,qt).push(o),e.push(()=>{q(this,qt,M(this,qt).filter(s=>s!==o))})}else M(this,qt).push(i),e.push(()=>{q(this,qt,M(this,qt).filter(o=>o!==i))})}),()=>{e.forEach(r=>r())}},this.addBaseKeymap=()=>{const t=lA(QN);return this.addObjectKeymap(t)},this.build=()=>{const t={};return M(this,qt).forEach(r=>{t[r.key]=[...t[r.key]||[],r]}),Object.fromEntries(Object.entries(t).map(([r,i])=>{const o=i.sort((a,l)=>(l.priority??50)-(a.priority??50));return[r,(a,l,c)=>{const u=M(this,Ei);if(u==null)throw Vl();const d=o.map(h=>h.onRun(u));return Ho(...d)(a,l,c)}]}))}}get ctx(){return M(this,Ei)}}Ei=new WeakMap,qt=new WeakMap;const Bl=Se(new Aw,"keymap"),Wu=Se([Rn],"keymapTimer"),Ds=_r("KeymapReady"),cA=n=>{const t=new Aw;return t.setCtx(n),n.inject(Bl,t).inject(Wu,[Rn]).record(Ds),async()=>(await n.waitTimers(Wu),n.done(Ds),()=>{n.remove(Bl).remove(Wu).clearTimer(Ds)})},dl=_r("ParserReady"),Ow=(()=>{throw Vl()}),Pi=Se(Ow,"parser"),Ku=Se([],"parserTimer"),Iw=n=>(n.inject(Pi,Ow).inject(Ku,[Rn]).record(dl),async()=>{await n.waitTimers(Ku);const t=n.get(Ri),e=n.get(Xt);return n.set(Pi,sN.create(e,t)),n.done(dl),()=>{n.remove(Pi).remove(Ku).clearTimer(dl)}});oi(Iw,{displayName:"Parser"});const Rs=_r("SerializerReady"),Vu=Se([],"serializerTimer"),Dw=(()=>{throw Vl()}),go=Se(Dw,"serializer"),Rw=n=>(n.inject(go,Dw).inject(Vu,[Rn]).record(Rs),async()=>{await n.waitTimers(Vu);const t=n.get(Ri),e=n.get(Xt);return n.set(go,lN.create(e,t)),n.done(Rs),()=>{n.remove(go).remove(Vu).clearTimer(Rs)}});oi(Rw,{displayName:"Serializer"});const fl=Se("","defaultValue"),hl=Se(n=>n,"stateOptions"),Yu=Se([],"editorStateTimer"),pl=_r("EditorStateReady");function uA(n,t,e){if(typeof n=="string")return t(n);if(n.type==="html")return Zr.fromSchema(e).parse(n.dom);if(n.type==="json")return Cr.fromJSON(e,n.value);throw JC(n)}const dA=new tt("MILKDOWN_STATE_TRACKER"),Lw=n=>(n.inject(fl,"").inject(gs,{}).inject(hl,t=>t).inject(Yu,[dl,Rs,Is,Ds]).record(pl),async()=>{await n.waitTimers(Yu);const t=n.get(Xt),e=n.get(Pi),r=n.get(Ys),i=n.get(hl),o=n.get(vr),s=n.get(fl),a=uA(s,e,t),l=n.get(Bl),c=l.addBaseKeymap(),u=[...o,new et({key:dA,state:{init:()=>{},apply:(h,p,g,y)=>{n.set(gs,y)}}}),uT({rules:r}),ST(l.build())];n.set(vr,u);const d=i({schema:t,doc:a,plugins:u}),f=bi.create(d);return n.set(gs,f),n.done(pl),()=>{c(),n.remove(fl).remove(gs).remove(hl).remove(Yu).clearTimer(pl)}});oi(Lw,{displayName:"EditorState"});const ml=_r("EditorViewReady"),Gu=Se([],"editorViewTimer"),Ls=Se({},"editorViewOptions"),gl=Se(null,"root"),Qd=Se(null,"rootDOM"),ef=Se({},"rootAttrs");function fA(n,t){const e=document.createElement("div");e.className="milkdown",n.appendChild(e),t.set(Qd,e);const r=t.get(ef);return Object.entries(r).forEach(([i,o])=>e.setAttribute(i,o)),e}function hA(n){n.classList.add("editor"),n.setAttribute("role","textbox")}const pA=new tt("MILKDOWN_VIEW_CLEAR"),Pw=n=>(n.inject(gl,document.body).inject(dn,{}).inject(Ls,{}).inject(Qd,null).inject(ef,{}).inject(Gu,[pl]).record(ml),async()=>{await n.wait(Li);const t=n.get(gl)||document.body,e=typeof t=="string"?document.querySelector(t):t;n.update(vr,l=>[new et({key:pA,view:c=>{const u=e?fA(e,n):void 0;return(()=>{if(u&&e){const f=c.dom;e.replaceChild(u,f),u.appendChild(f)}})(),{destroy:()=>{u!=null&&u.parentNode&&(u==null||u.parentNode.replaceChild(c.dom,u)),u==null||u.remove()}}}}),...l]),await n.waitTimers(Gu);const r=n.get(gs),i=n.get(Ls),o=Object.fromEntries(n.get(Xd)),s=Object.fromEntries(n.get(Zd)),a=new vw(e,{state:r,nodeViews:o,markViews:s,...i});return hA(a.dom),n.set(dn,a),n.done(ml),()=>{a==null||a.destroy(),n.remove(gl).remove(dn).remove(Ls).remove(Qd).remove(ef).remove(Gu).clearTimer(ml)}});oi(Pw,{displayName:"EditorView"});var Ci,sn,yr,No,ta,na,Wt,kr,Si,ra,vi,To,ia,qr,Mo;const wp=class wp{constructor(){Q(this,Ci);Q(this,sn);Q(this,yr);Q(this,No);Q(this,ta);Q(this,na);Q(this,Wt);Q(this,kr);Q(this,Si);Q(this,ra);Q(this,vi);Q(this,To);Q(this,ia);Q(this,qr);Q(this,Mo);q(this,Ci,!1),q(this,sn,"Idle"),q(this,yr,[]),q(this,No,()=>{}),q(this,ta,new by),q(this,na,new aS),q(this,Wt,new Map),q(this,kr,new Map),q(this,Si,new yd(M(this,ta),M(this,na))),q(this,ra,()=>{const t=oA(async r=>{await Promise.all(M(this,yr).map(i=>i(r)))}),e=[Nw,Iw,Rw,Mw,cA,Lw,Pw,sA(this),t];M(this,vi).call(this,e,M(this,kr))}),q(this,vi,(t,e)=>{t.forEach(r=>{const i=M(this,Si).produce(M(this,Ci)?r.meta:void 0),o=r(i);e.set(r,{ctx:i,handler:o,cleanup:void 0})})}),q(this,To,(t,e=!1)=>Promise.all([t].flat().map(r=>{const i=M(this,Wt).get(r),o=i==null?void 0:i.cleanup;return e?M(this,Wt).delete(r):M(this,Wt).set(r,{ctx:void 0,handler:void 0,cleanup:void 0}),typeof o=="function"?o():o}))),q(this,ia,async()=>{await Promise.all([...M(this,kr).entries()].map(([t,{cleanup:e}])=>typeof e=="function"?e():e)),M(this,kr).clear()}),q(this,qr,t=>{q(this,sn,t),M(this,No).call(this,t)}),q(this,Mo,t=>[...t.entries()].map(async([e,r])=>{const{ctx:i,handler:o}=r;if(!o)return;const s=await o();t.set(e,{ctx:i,handler:o,cleanup:s})})),this.enableInspector=(t=!0)=>(q(this,Ci,t),this),this.onStatusChange=t=>(q(this,No,t),this),this.config=t=>(M(this,yr).push(t),this),this.removeConfig=t=>(q(this,yr,M(this,yr).filter(e=>e!==t)),this),this.use=t=>{const e=[t].flat();return e.flat().forEach(r=>{M(this,Wt).set(r,{ctx:void 0,handler:void 0,cleanup:void 0})}),M(this,sn)==="Created"&&M(this,vi).call(this,e,M(this,Wt)),this},this.remove=async t=>M(this,sn)==="OnCreate"?(console.warn("[Milkdown]: You are trying to remove plugins when the editor is creating, this is not recommended, please check your code."),new Promise(e=>{setTimeout(()=>{e(this.remove(t))},50)})):(await M(this,To).call(this,[t].flat(),!0),this),this.create=async()=>M(this,sn)==="OnCreate"?this:(M(this,sn)==="Created"&&await this.destroy(),M(this,qr).call(this,"OnCreate"),M(this,ra).call(this),M(this,vi).call(this,[...M(this,Wt).keys()],M(this,Wt)),await Promise.all([M(this,Mo).call(this,M(this,kr)),M(this,Mo).call(this,M(this,Wt))].flat()),M(this,qr).call(this,"Created"),this),this.destroy=async(t=!1)=>M(this,sn)==="Destroyed"||M(this,sn)==="OnDestroy"?this:M(this,sn)==="OnCreate"?new Promise(e=>{setTimeout(()=>{e(this.destroy(t))},50)}):(t&&q(this,yr,[]),M(this,qr).call(this,"OnDestroy"),await M(this,To).call(this,[...M(this,Wt).keys()],t),await M(this,ia).call(this),M(this,qr).call(this,"Destroyed"),this),this.action=t=>t(M(this,Si)),this.inspect=()=>M(this,Ci)?[...M(this,kr).values(),...M(this,Wt).values()].map(({ctx:t})=>{var e;return(e=t==null?void 0:t.inspector)==null?void 0:e.read()}).filter(t=>!!t):(console.warn("[Milkdown]: You are trying to collect inspection when inspector is disabled, please enable inspector by `editor.enableInspector()` first."),[])}static make(){return new wp}get ctx(){return M(this,Si)}get status(){return M(this,sn)}};Ci=new WeakMap,sn=new WeakMap,yr=new WeakMap,No=new WeakMap,ta=new WeakMap,na=new WeakMap,Wt=new WeakMap,kr=new WeakMap,Si=new WeakMap,ra=new WeakMap,vi=new WeakMap,To=new WeakMap,ia=new WeakMap,qr=new WeakMap,Mo=new WeakMap;let tf=wp;function Bw(n){var t,e,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(t=0;t<i;t++)n[t]&&(e=Bw(n[t]))&&(r&&(r+=" "),r+=e)}else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function mA(){for(var n,t,e=0,r="",i=arguments.length;e<i;e++)(n=arguments[e])&&(t=Bw(n))&&(r&&(r+=" "),r+=t);return r}function gA(n){n.update(Ls,t=>{const e=t.attributes;return{...t,attributes:r=>{const i=typeof e=="function"?e(r):e;return{...i,class:mA("prose dark:prose-invert",(i==null?void 0:i.class)||"","milkdown-theme-nord")}}}})}function ue(n,t){const e=aA(n),r=i=>async()=>{r.key=e,await i.wait(Is);const o=t(i);return i.get(Oe).create(e,o),r.run=s=>i.get(Oe).call(n,s),()=>{i.get(Oe).remove(e)}};return r}function en(n){const t=e=>async()=>{await e.wait(Rn);const r=n(e);return e.update(Ys,i=>[...i,r]),t.inputRule=r,()=>{e.update(Ys,i=>i.filter(o=>o!==r))}};return t}function bA(n,t){const e=r=>async()=>{const i=t(r);return r.update(Os,o=>[...o.filter(s=>s[0]!==n),[n,i]]),e.id=n,e.schema=i,()=>{r.update(Os,o=>o.filter(([s])=>s!==n))}};return e.type=r=>{const i=r.get(Xt).marks[n];if(!i)throw rS(n);return i},e}function Zf(n,t){const e=r=>async()=>{const i=t(r);return r.update(As,o=>[...o.filter(s=>s[0]!==n),[n,i]]),e.id=n,e.schema=i,()=>{r.update(As,o=>o.filter(([s])=>s!==n))}};return e.type=r=>{const i=r.get(Xt).nodes[n];if(!i)throw gy(n);return i},e}function Et(n){let t;const e=r=>async()=>(await r.wait(Rn),t=n(r),r.update(vr,i=>[...i,t]),()=>{r.update(vr,i=>i.filter(o=>o!==t))});return e.plugin=()=>t,e.key=()=>t.spec.key,e}function zw(n){const t=e=>async()=>{await e.wait(Ds);const r=e.get(Bl),i=n(e),o=r.addObjectKeymap(i);return t.keymap=i,()=>{o()}};return t}function pt(n,t){const e=Se(n,t),r=i=>(i.inject(e),()=>()=>{i.remove(e)});return r.key=e,r}function ut(n,t){const e=pt(t,n),r=Zf(n,o=>o.get(e.key)(o)),i=[e,r];return i.id=r.id,i.node=r,i.type=o=>r.type(o),i.ctx=e,i.key=e.key,i.extendSchema=o=>{const s=o(t);return ut(n,s)},i}function Uo(n,t){const e=pt(t,n),r=bA(n,o=>o.get(e.key)(o)),i=[e,r];return i.id=r.id,i.mark=r,i.type=o=>r.type(o),i.ctx=e,i.key=e.key,i.extendSchema=o=>{const s=o(t);return Uo(n,s)},i}function tn(n,t){const e=Object.fromEntries(Object.entries(t).map(([s,{shortcuts:a,priority:l}])=>[s,{shortcuts:a,priority:l}])),r=pt(e,`${n}Keymap`),i=zw(s=>{const a=s.get(r.key),l=Object.entries(t).flatMap(([c,{command:u}])=>{const d=a[c],f=[d.shortcuts].flat(),h=d.priority;return f.map(p=>[p,{key:p,onRun:u,priority:h}])});return Object.fromEntries(l)}),o=[r,i];return o.ctx=r,o.shortcuts=i,o.key=r.key,o.keymap=i.keymap,o}const Ln=(n,t=()=>({}))=>pt(t,`${n}Attr`),ga=(n,t=()=>({}))=>pt(t,`${n}Attr`);function ji(n,t,e){const r=pt({},n),i=s=>async()=>{await s.wait(Li);const l={plugin:t(s),options:s.get(r.key)};return s.update(Gs,c=>[...c,l]),()=>{s.update(Gs,c=>c.filter(u=>u!==l))}},o=[r,i];return o.id=n,o.plugin=i,o.options=r,o}function yA(){return n=>{const t=document.createElement("div"),e=n.get(Xt),r=n.get(dn),i=Nr.fromSchema(e).serializeFragment(r.state.doc.content);return t.appendChild(i),t.innerHTML}}function kA(n){return t=>{const e=t.get(dn);return t.get(Xt),t.get(go)(e.state.doc)}}function wA(n,t=!1){return e=>{const r=e.get(dn),o=e.get(Pi)(n);if(!o)return;if(!t){const d=r.state.selection.content();return r.dispatch(r.state.tr.replaceSelection(new G(o.content,d.openStart,d.openEnd)).scrollIntoView())}const s=e.get(Xt),a=Nr.fromSchema(s).serializeFragment(o.content),c=Zr.fromSchema(s).parseSlice(a),u=Wk(c);if(u){r.dispatch(r.state.tr.replaceSelectionWith(u,!0));return}r.dispatch(r.state.tr.replaceSelection(c))}}function xA(n,t=!1){return e=>{const r=e.get(dn),o=e.get(Pi)(n);if(!o)return;if(!t){const{state:u}=r;return r.dispatch(u.tr.replace(0,u.doc.content.size,new G(o.content,0,0)))}const s=e.get(Xt),a=e.get(hl),l=e.get(vr),c=bi.create({schema:s,doc:o,plugins:l,...a});r.updateState(c)}}function EA(n,t){return function(e,r){let{$from:i,$to:o,node:s}=e.selection;if(s&&s.isBlock||i.depth<2||!i.sameParent(o))return!1;let a=i.node(-1);if(a.type!=n)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=n||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){let d=B.empty,f=i.index(-1)?1:i.index(-2)?2:3;for(let k=i.depth-f;k>=i.depth-3;k--)d=B.from(i.node(k).copy(d));let h=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;d=d.append(B.from(n.createAndFill()));let p=i.before(i.depth-(f-1)),g=e.tr.replace(p,i.after(-h),new G(d,4-f,0)),y=-1;g.doc.nodesBetween(p,g.doc.content.size,(k,v)=>{if(y>-1)return!1;k.isTextblock&&k.content.size==0&&(y=v+1)}),y>-1&&g.setSelection(le.near(g.doc.resolve(y))),r(g.scrollIntoView())}return!0}let l=o.pos==i.end()?a.contentMatchAt(0).defaultType:null,c=e.tr.delete(i.pos,o.pos),u=l?[null,{type:l}]:void 0;return _s(c.doc,i.pos,2,u)?(r&&r(c.split(i.pos,2,u).scrollIntoView()),!0):!1}}function CA(n){return function(t,e){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==n);return o?e?r.node(o.depth-1).type==n?SA(t,e,n,o):vA(t,e,o):!0:!1}}function SA(n,t,e,r){let i=n.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new Tt(o-1,s,o,s,new G(B.from(e.create(null,r.parent.copy())),1,0),1,!0)),r=new vy(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=Zl(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(o,-1)-1);return Ql(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),t(i.scrollIntoView()),!0}function vA(n,t,e){let r=n.tr,i=e.parent;for(let h=e.end,p=e.endIndex-1,g=e.startIndex;p>g;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(e.start),s=o.nodeAfter;if(r.mapping.map(e.end)!=e.start+o.nodeAfter.nodeSize)return!1;let a=e.startIndex==0,l=e.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?B.empty:B.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new Tt(d-(a?1:0),f+(l?1:0),d+1,f-1,new G((a?B.empty:B.from(i.copy(B.empty))).append(l?B.empty:B.from(i.copy(B.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}function _A(n){return function(t,e){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=n)return!1;if(e){let c=l.lastChild&&l.lastChild.type==a.type,u=B.from(c?n.create():null),d=new G(B.from(n.create(null,B.from(a.type.create(null,u)))),c?3:1,0),f=o.start,h=o.end;e(t.tr.step(new Tt(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function NA(n){const t=new Map;if(!n||!n.type)throw new Error("mdast-util-definitions expected node");return $o(n,"definition",function(r){const i=lb(r.identifier);i&&!t.get(i)&&t.set(i,r)}),e;function e(r){const i=lb(r);return t.get(i)}}function lb(n){return String(n||"").toUpperCase()}function TA(){return function(n){const t=NA(n);$o(n,function(e,r,i){if(e.type==="definition"&&i!==void 0&&typeof r=="number")return i.children.splice(r,1),[Td,r];if(e.type==="imageReference"||e.type==="linkReference"){const o=t(e.identifier);if(o&&i&&typeof r=="number")return i.children[r]=e.type==="imageReference"?{type:"image",url:o.url,title:o.title,alt:e.alt}:{type:"link",url:o.url,title:o.title,children:e.children},[Td,r]}})}}function Fw(n,t){var i;if(!(t.childCount>=1&&((i=t.lastChild)==null?void 0:i.type.name)==="hardbreak")){n.next(t.content);return}const r=[];t.content.forEach((o,s,a)=>{a!==t.childCount-1&&r.push(o)}),n.next(B.fromArray(r))}function L(n,t){return Object.assign(n,{meta:{package:"@milkdown/preset-commonmark",...t}}),n}const Qf=ga("emphasis");L(Qf,{displayName:"Attr<emphasis>",group:"Emphasis"});const qo=Uo("emphasis",n=>({attrs:{marker:{default:n.get(Ms).emphasis||"*",validate:"string"}},parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:t=>t==="italic"}],toDOM:t=>["em",n.get(Qf.key)(t)],parseMarkdown:{match:t=>t.type==="emphasis",runner:(t,e,r)=>{t.openMark(r,{marker:e.marker}),t.next(e.children),t.closeMark(r)}},toMarkdown:{match:t=>t.type.name==="emphasis",runner:(t,e)=>{t.withMark(e,"emphasis",void 0,{marker:e.attrs.marker})}}}));L(qo.mark,{displayName:"MarkSchema<emphasis>",group:"Emphasis"});L(qo.ctx,{displayName:"MarkSchemaCtx<emphasis>",group:"Emphasis"});const eh=ue("ToggleEmphasis",n=>()=>nc(qo.type(n)));L(eh,{displayName:"Command<toggleEmphasisCommand>",group:"Emphasis"});const $w=en(n=>fa(/(?:^|[^*])\*([^*]+)\*$/,qo.type(n),{getAttr:()=>({marker:"*"}),updateCaptured:({fullMatch:t,start:e})=>t.startsWith("*")?{}:{fullMatch:t.slice(1),start:e+1}}));L($w,{displayName:"InputRule<emphasis>|Star",group:"Emphasis"});const Hw=en(n=>fa(/\b_(?![_\s])(.*?[^_\s])_\b/,qo.type(n),{getAttr:()=>({marker:"_"}),updateCaptured:({fullMatch:t,start:e})=>t.startsWith("_")?{}:{fullMatch:t.slice(1),start:e+1}}));L(Hw,{displayName:"InputRule<emphasis>|Underscore",group:"Emphasis"});const th=tn("emphasisKeymap",{ToggleEmphasis:{shortcuts:"Mod-i",command:n=>{const t=n.get(Oe);return()=>t.call(eh.key)}}});L(th.ctx,{displayName:"KeymapCtx<emphasis>",group:"Emphasis"});L(th.shortcuts,{displayName:"Keymap<emphasis>",group:"Emphasis"});const nh=ga("strong");L(nh,{displayName:"Attr<strong>",group:"Strong"});const ba=Uo("strong",n=>({attrs:{marker:{default:n.get(Ms).strong||"*",validate:"string"}},parseDOM:[{tag:"b",getAttrs:t=>t.style.fontWeight!="normal"&&null},{tag:"strong"},{style:"font-style",getAttrs:t=>t==="bold"},{style:"font-weight=400",clearMark:t=>t.type.name=="strong"},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM:t=>["strong",n.get(nh.key)(t)],parseMarkdown:{match:t=>t.type==="strong",runner:(t,e,r)=>{t.openMark(r,{marker:e.marker}),t.next(e.children),t.closeMark(r)}},toMarkdown:{match:t=>t.type.name==="strong",runner:(t,e)=>{t.withMark(e,"strong",void 0,{marker:e.attrs.marker})}}}));L(ba.mark,{displayName:"MarkSchema<strong>",group:"Strong"});L(ba.ctx,{displayName:"MarkSchemaCtx<strong>",group:"Strong"});const rh=ue("ToggleStrong",n=>()=>nc(ba.type(n)));L(rh,{displayName:"Command<toggleStrongCommand>",group:"Strong"});const Uw=en(n=>fa(new RegExp("(?<![\\w:/])(?:\\*\\*|__)([^*_]+?)(?:\\*\\*|__)(?![\\w/])$"),ba.type(n),{getAttr:t=>({marker:t[0].startsWith("*")?"*":"_"})}));L(Uw,{displayName:"InputRule<strong>",group:"Strong"});const ih=tn("strongKeymap",{ToggleBold:{shortcuts:["Mod-b"],command:n=>{const t=n.get(Oe);return()=>t.call(rh.key)}}});L(ih.ctx,{displayName:"KeymapCtx<strong>",group:"Strong"});L(ih.shortcuts,{displayName:"Keymap<strong>",group:"Strong"});const oh=ga("inlineCode");L(oh,{displayName:"Attr<inlineCode>",group:"InlineCode"});const Gr=Uo("inlineCode",n=>({priority:100,code:!0,parseDOM:[{tag:"code"}],toDOM:t=>["code",n.get(oh.key)(t)],parseMarkdown:{match:t=>t.type==="inlineCode",runner:(t,e,r)=>{t.openMark(r),t.addText(e.value),t.closeMark(r)}},toMarkdown:{match:t=>t.type.name==="inlineCode",runner:(t,e,r)=>{t.withMark(e,"inlineCode",r.text||"")}}}));L(Gr.mark,{displayName:"MarkSchema<inlineCode>",group:"InlineCode"});L(Gr.ctx,{displayName:"MarkSchemaCtx<inlineCode>",group:"InlineCode"});const sh=ue("ToggleInlineCode",n=>()=>(t,e)=>{const{selection:r,tr:i}=t;if(r.empty)return!1;const{from:o,to:s}=r;return t.doc.rangeHasMark(o,s,Gr.type(n))?(e==null||e(i.removeMark(o,s,Gr.type(n))),!0):(Object.keys(t.schema.marks).filter(c=>c!==Gr.type.name).map(c=>t.schema.marks[c]).forEach(c=>{i.removeMark(o,s,c)}),e==null||e(i.addMark(o,s,Gr.type(n).create())),!0)});L(sh,{displayName:"Command<toggleInlineCodeCommand>",group:"InlineCode"});const qw=en(n=>fa(/(?:`)([^`]+)(?:`)$/,Gr.type(n)));L(qw,{displayName:"InputRule<inlineCodeInputRule>",group:"InlineCode"});const ah=tn("inlineCodeKeymap",{ToggleInlineCode:{shortcuts:"Mod-e",command:n=>{const t=n.get(Oe);return()=>t.call(sh.key)}}});L(ah.ctx,{displayName:"KeymapCtx<inlineCode>",group:"InlineCode"});L(ah.shortcuts,{displayName:"Keymap<inlineCode>",group:"InlineCode"});const lh=ga("link");L(lh,{displayName:"Attr<link>",group:"Link"});const bo=Uo("link",n=>({attrs:{href:{validate:"string"},title:{default:null,validate:"string|null"}},parseDOM:[{tag:"a[href]",getAttrs:t=>{if(!(t instanceof HTMLElement))throw tr(t);return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:t=>["a",{...n.get(lh.key)(t),...t.attrs}],parseMarkdown:{match:t=>t.type==="link",runner:(t,e,r)=>{const i=e.url,o=e.title;t.openMark(r,{href:i,title:o}),t.next(e.children),t.closeMark(r)}},toMarkdown:{match:t=>t.type.name==="link",runner:(t,e)=>{t.withMark(e,"link",void 0,{title:e.attrs.title,url:e.attrs.href})}}}));L(bo.mark,{displayName:"MarkSchema<link>",group:"Link"});const Ww=ue("ToggleLink",n=>(t={})=>nc(bo.type(n),t));L(Ww,{displayName:"Command<toggleLinkCommand>",group:"Link"});const Kw=ue("UpdateLink",n=>(t={})=>(e,r)=>{if(!r)return!1;let i,o=-1;const{selection:s}=e,{from:a,to:l}=s;if(e.doc.nodesBetween(a,a===l?l+1:l,(p,g)=>{if(bo.type(n).isInSet(p.marks))return i=p,o=g,!1}),!i)return!1;const c=i.marks.find(({type:p})=>p===bo.type(n));if(!c)return!1;const u=o,d=o+i.nodeSize,{tr:f}=e,h=bo.type(n).create({...c.attrs,...t});return h?(r(f.removeMark(u,d,c).addMark(u,d,h).setSelection(new ce(f.selection.$anchor)).scrollIntoView()),!0):!1});L(Kw,{displayName:"Command<updateLinkCommand>",group:"Link"});const Vw=Zf("doc",()=>({content:"block+",parseMarkdown:{match:({type:n})=>n==="root",runner:(n,t,e)=>{n.injectRoot(t,e)}},toMarkdown:{match:n=>n.type.name==="doc",runner:(n,t)=>{n.openNode("root"),n.next(t.content)}}}));L(Vw,{displayName:"NodeSchema<doc>",group:"Doc"});function MA(n){return Tf(n,t=>{var e;return t.type==="html"&&["<br />","<br>","<br >","<br/>"].includes((e=t.value)==null?void 0:e.trim())},(t,e)=>{if(!e.length)return;const r=e[e.length-1];if(!r)return;const i=r.children.indexOf(t);i!==-1&&r.children.splice(i,1)},!0)}const ac=ji("remark-preserve-empty-line",()=>()=>MA);L(ac.plugin,{displayName:"Remark<remarkPreserveEmptyLine>",group:"Remark"});L(ac.options,{displayName:"RemarkConfig<remarkPreserveEmptyLine>",group:"Remark"});const ch=Ln("paragraph");L(ch,{displayName:"Attr<paragraph>",group:"Paragraph"});const si=ut("paragraph",n=>({content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:t=>["p",n.get(ch.key)(t),0],parseMarkdown:{match:t=>t.type==="paragraph",runner:(t,e,r)=>{t.openNode(r),e.children?t.next(e.children):t.addText(e.value||""),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="paragraph",runner:(t,e)=>{var o;const i=(o=n.get(dn).state)==null?void 0:o.doc.lastChild;t.openNode("paragraph"),(!e.content||e.content.size===0)&&e!==i&&AA(n)?t.addNode("html",void 0,"<br />"):Fw(t,e),t.closeNode()}}}));function AA(n){let t=!1;try{n.get(ac.id),t=!0}catch{t=!1}return t}L(si.node,{displayName:"NodeSchema<paragraph>",group:"Paragraph"});L(si.ctx,{displayName:"NodeSchemaCtx<paragraph>",group:"Paragraph"});const uh=ue("TurnIntoText",n=>()=>qs(si.type(n)));L(uh,{displayName:"Command<turnIntoTextCommand>",group:"Paragraph"});const dh=tn("paragraphKeymap",{TurnIntoText:{shortcuts:"Mod-Alt-0",command:n=>{const t=n.get(Oe);return()=>t.call(uh.key)}}});L(dh.ctx,{displayName:"KeymapCtx<paragraph>",group:"Paragraph"});L(dh.shortcuts,{displayName:"Keymap<paragraph>",group:"Paragraph"});const OA=Array(6).fill(0).map((n,t)=>t+1);function IA(n){return n.textContent.toLowerCase().trim().replace(/\s+/g,"-")}const lc=pt(IA,"headingIdGenerator");L(lc,{displayName:"Ctx<HeadingIdGenerator>",group:"Heading"});const fh=Ln("heading");L(fh,{displayName:"Attr<heading>",group:"Heading"});const Ji=ut("heading",n=>{const t=n.get(lc.key);return{content:"inline*",group:"block",defining:!0,attrs:{id:{default:"",validate:"string"},level:{default:1,validate:"number"}},parseDOM:OA.map(e=>({tag:`h${e}`,getAttrs:r=>{if(!(r instanceof HTMLElement))throw tr(r);return{level:e,id:r.id}}})),toDOM:e=>[`h${e.attrs.level}`,{...n.get(fh.key)(e),id:e.attrs.id||t(e)},0],parseMarkdown:{match:({type:e})=>e==="heading",runner:(e,r,i)=>{const o=r.depth;e.openNode(i,{level:o}),e.next(r.children),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="heading",runner:(e,r)=>{e.openNode("heading",void 0,{depth:r.attrs.level}),Fw(e,r),e.closeNode()}}}});L(Ji.node,{displayName:"NodeSchema<heading>",group:"Heading"});L(Ji.ctx,{displayName:"NodeSchemaCtx<heading>",group:"Heading"});const Yw=en(n=>Bk(/^(?<hashes>#+)\s$/,Ji.type(n),t=>{var s,a;const e=((a=(s=t.groups)==null?void 0:s.hashes)==null?void 0:a.length)||0,r=n.get(dn),{$from:i}=r.state.selection,o=i.node();if(o.type.name==="heading"){let l=Number(o.attrs.level)+Number(e);return l>6&&(l=6),{level:l}}return{level:e}}));L(Yw,{displayName:"InputRule<wrapInHeadingInputRule>",group:"Heading"});const Br=ue("WrapInHeading",n=>t=>(t??(t=1),t<1?qs(si.type(n)):qs(Ji.type(n),{level:t})));L(Br,{displayName:"Command<wrapInHeadingCommand>",group:"Heading"});const hh=ue("DowngradeHeading",n=>()=>(t,e,r)=>{const{$from:i}=t.selection,o=i.node();if(o.type!==Ji.type(n)||!t.selection.empty||i.parentOffset!==0)return!1;const s=o.attrs.level-1;return s?(e==null||e(t.tr.setNodeMarkup(t.selection.$from.before(),void 0,{...o.attrs,level:s})),!0):qs(si.type(n))(t,e,r)});L(hh,{displayName:"Command<downgradeHeadingCommand>",group:"Heading"});const ph=tn("headingKeymap",{TurnIntoH1:{shortcuts:"Mod-Alt-1",command:n=>{const t=n.get(Oe);return()=>t.call(Br.key,1)}},TurnIntoH2:{shortcuts:"Mod-Alt-2",command:n=>{const t=n.get(Oe);return()=>t.call(Br.key,2)}},TurnIntoH3:{shortcuts:"Mod-Alt-3",command:n=>{const t=n.get(Oe);return()=>t.call(Br.key,3)}},TurnIntoH4:{shortcuts:"Mod-Alt-4",command:n=>{const t=n.get(Oe);return()=>t.call(Br.key,4)}},TurnIntoH5:{shortcuts:"Mod-Alt-5",command:n=>{const t=n.get(Oe);return()=>t.call(Br.key,5)}},TurnIntoH6:{shortcuts:"Mod-Alt-6",command:n=>{const t=n.get(Oe);return()=>t.call(Br.key,6)}},DowngradeHeading:{shortcuts:["Delete","Backspace"],command:n=>{const t=n.get(Oe);return()=>t.call(hh.key)}}});L(ph.ctx,{displayName:"KeymapCtx<heading>",group:"Heading"});L(ph.shortcuts,{displayName:"Keymap<heading>",group:"Heading"});const mh=Ln("blockquote");L(mh,{displayName:"Attr<blockquote>",group:"Blockquote"});const ya=ut("blockquote",n=>({content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:t=>["blockquote",n.get(mh.key)(t),0],parseMarkdown:{match:({type:t})=>t==="blockquote",runner:(t,e,r)=>{t.openNode(r).next(e.children).closeNode()}},toMarkdown:{match:t=>t.type.name==="blockquote",runner:(t,e)=>{t.openNode("blockquote").next(e.content).closeNode()}}}));L(ya.node,{displayName:"NodeSchema<blockquote>",group:"Blockquote"});L(ya.ctx,{displayName:"NodeSchemaCtx<blockquote>",group:"Blockquote"});const Gw=en(n=>Hf(/^\s*>\s$/,ya.type(n)));L(Gw,{displayName:"InputRule<wrapInBlockquoteInputRule>",group:"Blockquote"});const gh=ue("WrapInBlockquote",n=>()=>$f(ya.type(n)));L(gh,{displayName:"Command<wrapInBlockquoteCommand>",group:"Blockquote"});const bh=tn("blockquoteKeymap",{WrapInBlockquote:{shortcuts:"Mod-Shift-b",command:n=>{const t=n.get(Oe);return()=>t.call(gh.key)}}});L(bh.ctx,{displayName:"KeymapCtx<blockquote>",group:"Blockquote"});L(bh.shortcuts,{displayName:"Keymap<blockquote>",group:"Blockquote"});const yh=Ln("codeBlock",()=>({pre:{},code:{}}));L(yh,{displayName:"Attr<codeBlock>",group:"CodeBlock"});const ka=ut("code_block",n=>({content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:"",validate:"string"}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:t=>{if(!(t instanceof HTMLElement))throw tr(t);return{language:t.dataset.language}}}],toDOM:t=>{const e=n.get(yh.key)(t),r=t.attrs.language,i=r&&r.length>0?{"data-language":r}:void 0;return["pre",{...e.pre,...i},["code",e.code,0]]},parseMarkdown:{match:({type:t})=>t==="code",runner:(t,e,r)=>{const i=e.lang??"",o=e.value;t.openNode(r,{language:i}),o&&t.addText(o),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="code_block",runner:(t,e)=>{var r;t.addNode("code",void 0,((r=e.content.firstChild)==null?void 0:r.text)||"",{lang:e.attrs.language})}}}));L(ka.node,{displayName:"NodeSchema<codeBlock>",group:"CodeBlock"});L(ka.ctx,{displayName:"NodeSchemaCtx<codeBlock>",group:"CodeBlock"});const jw=en(n=>Bk(/^```(?<language>[a-z]*)?[\s\n]$/,ka.type(n),t=>{var e;return{language:((e=t.groups)==null?void 0:e.language)??""}}));L(jw,{displayName:"InputRule<createCodeBlockInputRule>",group:"CodeBlock"});const kh=ue("CreateCodeBlock",n=>(t="")=>qs(ka.type(n),{language:t}));L(kh,{displayName:"Command<createCodeBlockCommand>",group:"CodeBlock"});const DA=ue("UpdateCodeBlockLanguage",()=>({pos:n,language:t}={pos:-1,language:""})=>(e,r)=>n>=0?(r==null||r(e.tr.setNodeAttribute(n,"language",t)),!0):!1);L(DA,{displayName:"Command<updateCodeBlockLanguageCommand>",group:"CodeBlock"});const wh=tn("codeBlockKeymap",{CreateCodeBlock:{shortcuts:"Mod-Alt-c",command:n=>{const t=n.get(Oe);return()=>t.call(kh.key)}}});L(wh.ctx,{displayName:"KeymapCtx<codeBlock>",group:"CodeBlock"});L(wh.shortcuts,{displayName:"Keymap<codeBlock>",group:"CodeBlock"});const xh=Ln("image");L(xh,{displayName:"Attr<image>",group:"Image"});const Wo=ut("image",n=>({inline:!0,group:"inline",selectable:!0,draggable:!0,marks:"",atom:!0,defining:!0,isolating:!0,attrs:{src:{default:"",validate:"string"},alt:{default:"",validate:"string"},title:{default:"",validate:"string"}},parseDOM:[{tag:"img[src]",getAttrs:t=>{if(!(t instanceof HTMLElement))throw tr(t);return{src:t.getAttribute("src")||"",alt:t.getAttribute("alt")||"",title:t.getAttribute("title")||t.getAttribute("alt")||""}}}],toDOM:t=>["img",{...n.get(xh.key)(t),...t.attrs}],parseMarkdown:{match:({type:t})=>t==="image",runner:(t,e,r)=>{const i=e.url,o=e.alt,s=e.title;t.addNode(r,{src:i,alt:o,title:s})}},toMarkdown:{match:t=>t.type.name==="image",runner:(t,e)=>{t.addNode("image",void 0,void 0,{title:e.attrs.title,url:e.attrs.src,alt:e.attrs.alt})}}}));L(Wo.node,{displayName:"NodeSchema<image>",group:"Image"});L(Wo.ctx,{displayName:"NodeSchemaCtx<image>",group:"Image"});const Jw=ue("InsertImage",n=>(t={})=>(e,r)=>{if(!r)return!0;const{src:i="",alt:o="",title:s=""}=t,a=Wo.type(n).create({src:i,alt:o,title:s});return a&&r(e.tr.replaceSelectionWith(a).scrollIntoView()),!0});L(Jw,{displayName:"Command<insertImageCommand>",group:"Image"});const Xw=ue("UpdateImage",n=>(t={})=>(e,r)=>{const i=mT(e.selection,Wo.type(n));if(!i)return!1;const{node:o,pos:s}=i,a={...o.attrs},{src:l,alt:c,title:u}=t;return l!==void 0&&(a.src=l),c!==void 0&&(a.alt=c),u!==void 0&&(a.title=u),r==null||r(e.tr.setNodeMarkup(s,void 0,a).scrollIntoView()),!0});L(Xw,{displayName:"Command<updateImageCommand>",group:"Image"});const RA=en(n=>new hn(/!\[(?<alt>.*?)]\((?<filename>.*?)\s*(?="|\))"?(?<title>[^"]+)?"?\)/,(t,e,r,i)=>{const[o,s,a="",l]=e;return o?t.tr.replaceWith(r,i,Wo.type(n).create({src:a,alt:s,title:l})):null}));L(RA,{displayName:"InputRule<insertImageInputRule>",group:"Image"});const zl=Ln("hardbreak",n=>({"data-type":"hardbreak","data-is-inline":n.attrs.isInline}));L(zl,{displayName:"Attr<hardbreak>",group:"Hardbreak"});const Bi=ut("hardbreak",n=>({inline:!0,group:"inline",attrs:{isInline:{default:!1,validate:"boolean"}},selectable:!1,parseDOM:[{tag:"br"},{tag:'span[data-type="hardbreak"]',getAttrs:()=>({isInline:!0})}],toDOM:t=>t.attrs.isInline?["span",n.get(zl.key)(t)," "]:["br",n.get(zl.key)(t)],parseMarkdown:{match:({type:t})=>t==="break",runner:(t,e,r)=>{var i;t.addNode(r,{isInline:!!((i=e.data)!=null&&i.isInline)})}},leafText:()=>`
`,toMarkdown:{match:t=>t.type.name==="hardbreak",runner:(t,e)=>{e.attrs.isInline?t.addNode("text",void 0,`
`):t.addNode("break")}}}));L(Bi.node,{displayName:"NodeSchema<hardbreak>",group:"Hardbreak"});L(Bi.ctx,{displayName:"NodeSchemaCtx<hardbreak>",group:"Hardbreak"});const Eh=ue("InsertHardbreak",n=>()=>(t,e)=>{var o;const{selection:r,tr:i}=t;if(!(r instanceof ce))return!1;if(r.empty){const s=r.$from.node();if(s.childCount>0&&((o=s.lastChild)==null?void 0:o.type.name)==="hardbreak")return e==null||e(i.replaceRangeWith(r.to-1,r.to,t.schema.node("paragraph")).setSelection(le.near(i.doc.resolve(r.to))).scrollIntoView()),!0}return e==null||e(i.setMeta("hardbreak",!0).replaceSelectionWith(Bi.type(n).create()).scrollIntoView()),!0});L(Eh,{displayName:"Command<insertHardbreakCommand>",group:"Hardbreak"});const Ch=tn("hardbreakKeymap",{InsertHardbreak:{shortcuts:"Shift-Enter",command:n=>{const t=n.get(Oe);return()=>t.call(Eh.key)}}});L(Ch.ctx,{displayName:"KeymapCtx<hardbreak>",group:"Hardbreak"});L(Ch.shortcuts,{displayName:"Keymap<hardbreak>",group:"Hardbreak"});const Sh=Ln("hr");L(Sh,{displayName:"Attr<hr>",group:"Hr"});const wa=ut("hr",n=>({group:"block",parseDOM:[{tag:"hr"}],toDOM:t=>["hr",n.get(Sh.key)(t)],parseMarkdown:{match:({type:t})=>t==="thematicBreak",runner:(t,e,r)=>{t.addNode(r)}},toMarkdown:{match:t=>t.type.name==="hr",runner:t=>{t.addNode("thematicBreak")}}}));L(wa.node,{displayName:"NodeSchema<hr>",group:"Hr"});L(wa.ctx,{displayName:"NodeSchemaCtx<hr>",group:"Hr"});const Zw=en(n=>new hn(/^(?:---|___\s|\*\*\*\s)$/,(t,e,r,i)=>{const{tr:o}=t;return e[0]&&o.replaceWith(r-1,i,wa.type(n).create()),o}));L(Zw,{displayName:"InputRule<insertHrInputRule>",group:"Hr"});const Qw=ue("InsertHr",n=>()=>(t,e)=>{if(!e)return!0;const r=si.node.type(n).create(),{tr:i,selection:o}=t,{from:s}=o,a=wa.type(n).create();if(!a)return!0;const l=i.replaceSelectionWith(a).insert(s,r),c=le.findFrom(l.doc.resolve(s),1,!0);return c&&e(l.setSelection(c).scrollIntoView()),!0});L(Qw,{displayName:"Command<insertHrCommand>",group:"Hr"});const vh=Ln("bulletList");L(vh,{displayName:"Attr<bulletList>",group:"BulletList"});const Ko=ut("bullet_list",n=>({content:"listItem+",group:"block",attrs:{spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ul",getAttrs:t=>{if(!(t instanceof HTMLElement))throw tr(t);return{spread:t.dataset.spread==="true"}}}],toDOM:t=>["ul",{...n.get(vh.key)(t),"data-spread":t.attrs.spread},0],parseMarkdown:{match:({type:t,ordered:e})=>t==="list"&&!e,runner:(t,e,r)=>{const i=e.spread!=null?`${e.spread}`:"false";t.openNode(r,{spread:i}).next(e.children).closeNode()}},toMarkdown:{match:t=>t.type.name==="bullet_list",runner:(t,e)=>{t.openNode("list",void 0,{ordered:!1,spread:e.attrs.spread}).next(e.content).closeNode()}}}));L(Ko.node,{displayName:"NodeSchema<bulletList>",group:"BulletList"});L(Ko.ctx,{displayName:"NodeSchemaCtx<bulletList>",group:"BulletList"});const e0=en(n=>Hf(/^\s*([-+*])\s$/,Ko.type(n)));L(e0,{displayName:"InputRule<wrapInBulletListInputRule>",group:"BulletList"});const _h=ue("WrapInBulletList",n=>()=>$f(Ko.type(n)));L(_h,{displayName:"Command<wrapInBulletListCommand>",group:"BulletList"});const Nh=tn("bulletListKeymap",{WrapInBulletList:{shortcuts:"Mod-Alt-8",command:n=>{const t=n.get(Oe);return()=>t.call(_h.key)}}});L(Nh.ctx,{displayName:"KeymapCtx<bulletListKeymap>",group:"BulletList"});L(Nh.shortcuts,{displayName:"Keymap<bulletListKeymap>",group:"BulletList"});const Th=Ln("orderedList");L(Th,{displayName:"Attr<orderedList>",group:"OrderedList"});const Vo=ut("ordered_list",n=>({content:"listItem+",group:"block",attrs:{order:{default:1,validate:"number"},spread:{default:!1,validate:"boolean"}},parseDOM:[{tag:"ol",getAttrs:t=>{if(!(t instanceof HTMLElement))throw tr(t);return{spread:t.dataset.spread,order:t.hasAttribute("start")?Number(t.getAttribute("start")):1}}}],toDOM:t=>["ol",{...n.get(Th.key)(t),...t.attrs.order===1?{}:t.attrs.order,"data-spread":t.attrs.spread},0],parseMarkdown:{match:({type:t,ordered:e})=>t==="list"&&!!e,runner:(t,e,r)=>{const i=e.spread!=null?`${e.spread}`:"true";t.openNode(r,{spread:i}).next(e.children).closeNode()}},toMarkdown:{match:t=>t.type.name==="ordered_list",runner:(t,e)=>{t.openNode("list",void 0,{ordered:!0,start:1,spread:e.attrs.spread==="true"}),t.next(e.content),t.closeNode()}}}));L(Vo.node,{displayName:"NodeSchema<orderedList>",group:"OrderedList"});L(Vo.ctx,{displayName:"NodeSchemaCtx<orderedList>",group:"OrderedList"});const t0=en(n=>Hf(/^\s*(\d+)\.\s$/,Vo.type(n),t=>({order:Number(t[1])}),(t,e)=>e.childCount+e.attrs.order===Number(t[1])));L(t0,{displayName:"InputRule<wrapInOrderedListInputRule>",group:"OrderedList"});const Mh=ue("WrapInOrderedList",n=>()=>$f(Vo.type(n)));L(Mh,{displayName:"Command<wrapInOrderedListCommand>",group:"OrderedList"});const Ah=tn("orderedListKeymap",{WrapInOrderedList:{shortcuts:"Mod-Alt-7",command:n=>{const t=n.get(Oe);return()=>t.call(Mh.key)}}});L(Ah.ctx,{displayName:"KeymapCtx<orderedList>",group:"OrderedList"});L(Ah.shortcuts,{displayName:"Keymap<orderedList>",group:"OrderedList"});const Oh=Ln("listItem");L(Oh,{displayName:"Attr<listItem>",group:"ListItem"});const Tr=ut("list_item",n=>({group:"listItem",content:"paragraph block*",attrs:{label:{default:"•",validate:"string"},listType:{default:"bullet",validate:"string"},spread:{default:!0,validate:"boolean"}},defining:!0,parseDOM:[{tag:"li",getAttrs:t=>{if(!(t instanceof HTMLElement))throw tr(t);return{label:t.dataset.label,listType:t.dataset.listType,spread:t.dataset.spread==="true"}}}],toDOM:t=>["li",{...n.get(Oh.key)(t),"data-label":t.attrs.label,"data-list-type":t.attrs.listType,"data-spread":t.attrs.spread},0],parseMarkdown:{match:({type:t})=>t==="listItem",runner:(t,e,r)=>{const i=e.label!=null?`${e.label}.`:"•",o=e.label!=null?"ordered":"bullet",s=e.spread!=null?`${e.spread}`:"true";t.openNode(r,{label:i,listType:o,spread:s}),t.next(e.children),t.closeNode()}},toMarkdown:{match:t=>t.type.name==="list_item",runner:(t,e)=>{t.openNode("listItem",void 0,{spread:e.attrs.spread}),t.next(e.content),t.closeNode()}}}));L(Tr.node,{displayName:"NodeSchema<listItem>",group:"ListItem"});L(Tr.ctx,{displayName:"NodeSchemaCtx<listItem>",group:"ListItem"});const Ih=ue("SinkListItem",n=>()=>_A(Tr.type(n)));L(Ih,{displayName:"Command<sinkListItemCommand>",group:"ListItem"});const Dh=ue("LiftListItem",n=>()=>CA(Tr.type(n)));L(Dh,{displayName:"Command<liftListItemCommand>",group:"ListItem"});const Rh=ue("SplitListItem",n=>()=>EA(Tr.type(n)));L(Rh,{displayName:"Command<splitListItemCommand>",group:"ListItem"});function LA(n){return(t,e,r)=>{const{selection:i}=t;if(!(i instanceof ce))return!1;const{empty:o,$from:s}=i;return!o||s.parentOffset!==0||s.node(-1).type!==Tr.type(n)?!1:Ok(t,e,r)}}const Lh=ue("LiftFirstListItem",n=>()=>LA(n));L(Lh,{displayName:"Command<liftFirstListItemCommand>",group:"ListItem"});const Ph=tn("listItemKeymap",{NextListItem:{shortcuts:"Enter",command:n=>{const t=n.get(Oe);return()=>t.call(Rh.key)}},SinkListItem:{shortcuts:["Tab","Mod-]"],command:n=>{const t=n.get(Oe);return()=>t.call(Ih.key)}},LiftListItem:{shortcuts:["Shift-Tab","Mod-["],command:n=>{const t=n.get(Oe);return()=>t.call(Dh.key)}},LiftFirstListItem:{shortcuts:["Backspace","Delete"],command:n=>{const t=n.get(Oe);return()=>t.call(Lh.key)}}});L(Ph.ctx,{displayName:"KeymapCtx<listItem>",group:"ListItem"});L(Ph.shortcuts,{displayName:"Keymap<listItem>",group:"ListItem"});const n0=Zf("text",()=>({group:"inline",parseMarkdown:{match:({type:n})=>n==="text",runner:(n,t)=>{n.addText(t.value)}},toMarkdown:{match:n=>n.type.name==="text",runner:(n,t)=>{n.addNode("text",void 0,t.text)}}}));L(n0,{displayName:"NodeSchema<text>",group:"Text"});const Bh=Ln("html");L(Bh,{displayName:"Attr<html>",group:"Html"});const zh=ut("html",n=>({atom:!0,group:"inline",inline:!0,attrs:{value:{default:"",validate:"string"}},toDOM:t=>{const e=document.createElement("span"),r={...n.get(Bh.key)(t),"data-value":t.attrs.value,"data-type":"html"};return e.textContent=t.attrs.value,["span",r,t.attrs.value]},parseDOM:[{tag:'span[data-type="html"]',getAttrs:t=>({value:t.dataset.value??""})}],parseMarkdown:{match:({type:t})=>t==="html",runner:(t,e,r)=>{t.addNode(r,{value:e.value})}},toMarkdown:{match:t=>t.type.name==="html",runner:(t,e)=>{t.addNode("html",void 0,e.attrs.value)}}}));L(zh.node,{displayName:"NodeSchema<html>",group:"Html"});L(zh.ctx,{displayName:"NodeSchemaCtx<html>",group:"Html"});const PA=[Vw,ch,si,lc,fh,Ji,zl,Bi,mh,ya,yh,ka,Sh,wa,xh,Wo,vh,Ko,Th,Vo,Oh,Tr,Qf,qo,nh,ba,oh,Gr,lh,bo,Bh,zh,n0].flat(),BA=[Gw,e0,t0,jw,Zw,Yw].flat(),zA=[$w,Hw,qw,Uw],FA=ue("IsMarkSelected",()=>n=>t=>{if(!n)return!1;const{doc:e,selection:r}=t;return e.rangeHasMark(r.from,r.to,n)}),$A=ue("IsNoteSelected",()=>n=>t=>n?gT(t,n).hasNode:!1),HA=ue("ClearTextInCurrentBlock",()=>()=>(n,t)=>{let e=n.tr;const{$from:r,$to:i}=e.selection,{pos:o}=r,{pos:s}=i,a=o-r.node().content.size;return a<0?!1:(e=e.deleteRange(a,s),t==null||t(e),!0)}),UA=ue("SetBlockType",()=>n=>(t,e)=>{const{nodeType:r,attrs:i=null}=n??{};if(!r)return!1;const o=t.tr,{from:s,to:a}=o.selection;try{o.setBlockType(s,a,r,i)}catch{return!1}return e==null||e(o),!0}),qA=ue("WrapInBlockType",()=>n=>(t,e)=>{const{nodeType:r,attrs:i=null}=n??{};if(!r)return!1;let o=t.tr;try{const{$from:s,$to:a}=o.selection,l=s.blockRange(a),c=l&&Lf(l,r,i);if(!c)return!1;o=o.wrap(l,c)}catch{return!1}return e==null||e(o),!0}),WA=ue("AddBlockType",()=>n=>(t,e)=>{const{nodeType:r,attrs:i=null}=n??{};if(!r)return!1;const o=t.tr;try{const s=r instanceof Cr?r:r.createAndFill(i);if(!s)return!1;o.replaceSelectionWith(s)}catch{return!1}return e==null||e(o),!0}),KA=ue("SelectTextNearPos",()=>n=>(t,e)=>{const{pos:r}=n??{};if(r==null)return!1;const i=(s,a,l)=>Math.min(Math.max(s,a),l),o=t.tr;try{const s=t.doc.resolve(i(r,0,t.doc.content.size));o.setSelection(ce.near(s))}catch{return!1}return e==null||e(o.scrollIntoView()),!0}),VA=[uh,gh,Br,hh,kh,Eh,Qw,Jw,Xw,Mh,_h,Ih,Rh,Dh,Lh,eh,sh,rh,Ww,Kw,FA,$A,HA,UA,qA,WA,KA],YA=[bh,wh,Ch,ph,Ph,Ah,Nh,dh,th,ah,ih].flat(),Fh=ji("remarkAddOrderInList",()=>()=>n=>{$o(n,"list",t=>{if(t.ordered){const e=t.start??1;t.children.forEach((r,i)=>{r.label=i+e})}})});L(Fh.plugin,{displayName:"Remark<remarkAddOrderInListPlugin>",group:"Remark"});L(Fh.options,{displayName:"RemarkConfig<remarkAddOrderInListPlugin>",group:"Remark"});const $h=ji("remarkLineBreak",()=>()=>n=>{const t=/[\t ]*(?:\r?\n|\r)/g;$o(n,"text",(e,r,i)=>{if(!e.value||typeof e.value!="string")return;const o=[];let s=0;t.lastIndex=0;let a=t.exec(e.value);for(;a;){const c=a.index;s!==c&&o.push({type:"text",value:e.value.slice(s,c)}),o.push({type:"break",data:{isInline:!0}}),s=c+a[0].length,a=t.exec(e.value)}if(o.length>0&&i&&typeof r=="number")return s<e.value.length&&o.push({type:"text",value:e.value.slice(s)}),i.children.splice(r,1,...o),r+o.length})});L($h.plugin,{displayName:"Remark<remarkLineBreak>",group:"Remark"});L($h.options,{displayName:"RemarkConfig<remarkLineBreak>",group:"Remark"});const Hh=ji("remarkInlineLink",()=>TA);L(Hh.plugin,{displayName:"Remark<remarkInlineLinkPlugin>",group:"Remark"});L(Hh.options,{displayName:"RemarkConfig<remarkInlineLinkPlugin>",group:"Remark"});const GA=n=>!!n.children,jA=n=>n.type==="html";function JA(n,t){return e(n,0,null)[0];function e(r,i,o){if(GA(r)){const s=[];for(let a=0,l=r.children.length;a<l;a++){const c=r.children[a];if(c){const u=e(c,a,r);if(u)for(let d=0,f=u.length;d<f;d++){const h=u[d];h&&s.push(h)}}}r.children=s}return t(r,i,o)}}const XA=["root","blockquote","listItem"],Uh=ji("remarkHTMLTransformer",()=>()=>n=>{JA(n,(t,e,r)=>jA(t)?(r&&XA.includes(r.type)&&(t.children=[{...t}],delete t.value,t.type="paragraph"),[t]):[t])});L(Uh.plugin,{displayName:"Remark<remarkHtmlTransformer>",group:"Remark"});L(Uh.options,{displayName:"RemarkConfig<remarkHtmlTransformer>",group:"Remark"});const qh=ji("remarkMarker",()=>()=>(n,t)=>{const e=r=>t.value.charAt(r.position.start.offset);$o(n,r=>["strong","emphasis"].includes(r.type),r=>{r.marker=e(r)})});L(qh.plugin,{displayName:"Remark<remarkMarker>",group:"Remark"});L(qh.options,{displayName:"RemarkConfig<remarkMarker>",group:"Remark"});const r0=Et(()=>{let n=!1;const t=new tt("MILKDOWN_INLINE_NODES_CURSOR"),e=new et({key:t,state:{init(){return!1},apply(r){if(!r.selection.empty)return!1;const i=r.selection.$from,o=i.nodeBefore,s=i.nodeAfter;return!!(o&&s&&o.isInline&&!o.isText&&s.isInline&&!s.isText)}},props:{handleDOMEvents:{compositionend:(r,i)=>n?(n=!1,requestAnimationFrame(()=>{if(e.getState(r.state)){const s=r.state.selection.from;i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",s))}}),!0):!1,compositionstart:r=>(e.getState(r.state)&&(n=!0),!1),beforeinput:(r,i)=>{if(e.getState(r.state)&&i instanceof InputEvent&&i.data&&!n){const s=r.state.selection.from;return i.preventDefault(),r.dispatch(r.state.tr.insertText(i.data||"",s)),!0}return!1}},decorations(r){if(e.getState(r)){const s=r.selection.$from.pos,a=document.createElement("span"),l=ct.widget(s,a,{side:-1}),c=document.createElement("span"),u=ct.widget(s,c);return setTimeout(()=>{a.contentEditable="true",c.contentEditable="true"}),We.create(r.doc,[l,u])}return We.empty}}});return e});L(r0,{displayName:"Prose<inlineNodesCursorPlugin>",group:"Prose"});const i0=Et(n=>new et({key:new tt("MILKDOWN_HARDBREAK_MARKS"),appendTransaction:(t,e,r)=>{if(!t.length)return;const[i]=t;if(!i)return;const[o]=i.steps;if(i.getMeta("hardbreak")){if(!(o instanceof ft))return;const{from:l}=o;return r.tr.setNodeMarkup(l,Bi.type(n),void 0,[])}if(o instanceof wr){let l=r.tr;const{from:c,to:u}=o;return r.doc.nodesBetween(c,u,(d,f)=>{d.type===Bi.type(n)&&(l=l.setNodeMarkup(f,Bi.type(n),void 0,[]))}),l}}}));L(i0,{displayName:"Prose<hardbreakClearMarkPlugin>",group:"Prose"});const Wh=pt(["table","code_block"],"hardbreakFilterNodes");L(Wh,{displayName:"Ctx<hardbreakFilterNodes>",group:"Prose"});const o0=Et(n=>{const t=n.get(Wh.key);return new et({key:new tt("MILKDOWN_HARDBREAK_FILTER"),filterTransaction:(e,r)=>{const i=e.getMeta("hardbreak"),[o]=e.steps;if(i&&o){const{from:s}=o,a=r.doc.resolve(s);let l=a.depth,c=!0;for(;l>0;)t.includes(a.node(l).type.name)&&(c=!1),l--;return c}return!0}})});L(o0,{displayName:"Prose<hardbreakFilterPlugin>",group:"Prose"});const s0=Et(n=>{const t=new tt("MILKDOWN_HEADING_ID"),e=r=>{if(r.composing)return;const i=n.get(lc.key),o=r.state.tr.setMeta("addToHistory",!1);let s=!1;const a={};r.state.doc.descendants((l,c)=>{if(l.type===Ji.type(n)){if(l.textContent.trim().length===0)return;const u=l.attrs;let d=i(l);a[d]?(a[d]+=1,d+=`-#${a[d]}`):a[d]=1,u.id!==d&&(s=!0,o.setMeta(t,!0).setNodeMarkup(c,void 0,{...u,id:d}))}}),s&&r.dispatch(o)};return new et({key:t,view:r=>(e(r),{update:(i,o)=>{i.state.doc.eq(o.doc)||e(i)}})})});L(s0,{displayName:"Prose<syncHeadingIdPlugin>",group:"Prose"});const a0=Et(n=>{const t=(e,r,i)=>{if(!i.selection||e.some(d=>d.getMeta("addToHistory")===!1||!d.isGeneric))return null;const o=Vo.type(n),s=Ko.type(n),a=Tr.type(n),l=(d,f)=>{let h=!1;const p=`${f+1}.`;return d.label!==p&&(d.label=p,h=!0),h};let c=i.tr,u=!1;return i.doc.descendants((d,f,h,p)=>{if(d.type===s){const g=d.maybeChild(0);(g==null?void 0:g.type)===a&&g.attrs.listType==="ordered"&&(u=!0,c.setNodeMarkup(f,o,{spread:"true"}),d.descendants((y,k,v,E)=>{if(y.type===a){const R={...y.attrs};l(R,E)&&(c=c.setNodeMarkup(k,void 0,R))}return!1}))}else if(d.type===a&&(h==null?void 0:h.type)===o){const g={...d.attrs};let y=!1;g.listType!=="ordered"&&(g.listType="ordered",y=!0),(h==null?void 0:h.maybeChild(0))&&(y=l(g,p)),y&&(c=c.setNodeMarkup(f,void 0,g),u=!0)}}),u?c.setMeta("addToHistory",!1):null};return new et({key:new tt("MILKDOWN_KEEP_LIST_ORDER"),appendTransaction:t})});L(a0,{displayName:"Prose<syncListOrderPlugin>",group:"Prose"});const ZA=[i0,Wh,o0,r0,Fh,Hh,$h,Uh,qh,ac,s0,a0].flat(),QA=[PA,BA,zA,VA,YA,ZA].flat();var nf,rf;if(typeof WeakMap<"u"){let n=new WeakMap;nf=t=>n.get(t),rf=(t,e)=>(n.set(t,e),e)}else{const n=[];let e=0;nf=r=>{for(let i=0;i<n.length;i+=2)if(n[i]==r)return n[i+1]},rf=(r,i)=>(e==10&&(e=0),n[e++]=r,n[e++]=i)}var Ie=class{constructor(n,t,e,r){this.width=n,this.height=t,this.map=e,this.problems=r}findCell(n){for(let t=0;t<this.map.length;t++){const e=this.map[t];if(e!=n)continue;const r=t%this.width,i=t/this.width|0;let o=r+1,s=i+1;for(let a=1;o<this.width&&this.map[t+a]==e;a++)o++;for(let a=1;s<this.height&&this.map[t+this.width*a]==e;a++)s++;return{left:r,top:i,right:o,bottom:s}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let t=0;t<this.map.length;t++)if(this.map[t]==n)return t%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,t,e){const{left:r,right:i,top:o,bottom:s}=this.findCell(n);return t=="horiz"?(e<0?r==0:i==this.width)?null:this.map[o*this.width+(e<0?r-1:i)]:(e<0?o==0:s==this.height)?null:this.map[r+this.width*(e<0?o-1:s)]}rectBetween(n,t){const{left:e,right:r,top:i,bottom:o}=this.findCell(n),{left:s,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(e,s),top:Math.min(i,l),right:Math.max(r,a),bottom:Math.max(o,c)}}cellsInRect(n){const t=[],e={};for(let r=n.top;r<n.bottom;r++)for(let i=n.left;i<n.right;i++){const o=r*this.width+i,s=this.map[o];e[s]||(e[s]=!0,!(i==n.left&&i&&this.map[o-1]==s||r==n.top&&r&&this.map[o-this.width]==s)&&t.push(s))}return t}positionAt(n,t,e){for(let r=0,i=0;;r++){const o=i+e.child(r).nodeSize;if(r==n){let s=t+n*this.width;const a=(n+1)*this.width;for(;s<a&&this.map[s]<i;)s++;return s==a?o-1:this.map[s]}i=o}}static get(n){return nf(n)||rf(n,eO(n))}};function eO(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const t=tO(n),e=n.childCount,r=[];let i=0,o=null;const s=[];for(let c=0,u=t*e;c<u;c++)r[c]=0;for(let c=0,u=0;c<e;c++){const d=n.child(c);u++;for(let p=0;;p++){for(;i<r.length&&r[i]!=0;)i++;if(p==d.childCount)break;const g=d.child(p),{colspan:y,rowspan:k,colwidth:v}=g.attrs;for(let E=0;E<k;E++){if(E+c>=e){(o||(o=[])).push({type:"overlong_rowspan",pos:u,n:k-E});break}const R=i+E*t;for(let A=0;A<y;A++){r[R+A]==0?r[R+A]=u:(o||(o=[])).push({type:"collision",row:c,pos:u,n:y-A});const w=v&&v[A];if(w){const T=(R+A)%t*2,I=s[T];I==null||I!=w&&s[T+1]==1?(s[T]=w,s[T+1]=1):I==w&&s[T+1]++}}}i+=y,u+=g.nodeSize}const f=(c+1)*t;let h=0;for(;i<f;)r[i++]==0&&h++;h&&(o||(o=[])).push({type:"missing",row:c,n:h}),u++}(t===0||e===0)&&(o||(o=[])).push({type:"zero_sized"});const a=new Ie(t,e,r,o);let l=!1;for(let c=0;!l&&c<s.length;c+=2)s[c]!=null&&s[c+1]<e&&(l=!0);return l&&nO(a,s,n),a}function tO(n){let t=-1,e=!1;for(let r=0;r<n.childCount;r++){const i=n.child(r);let o=0;if(e)for(let s=0;s<r;s++){const a=n.child(s);for(let l=0;l<a.childCount;l++){const c=a.child(l);s+c.attrs.rowspan>r&&(o+=c.attrs.colspan)}}for(let s=0;s<i.childCount;s++){const a=i.child(s);o+=a.attrs.colspan,a.attrs.rowspan>1&&(e=!0)}t==-1?t=o:t!=o&&(t=Math.max(t,o))}return t}function nO(n,t,e){n.problems||(n.problems=[]);const r={};for(let i=0;i<n.map.length;i++){const o=n.map[i];if(r[o])continue;r[o]=!0;const s=e.nodeAt(o);if(!s)throw new RangeError(`No cell with offset ${o} found`);let a=null;const l=s.attrs;for(let c=0;c<l.colspan;c++){const u=(i+c)%n.width,d=t[u*2];d!=null&&(!l.colwidth||l.colwidth[c]!=d)&&((a||(a=rO(l)))[c]=d)}a&&n.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}function rO(n){if(n.colwidth)return n.colwidth.slice();const t=[];for(let e=0;e<n.colspan;e++)t.push(0);return t}function cb(n,t){if(typeof n=="string")return{};const e=n.getAttribute("data-colwidth"),r=e&&/^\d+(,\d+)*$/.test(e)?e.split(",").map(s=>Number(s)):null,i=Number(n.getAttribute("colspan")||1),o={colspan:i,rowspan:Number(n.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(const s in t){const a=t[s].getFromDOM,l=a&&a(n);l!=null&&(o[s]=l)}return o}function ub(n,t){const e={};n.attrs.colspan!=1&&(e.colspan=n.attrs.colspan),n.attrs.rowspan!=1&&(e.rowspan=n.attrs.rowspan),n.attrs.colwidth&&(e["data-colwidth"]=n.attrs.colwidth.join(","));for(const r in t){const i=t[r].setDOMAttr;i&&i(n.attrs[r],e)}return e}function iO(n){if(n!==null){if(!Array.isArray(n))throw new TypeError("colwidth must be null or an array");for(const t of n)if(typeof t!="number")throw new TypeError("colwidth must be null or an array of numbers")}}function oO(n){const t=n.cellAttributes||{},e={colspan:{default:1,validate:"number"},rowspan:{default:1,validate:"number"},colwidth:{default:null,validate:iO}};for(const r in t)e[r]={default:t[r].default,validate:t[r].validate};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:n.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:n.cellContent,attrs:e,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:r=>cb(r,t)}],toDOM(r){return["td",ub(r,t),0]}},table_header:{content:n.cellContent,attrs:e,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:r=>cb(r,t)}],toDOM(r){return["th",ub(r,t),0]}}}}function Sn(n){let t=n.cached.tableNodeTypes;if(!t){t=n.cached.tableNodeTypes={};for(const e in n.nodes){const r=n.nodes[e],i=r.spec.tableRole;i&&(t[i]=r)}}return t}var $r=new tt("selectingCells");function xa(n){for(let t=n.depth-1;t>0;t--)if(n.node(t).type.spec.tableRole=="row")return n.node(0).resolve(n.before(t+1));return null}function vn(n){const t=n.selection.$head;for(let e=t.depth;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return!0;return!1}function cc(n){const t=n.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const e=xa(t.$head)||sO(t.$head);if(e)return e;throw new RangeError(`No cell found around position ${t.head}`)}function sO(n){for(let t=n.nodeAfter,e=n.pos;t;t=t.firstChild,e++){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(e)}for(let t=n.nodeBefore,e=n.pos;t;t=t.lastChild,e--){const r=t.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(e-t.nodeSize)}}function of(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function aO(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function Kh(n,t){return n.depth==t.depth&&n.pos>=t.start(-1)&&n.pos<=t.end(-1)}function l0(n,t,e){const r=n.node(-1),i=Ie.get(r),o=n.start(-1),s=i.nextCell(n.pos-o,t,e);return s==null?null:n.node(0).resolve(o+s)}function Vi(n,t,e=1){const r={...n,colspan:n.colspan-e};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,e),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}function lO(n,t,e=1){const r={...n,colspan:n.colspan+e};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let i=0;i<e;i++)r.colwidth.splice(t,0,0)}return r}function cO(n,t,e){const r=Sn(t.type.schema).header_cell;for(let i=0;i<n.height;i++)if(t.nodeAt(n.map[e+i*n.width]).type!=r)return!1;return!0}var Ye=class dr extends le{constructor(t,e=t){const r=t.node(-1),i=Ie.get(r),o=t.start(-1),s=i.rectBetween(t.pos-o,e.pos-o),a=t.node(0),l=i.cellsInRect(s).filter(u=>u!=e.pos-o);l.unshift(e.pos-o);const c=l.map(u=>{const d=r.nodeAt(u);if(!d)throw RangeError(`No cell with offset ${u} found`);const f=o+u+1;return new Nk(a.resolve(f),a.resolve(f+d.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=e}map(t,e){const r=t.resolve(e.map(this.$anchorCell.pos)),i=t.resolve(e.map(this.$headCell.pos));if(of(r)&&of(i)&&Kh(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?dr.rowSelection(r,i):o&&this.isColSelection()?dr.colSelection(r,i):new dr(r,i)}return ce.between(r,i)}content(){const t=this.$anchorCell.node(-1),e=Ie.get(t),r=this.$anchorCell.start(-1),i=e.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},s=[];for(let l=i.top;l<i.bottom;l++){const c=[];for(let u=l*e.width+i.left,d=i.left;d<i.right;d++,u++){const f=e.map[u];if(o[f])continue;o[f]=!0;const h=e.findCell(f);let p=t.nodeAt(f);if(!p)throw RangeError(`No cell with offset ${f} found`);const g=i.left-h.left,y=h.right-i.right;if(g>0||y>0){let k=p.attrs;if(g>0&&(k=Vi(k,0,g)),y>0&&(k=Vi(k,k.colspan-y,y)),h.left<i.left){if(p=p.type.createAndFill(k),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(k)}`)}else p=p.type.create(k,p.content)}if(h.top<i.top||h.bottom>i.bottom){const k={...p.attrs,rowspan:Math.min(h.bottom,i.bottom)-Math.max(h.top,i.top)};h.top<i.top?p=p.type.createAndFill(k):p=p.type.create(k,p.content)}c.push(p)}s.push(t.child(l).copy(B.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?t:s;return new G(B.from(a),1,1)}replace(t,e=G.empty){const r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){const{$from:a,$to:l}=i[s],c=t.mapping.slice(r);t.replace(c.map(a.pos),c.map(l.pos),s?G.empty:e)}const o=le.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);o&&t.setSelection(o)}replaceWith(t,e){this.replace(t,new G(B.from(e),0,0))}forEachCell(t){const e=this.$anchorCell.node(-1),r=Ie.get(e),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let s=0;s<o.length;s++)t(e.nodeAt(o[s]),i+o[s])}isColSelection(){const t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;const r=t+this.$anchorCell.nodeAfter.attrs.rowspan,i=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(t,e=t){const r=t.node(-1),i=Ie.get(r),o=t.start(-1),s=i.findCell(t.pos-o),a=i.findCell(e.pos-o),l=t.node(0);return s.top<=a.top?(s.top>0&&(t=l.resolve(o+i.map[s.left])),a.bottom<i.height&&(e=l.resolve(o+i.map[i.width*(i.height-1)+a.right-1]))):(a.top>0&&(e=l.resolve(o+i.map[a.left])),s.bottom<i.height&&(t=l.resolve(o+i.map[i.width*(i.height-1)+s.right-1]))),new dr(t,e)}isRowSelection(){const t=this.$anchorCell.node(-1),e=Ie.get(t),r=this.$anchorCell.start(-1),i=e.colCount(this.$anchorCell.pos-r),o=e.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const s=i+this.$anchorCell.nodeAfter.attrs.colspan,a=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,a)==e.width}eq(t){return t instanceof dr&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,e=t){const r=t.node(-1),i=Ie.get(r),o=t.start(-1),s=i.findCell(t.pos-o),a=i.findCell(e.pos-o),l=t.node(0);return s.left<=a.left?(s.left>0&&(t=l.resolve(o+i.map[s.top*i.width])),a.right<i.width&&(e=l.resolve(o+i.map[i.width*(a.top+1)-1]))):(a.left>0&&(e=l.resolve(o+i.map[a.top*i.width])),s.right<i.width&&(t=l.resolve(o+i.map[i.width*(s.top+1)-1]))),new dr(t,e)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,e){return new dr(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,r=e){return new dr(t.resolve(e),t.resolve(r))}getBookmark(){return new uO(this.$anchorCell.pos,this.$headCell.pos)}};Ye.prototype.visible=!1;le.jsonID("cell",Ye);var uO=class c0{constructor(t,e){this.anchor=t,this.head=e}map(t){return new c0(t.map(this.anchor),t.map(this.head))}resolve(t){const e=t.resolve(this.anchor),r=t.resolve(this.head);return e.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&e.index()<e.parent.childCount&&r.index()<r.parent.childCount&&Kh(e,r)?new Ye(e,r):le.near(r,1)}};function dO(n){if(!(n.selection instanceof Ye))return null;const t=[];return n.selection.forEachCell((e,r)=>{t.push(ct.node(r,r+e.nodeSize,{class:"selectedCell"}))}),We.create(n.doc,t)}function fO({$from:n,$to:t}){if(n.pos==t.pos||n.pos<t.pos-6)return!1;let e=n.pos,r=t.pos,i=n.depth;for(;i>=0&&!(n.after(i+1)<n.end(i));i--,e++);for(let o=t.depth;o>=0&&!(t.before(o+1)>t.start(o));o--,r--);return e==r&&/row|table/.test(n.node(i).type.spec.tableRole)}function hO({$from:n,$to:t}){let e,r;for(let i=n.depth;i>0;i--){const o=n.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){e=o;break}}for(let i=t.depth;i>0;i--){const o=t.node(i);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return e!==r&&t.parentOffset===0}function pO(n,t,e){const r=(t||n).selection,i=(t||n).doc;let o,s;if(r instanceof re&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")o=Ye.create(i,r.from);else if(s=="row"){const a=i.resolve(r.from+1);o=Ye.rowSelection(a,a)}else if(!e){const a=Ie.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];o=Ye.create(i,l+1,c)}}else r instanceof ce&&fO(r)?o=ce.create(i,r.from):r instanceof ce&&hO(r)&&(o=ce.create(i,r.$from.start(),r.$from.end()));return o&&(t||(t=n.tr)).setSelection(o),t}var mO=new tt("fix-tables");function u0(n,t,e,r){const i=n.childCount,o=t.childCount;e:for(let s=0,a=0;s<o;s++){const l=t.child(s);for(let c=a,u=Math.min(i,s+3);c<u;c++)if(n.child(c)==l){a=c+1,e+=l.nodeSize;continue e}r(l,e),a<i&&n.child(a).sameMarkup(l)?u0(n.child(a),l,e+1,r):l.nodesBetween(0,l.content.size,r,e+1),e+=l.nodeSize}}function gO(n,t){let e;const r=(i,o)=>{i.type.spec.tableRole=="table"&&(e=bO(n,i,o,e))};return t?t.doc!=n.doc&&u0(t.doc,n.doc,0,r):n.doc.descendants(r),e}function bO(n,t,e,r){const i=Ie.get(t);if(!i.problems)return r;r||(r=n.tr);const o=[];for(let l=0;l<i.height;l++)o.push(0);for(let l=0;l<i.problems.length;l++){const c=i.problems[l];if(c.type=="collision"){const u=t.nodeAt(c.pos);if(!u)continue;const d=u.attrs;for(let f=0;f<d.rowspan;f++)o[c.row+f]+=c.n;r.setNodeMarkup(r.mapping.map(e+1+c.pos),null,Vi(d,d.colspan-c.n,c.n))}else if(c.type=="missing")o[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=t.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(e+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=t.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(e+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const u=r.mapping.map(e);r.delete(u,u+t.nodeSize)}}let s,a;for(let l=0;l<o.length;l++)o[l]&&(s==null&&(s=l),a=l);for(let l=0,c=e+1;l<i.height;l++){const u=t.child(l),d=c+u.nodeSize,f=o[l];if(f>0){let h="cell";u.firstChild&&(h=u.firstChild.type.spec.tableRole);const p=[];for(let y=0;y<f;y++){const k=Sn(n.schema)[h].createAndFill();k&&p.push(k)}const g=(l==0||s==l-1)&&a==l?c+1:d-1;r.insert(r.mapping.map(g),p)}c=d}return r.setMeta(mO,{fixTables:!0})}function d0(n){const t=Ie.get(n),e=[],r=t.height,i=t.width;for(let o=0;o<r;o++){const s=[];for(let a=0;a<i;a++){const l=o*i+a,c=t.map[l];if(o>0){const u=l-i,d=t.map[u];if(c===d){s.push(null);continue}}if(a>0){const u=l-1,d=t.map[u];if(c===d){s.push(null);continue}}s.push(n.nodeAt(c))}e.push(s)}return e}function f0(n,t){const e=[],r=Ie.get(n),i=r.height,o=r.width;for(let a=0;a<i;a++){const l=n.child(a),c=[];for(let d=0;d<o;d++){const f=t[a][d];if(!f)continue;const h=r.map[a*r.width+d],p=n.nodeAt(h);if(!p)continue;const g=p.type.createChecked(f.attrs,f.content,f.marks);c.push(g)}const u=l.type.createChecked(l.attrs,c,l.marks);e.push(u)}return n.type.createChecked(n.attrs,e,n.marks)}function Ea(n){return yO(t=>t.type.spec.tableRole==="table",n)}function yO(n,t){for(let e=t.depth;e>=0;e-=1){const r=t.node(e);if(n(r)){const i=e===0?0:t.before(e),o=t.start(e);return{node:r,pos:i,start:o,depth:e}}}return null}function io(n,t){const e=Ea(t.$from);if(!e)return;const r=Ie.get(e.node);return n<0||n>r.width-1?void 0:r.cellsInRect({left:n,right:n+1,top:0,bottom:r.height}).map(o=>{const s=e.node.nodeAt(o),a=o+e.start;return{pos:a,start:a+1,node:s,depth:e.depth+2}})}function oo(n,t){const e=Ea(t.$from);if(!e)return;const r=Ie.get(e.node);return n<0||n>r.height-1?void 0:r.cellsInRect({left:0,right:r.width,top:n,bottom:n+1}).map(o=>{const s=e.node.nodeAt(o),a=o+e.start;return{pos:a,start:a+1,node:s,depth:e.depth+2}})}function db(n,t,e=t){let r=t,i=e;for(let d=t;d>=0;d--){const f=io(d,n.selection);f&&f.forEach(h=>{const p=h.node.attrs.colspan+d-1;p>=r&&(r=d),p>i&&(i=p)})}for(let d=t;d<=i;d++){const f=io(d,n.selection);f&&f.forEach(h=>{const p=h.node.attrs.colspan+d-1;h.node.attrs.colspan>1&&p>i&&(i=p)})}const o=[];for(let d=r;d<=i;d++){const f=io(d,n.selection);f&&f.length>0&&o.push(d)}r=o[0],i=o[o.length-1];const s=io(r,n.selection),a=oo(0,n.selection);if(!s||!a)return;const l=n.doc.resolve(s[s.length-1].pos);let c;for(let d=i;d>=r;d--){const f=io(d,n.selection);if(f&&f.length>0){for(let h=a.length-1;h>=0;h--)if(a[h].pos===f[0].pos){c=f[0];break}if(c)break}}if(!c)return;const u=n.doc.resolve(c.pos);return{$anchor:l,$head:u,indexes:o}}function fb(n,t,e=t){let r=t,i=e;for(let d=t;d>=0;d--){const f=oo(d,n.selection);f&&f.forEach(h=>{const p=h.node.attrs.rowspan+d-1;p>=r&&(r=d),p>i&&(i=p)})}for(let d=t;d<=i;d++){const f=oo(d,n.selection);f&&f.forEach(h=>{const p=h.node.attrs.rowspan+d-1;h.node.attrs.rowspan>1&&p>i&&(i=p)})}const o=[];for(let d=r;d<=i;d++){const f=oo(d,n.selection);f&&f.length>0&&o.push(d)}r=o[0],i=o[o.length-1];const s=oo(r,n.selection),a=io(0,n.selection);if(!s||!a)return;const l=n.doc.resolve(s[s.length-1].pos);let c;for(let d=i;d>=r;d--){const f=oo(d,n.selection);if(f&&f.length>0){for(let h=a.length-1;h>=0;h--)if(a[h].pos===f[0].pos){c=f[0];break}if(c)break}}if(!c)return;const u=n.doc.resolve(c.pos);return{$anchor:l,$head:u,indexes:o}}function h0(n,t,e,r){const i=t[0]>e[0]?-1:1,o=n.splice(t[0],t.length),s=o.length%2===0?1:0;let a;return a=i===-1?e[0]:e[e.length-1]-s,n.splice(a,0,...o),n}function hb(n){return n[0].map((t,e)=>n.map(r=>r[e]))}function kO(n){var t,e;const{tr:r,originIndex:i,targetIndex:o,select:s,pos:a}=n,l=r.doc.resolve(a),c=Ea(l);if(!c)return!1;const u=(t=db(r,i))==null?void 0:t.indexes,d=(e=db(r,o))==null?void 0:e.indexes;if(!u||!d||u.includes(o))return!1;const f=wO(c.node,u,d);if(r.replaceWith(c.pos,c.pos+c.node.nodeSize,f),!s)return!0;const h=Ie.get(f),p=c.start,g=o,y=h.positionAt(h.height-1,g,f),k=r.doc.resolve(p+y),v=h.positionAt(0,g,f),E=r.doc.resolve(p+v);return r.setSelection(Ye.colSelection(k,E)),!0}function wO(n,t,e,r){let i=hb(d0(n));return i=h0(i,t,e),i=hb(i),f0(n,i)}function xO(n){var t,e;const{tr:r,originIndex:i,targetIndex:o,select:s,pos:a}=n,l=r.doc.resolve(a),c=Ea(l);if(!c)return!1;const u=(t=fb(r,i))==null?void 0:t.indexes,d=(e=fb(r,o))==null?void 0:e.indexes;if(!u||!d||u.includes(o))return!1;const f=EO(c.node,u,d);if(r.replaceWith(c.pos,c.pos+c.node.nodeSize,f),!s)return!0;const h=Ie.get(f),p=c.start,g=o,y=h.positionAt(g,h.width-1,f),k=r.doc.resolve(p+y),v=h.positionAt(g,0,f),E=r.doc.resolve(p+v);return r.setSelection(Ye.rowSelection(k,E)),!0}function EO(n,t,e,r){let i=d0(n);return i=h0(i,t,e),f0(n,i)}function ai(n){const t=n.selection,e=cc(n),r=e.node(-1),i=e.start(-1),o=Ie.get(r);return{...t instanceof Ye?o.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):o.findCell(e.pos-i),tableStart:i,map:o,table:r}}function p0(n,{map:t,tableStart:e,table:r},i){let o=i>0?-1:0;cO(t,r,i+o)&&(o=i==0||i==t.width?null:0);for(let s=0;s<t.height;s++){const a=s*t.width+i;if(i>0&&i<t.width&&t.map[a-1]==t.map[a]){const l=t.map[a],c=r.nodeAt(l);n.setNodeMarkup(n.mapping.map(e+l),null,lO(c.attrs,i-t.colCount(l))),s+=c.attrs.rowspan-1}else{const l=o==null?Sn(r.type.schema).cell:r.nodeAt(t.map[a+o]).type,c=t.positionAt(s,i,r);n.insert(n.mapping.map(e+c),l.createAndFill())}}return n}function CO(n,t){if(!vn(n))return!1;if(t){const e=ai(n);t(p0(n.tr,e,e.left))}return!0}function SO(n,t){if(!vn(n))return!1;if(t){const e=ai(n);t(p0(n.tr,e,e.right))}return!0}function vO(n,{map:t,table:e,tableStart:r},i){const o=n.mapping.maps.length;for(let s=0;s<t.height;){const a=s*t.width+i,l=t.map[a],c=e.nodeAt(l),u=c.attrs;if(i>0&&t.map[a-1]==l||i<t.width-1&&t.map[a+1]==l)n.setNodeMarkup(n.mapping.slice(o).map(r+l),null,Vi(u,i-t.colCount(l)));else{const d=n.mapping.slice(o).map(r+l);n.delete(d,d+c.nodeSize)}s+=u.rowspan}}function _O(n,t){if(!vn(n))return!1;if(t){const e=ai(n),r=n.tr;if(e.left==0&&e.right==e.map.width)return!1;for(let i=e.right-1;vO(r,e,i),i!=e.left;i--){const o=e.tableStart?r.doc.nodeAt(e.tableStart-1):r.doc;if(!o)throw RangeError("No table found");e.table=o,e.map=Ie.get(o)}t(r)}return!0}function NO(n,{map:t,table:e,tableStart:r},i){let o=0;for(let c=0;c<i;c++)o+=e.child(c).nodeSize;const s=o+e.child(i).nodeSize,a=n.mapping.maps.length;n.delete(o+r,s+r);const l=new Set;for(let c=0,u=i*t.width;c<t.width;c++,u++){const d=t.map[u];if(!l.has(d)){if(l.add(d),i>0&&d==t.map[u-t.width]){const f=e.nodeAt(d).attrs;n.setNodeMarkup(n.mapping.slice(a).map(d+r),null,{...f,rowspan:f.rowspan-1}),c+=f.colspan-1}else if(i<t.height&&d==t.map[u+t.width]){const f=e.nodeAt(d),h=f.attrs,p=f.type.create({...h,rowspan:f.attrs.rowspan-1},f.content),g=t.positionAt(i+1,c,e);n.insert(n.mapping.slice(a).map(r+g),p),c+=h.colspan-1}}}}function TO(n,t){if(!vn(n))return!1;if(t){const e=ai(n),r=n.tr;if(e.top==0&&e.bottom==e.map.height)return!1;for(let i=e.bottom-1;NO(r,e,i),i!=e.top;i--){const o=e.tableStart?r.doc.nodeAt(e.tableStart-1):r.doc;if(!o)throw RangeError("No table found");e.table=o,e.map=Ie.get(e.table)}t(r)}return!0}function MO(n,t){return function(e,r){if(!vn(e))return!1;const i=cc(e);if(i.nodeAfter.attrs[n]===t)return!1;if(r){const o=e.tr;e.selection instanceof Ye?e.selection.forEachCell((s,a)=>{s.attrs[n]!==t&&o.setNodeMarkup(a,null,{...s.attrs,[n]:t})}):o.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[n]:t}),r(o)}return!0}}function AO(n){return function(t,e){if(!vn(t))return!1;if(e){const r=Sn(t.schema),i=ai(t),o=t.tr,s=i.map.cellsInRect(n=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:n=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),a=s.map(l=>i.table.nodeAt(l));for(let l=0;l<s.length;l++)a[l].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[l],r.cell,a[l].attrs);if(o.steps.length==0)for(let l=0;l<s.length;l++)o.setNodeMarkup(i.tableStart+s[l],r.header_cell,a[l].attrs);e(o)}return!0}}function pb(n,t,e){const r=t.map.cellsInRect({left:0,top:0,right:n=="row"?t.map.width:1,bottom:n=="column"?t.map.height:1});for(let i=0;i<r.length;i++){const o=t.table.nodeAt(r[i]);if(o&&o.type!==e.header_cell)return!1}return!0}function Vh(n,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?AO(n):function(e,r){if(!vn(e))return!1;if(r){const i=Sn(e.schema),o=ai(e),s=e.tr,a=pb("row",o,i),l=pb("column",o,i),u=(n==="column"?a:n==="row"?l:!1)?1:0,d=n=="column"?{left:0,top:u,right:1,bottom:o.map.height}:n=="row"?{left:u,top:0,right:o.map.width,bottom:1}:o,f=n=="column"?l?i.cell:i.header_cell:n=="row"?a?i.cell:i.header_cell:i.cell;o.map.cellsInRect(d).forEach(h=>{const p=h+o.tableStart,g=s.doc.nodeAt(p);g&&s.setNodeMarkup(p,f,g.attrs)}),r(s)}return!0}}Vh("row",{useDeprecatedLogic:!0});Vh("column",{useDeprecatedLogic:!0});Vh("cell",{useDeprecatedLogic:!0});function OO(n,t){if(t<0){const e=n.nodeBefore;if(e)return n.pos-e.nodeSize;for(let r=n.index(-1)-1,i=n.before();r>=0;r--){const o=n.node(-1).child(r),s=o.lastChild;if(s)return i-1-s.nodeSize;i-=o.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const e=n.node(-1);for(let r=n.indexAfter(-1),i=n.after();r<e.childCount;r++){const o=e.child(r);if(o.childCount)return i+1;i+=o.nodeSize}}return null}function m0(n){return function(t,e){if(!vn(t))return!1;const r=OO(cc(t),n);if(r==null)return!1;if(e){const i=t.doc.resolve(r);e(t.tr.setSelection(ce.between(i,aO(i))).scrollIntoView())}return!0}}function IO(n,t){const e=n.selection.$anchor;for(let r=e.depth;r>0;r--)if(e.node(r).type.spec.tableRole=="table")return t&&t(n.tr.delete(e.before(r),e.after(r)).scrollIntoView()),!0;return!1}function Ya(n,t){const e=n.selection;if(!(e instanceof Ye))return!1;if(t){const r=n.tr,i=Sn(n.schema).cell.createAndFill().content;e.forEachCell((o,s)=>{o.content.eq(i)||r.replace(r.mapping.map(s+1),r.mapping.map(s+o.nodeSize-1),new G(i,0,0))}),r.docChanged&&t(r)}return!0}function DO(n){return(t,e)=>{const{from:r,to:i,select:o=!0,pos:s=t.selection.from}=n,a=t.tr;return xO({tr:a,originIndex:r,targetIndex:i,select:o,pos:s})?(e==null||e(a),!0):!1}}function RO(n){return(t,e)=>{const{from:r,to:i,select:o=!0,pos:s=t.selection.from}=n,a=t.tr;return kO({tr:a,originIndex:r,targetIndex:i,select:o,pos:s})?(e==null||e(a),!0):!1}}function LO(n){if(!n.size)return null;let{content:t,openStart:e,openEnd:r}=n;for(;t.childCount==1&&(e>0&&r>0||t.child(0).type.spec.tableRole=="table");)e--,r--,t=t.child(0).content;const i=t.child(0),o=i.type.spec.tableRole,s=i.type.schema,a=[];if(o=="row")for(let l=0;l<t.childCount;l++){let c=t.child(l).content;const u=l?0:Math.max(0,e-1),d=l<t.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=sf(Sn(s).row,new G(c,u,d)).content),a.push(c)}else if(o=="cell"||o=="header_cell")a.push(e||r?sf(Sn(s).row,new G(t,e,r)).content:t);else return null;return PO(s,a)}function PO(n,t){const e=[];for(let i=0;i<t.length;i++){const o=t[i];for(let s=o.childCount-1;s>=0;s--){const{rowspan:a,colspan:l}=o.child(s).attrs;for(let c=i;c<i+a;c++)e[c]=(e[c]||0)+l}}let r=0;for(let i=0;i<e.length;i++)r=Math.max(r,e[i]);for(let i=0;i<e.length;i++)if(i>=t.length&&t.push(B.empty),e[i]<r){const o=Sn(n).cell.createAndFill(),s=[];for(let a=e[i];a<r;a++)s.push(o);t[i]=t[i].append(B.from(s))}return{height:t.length,width:r,rows:t}}function sf(n,t){const e=n.createAndFill();return new _k(e).replace(0,e.content.size,t).doc}function BO({width:n,height:t,rows:e},r,i){if(n!=r){const o=[],s=[];for(let a=0;a<e.length;a++){const l=e[a],c=[];for(let u=o[a]||0,d=0;u<r;d++){let f=l.child(d%l.childCount);u+f.attrs.colspan>r&&(f=f.type.createChecked(Vi(f.attrs,f.attrs.colspan,u+f.attrs.colspan-r),f.content)),c.push(f),u+=f.attrs.colspan;for(let h=1;h<f.attrs.rowspan;h++)o[a+h]=(o[a+h]||0)+f.attrs.colspan}s.push(B.from(c))}e=s,n=r}if(t!=i){const o=[];for(let s=0,a=0;s<i;s++,a++){const l=[],c=e[a%t];for(let u=0;u<c.childCount;u++){let d=c.child(u);s+d.attrs.rowspan>i&&(d=d.type.create({...d.attrs,rowspan:Math.max(1,i-d.attrs.rowspan)},d.content)),l.push(d)}o.push(B.from(l))}e=o,t=i}return{width:n,height:t,rows:e}}function zO(n,t,e,r,i,o,s){const a=n.doc.type.schema,l=Sn(a);let c,u;if(i>t.width)for(let d=0,f=0;d<t.height;d++){const h=e.child(d);f+=h.nodeSize;const p=[];let g;h.lastChild==null||h.lastChild.type==l.cell?g=c||(c=l.cell.createAndFill()):g=u||(u=l.header_cell.createAndFill());for(let y=t.width;y<i;y++)p.push(g);n.insert(n.mapping.slice(s).map(f-1+r),p)}if(o>t.height){const d=[];for(let p=0,g=(t.height-1)*t.width;p<Math.max(t.width,i);p++){const y=p>=t.width?!1:e.nodeAt(t.map[g+p]).type==l.header_cell;d.push(y?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const f=l.row.create(null,B.from(d)),h=[];for(let p=t.height;p<o;p++)h.push(f);n.insert(n.mapping.slice(s).map(r+e.nodeSize-2),h)}return!!(c||u)}function mb(n,t,e,r,i,o,s,a){if(s==0||s==t.height)return!1;let l=!1;for(let c=i;c<o;c++){const u=s*t.width+c,d=t.map[u];if(t.map[u-t.width]==d){l=!0;const f=e.nodeAt(d),{top:h,left:p}=t.findCell(d);n.setNodeMarkup(n.mapping.slice(a).map(d+r),null,{...f.attrs,rowspan:s-h}),n.insert(n.mapping.slice(a).map(t.positionAt(s,p,e)),f.type.createAndFill({...f.attrs,rowspan:h+f.attrs.rowspan-s})),c+=f.attrs.colspan-1}}return l}function gb(n,t,e,r,i,o,s,a){if(s==0||s==t.width)return!1;let l=!1;for(let c=i;c<o;c++){const u=c*t.width+s,d=t.map[u];if(t.map[u-1]==d){l=!0;const f=e.nodeAt(d),h=t.colCount(d),p=n.mapping.slice(a).map(d+r);n.setNodeMarkup(p,null,Vi(f.attrs,s-h,f.attrs.colspan-(s-h))),n.insert(p+f.nodeSize,f.type.createAndFill(Vi(f.attrs,0,s-h))),c+=f.attrs.rowspan-1}}return l}function bb(n,t,e,r,i){let o=e?n.doc.nodeAt(e-1):n.doc;if(!o)throw new Error("No table found");let s=Ie.get(o);const{top:a,left:l}=r,c=l+i.width,u=a+i.height,d=n.tr;let f=0;function h(){if(o=e?d.doc.nodeAt(e-1):d.doc,!o)throw new Error("No table found");s=Ie.get(o),f=d.mapping.maps.length}zO(d,s,o,e,c,u,f)&&h(),mb(d,s,o,e,l,c,a,f)&&h(),mb(d,s,o,e,l,c,u,f)&&h(),gb(d,s,o,e,a,u,l,f)&&h(),gb(d,s,o,e,a,u,c,f)&&h();for(let p=a;p<u;p++){const g=s.positionAt(p,l,o),y=s.positionAt(p,c,o);d.replace(d.mapping.slice(f).map(g+e),d.mapping.slice(f).map(y+e),new G(i.rows[p-a],0,0))}h(),d.setSelection(new Ye(d.doc.resolve(e+s.positionAt(a,l,o)),d.doc.resolve(e+s.positionAt(u-1,c-1,o)))),t(d)}var FO=Uf({ArrowLeft:Ga("horiz",-1),ArrowRight:Ga("horiz",1),ArrowUp:Ga("vert",-1),ArrowDown:Ga("vert",1),"Shift-ArrowLeft":ja("horiz",-1),"Shift-ArrowRight":ja("horiz",1),"Shift-ArrowUp":ja("vert",-1),"Shift-ArrowDown":ja("vert",1),Backspace:Ya,"Mod-Backspace":Ya,Delete:Ya,"Mod-Delete":Ya});function bl(n,t,e){return e.eq(n.selection)?!1:(t&&t(n.tr.setSelection(e).scrollIntoView()),!0)}function Ga(n,t){return(e,r,i)=>{if(!i)return!1;const o=e.selection;if(o instanceof Ye)return bl(e,r,le.near(o.$headCell,t));if(n!="horiz"&&!o.empty)return!1;const s=g0(i,n,t);if(s==null)return!1;if(n=="horiz")return bl(e,r,le.near(e.doc.resolve(o.head+t),t));{const a=e.doc.resolve(s),l=l0(a,n,t);let c;return l?c=le.near(l,1):t<0?c=le.near(e.doc.resolve(a.before(-1)),-1):c=le.near(e.doc.resolve(a.after(-1)),1),bl(e,r,c)}}}function ja(n,t){return(e,r,i)=>{if(!i)return!1;const o=e.selection;let s;if(o instanceof Ye)s=o;else{const l=g0(i,n,t);if(l==null)return!1;s=new Ye(e.doc.resolve(l))}const a=l0(s.$headCell,n,t);return a?bl(e,r,new Ye(s.$anchorCell,a)):!1}}function $O(n,t){const e=n.state.doc,r=xa(e.resolve(t));return r?(n.dispatch(n.state.tr.setSelection(new Ye(r))),!0):!1}function HO(n,t,e){if(!vn(n.state))return!1;let r=LO(e);const i=n.state.selection;if(i instanceof Ye){r||(r={width:1,height:1,rows:[B.from(sf(Sn(n.state.schema).cell,e))]});const o=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),a=Ie.get(o).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=BO(r,a.right-a.left,a.bottom-a.top),bb(n.state,n.dispatch,s,a,r),!0}else if(r){const o=cc(n.state),s=o.start(-1);return bb(n.state,n.dispatch,s,Ie.get(o.node(-1)).findCell(o.pos-s),r),!0}else return!1}function UO(n,t){var e;if(t.ctrlKey||t.metaKey)return;const r=yb(n,t.target);let i;if(t.shiftKey&&n.state.selection instanceof Ye)o(n.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&(i=xa(n.state.selection.$anchor))!=null&&((e=ju(n,t))==null?void 0:e.pos)!=i.pos)o(i,t),t.preventDefault();else if(!r)return;function o(l,c){let u=ju(n,c);const d=$r.getState(n.state)==null;if(!u||!Kh(l,u))if(d)u=l;else return;const f=new Ye(l,u);if(d||!n.state.selection.eq(f)){const h=n.state.tr.setSelection(f);d&&h.setMeta($r,l.pos),n.dispatch(h)}}function s(){n.root.removeEventListener("mouseup",s),n.root.removeEventListener("dragstart",s),n.root.removeEventListener("mousemove",a),$r.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta($r,-1))}function a(l){const c=l,u=$r.getState(n.state);let d;if(u!=null)d=n.state.doc.resolve(u);else if(yb(n,c.target)!=r&&(d=ju(n,t),!d))return s();d&&o(d,c)}n.root.addEventListener("mouseup",s),n.root.addEventListener("dragstart",s),n.root.addEventListener("mousemove",a)}function g0(n,t,e){if(!(n.state.selection instanceof ce))return null;const{$head:r}=n.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((e<0?r.index(i):r.indexAfter(i))!=(e<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const a=r.before(i),l=t=="vert"?e>0?"down":"up":e>0?"right":"left";return n.endOfTextblock(l)?a:null}}return null}function yb(n,t){for(;t&&t!=n.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function ju(n,t){const e=n.posAtCoords({left:t.clientX,top:t.clientY});return e&&e?xa(n.state.doc.resolve(e.pos)):null}var qO=class{constructor(n,t){this.node=n,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),af(n,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(n){return n.type!=this.node.type?!1:(this.node=n,af(n,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(n){return n.type=="attributes"&&(n.target==this.table||this.colgroup.contains(n.target))}};function af(n,t,e,r,i,o){var s;let a=0,l=!0,c=t.firstChild;const u=n.firstChild;if(u){for(let d=0,f=0;d<u.childCount;d++){const{colspan:h,colwidth:p}=u.child(d).attrs;for(let g=0;g<h;g++,f++){const y=i==f?o:p&&p[g],k=y?y+"px":"";if(a+=y||r,y||(l=!1),c)c.style.width!=k&&(c.style.width=k),c=c.nextSibling;else{const v=document.createElement("col");v.style.width=k,t.appendChild(v)}}}for(;c;){const d=c.nextSibling;(s=c.parentNode)==null||s.removeChild(c),c=d}l?(e.style.width=a+"px",e.style.minWidth=""):(e.style.width="",e.style.minWidth=a+"px")}}var cn=new tt("tableColumnResizing");function WO({handleWidth:n=5,cellMinWidth:t=25,defaultCellMinWidth:e=100,View:r=qO,lastColumnResizable:i=!0}={}){const o=new et({key:cn,state:{init(s,a){var l,c;const u=(c=(l=o.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,d=Sn(a.schema).table.name;return r&&u&&(u[d]=(f,h)=>new r(f,e,h)),new KO(-1,!1)},apply(s,a){return a.apply(s)}},props:{attributes:s=>{const a=cn.getState(s);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,a)=>{VO(s,a,n,i)},mouseleave:s=>{YO(s)},mousedown:(s,a)=>{GO(s,a,t,e)}},decorations:s=>{const a=cn.getState(s);if(a&&a.activeHandle>-1)return QO(s,a.activeHandle)},nodeViews:{}}});return o}var KO=class yl{constructor(t,e){this.activeHandle=t,this.dragging=e}apply(t){const e=this,r=t.getMeta(cn);if(r&&r.setHandle!=null)return new yl(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new yl(e.activeHandle,r.setDragging);if(e.activeHandle>-1&&t.docChanged){let i=t.mapping.map(e.activeHandle,-1);return of(t.doc.resolve(i))||(i=-1),new yl(i,e.dragging)}return e}};function VO(n,t,e,r){if(!n.editable)return;const i=cn.getState(n.state);if(i&&!i.dragging){const o=JO(t.target);let s=-1;if(o){const{left:a,right:l}=o.getBoundingClientRect();t.clientX-a<=e?s=kb(n,t,"left",e):l-t.clientX<=e&&(s=kb(n,t,"right",e))}if(s!=i.activeHandle){if(!r&&s!==-1){const a=n.state.doc.resolve(s),l=a.node(-1),c=Ie.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}b0(n,s)}}}function YO(n){if(!n.editable)return;const t=cn.getState(n.state);t&&t.activeHandle>-1&&!t.dragging&&b0(n,-1)}function GO(n,t,e,r){var i;if(!n.editable)return!1;const o=(i=n.dom.ownerDocument.defaultView)!=null?i:window,s=cn.getState(n.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const a=n.state.doc.nodeAt(s.activeHandle),l=jO(n,s.activeHandle,a.attrs);n.dispatch(n.state.tr.setMeta(cn,{setDragging:{startX:t.clientX,startWidth:l}}));function c(d){o.removeEventListener("mouseup",c),o.removeEventListener("mousemove",u);const f=cn.getState(n.state);f!=null&&f.dragging&&(XO(n,f.activeHandle,wb(f.dragging,d,e)),n.dispatch(n.state.tr.setMeta(cn,{setDragging:null})))}function u(d){if(!d.which)return c(d);const f=cn.getState(n.state);if(f&&f.dragging){const h=wb(f.dragging,d,e);xb(n,f.activeHandle,h,r)}}return xb(n,s.activeHandle,l,r),o.addEventListener("mouseup",c),o.addEventListener("mousemove",u),t.preventDefault(),!0}function jO(n,t,{colspan:e,colwidth:r}){const i=r&&r[r.length-1];if(i)return i;const o=n.domAtPos(t);let a=o.node.childNodes[o.offset].offsetWidth,l=e;if(r)for(let c=0;c<e;c++)r[c]&&(a-=r[c],l--);return a/l}function JO(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function kb(n,t,e,r){const i=e=="right"?-r:r,o=n.posAtCoords({left:t.clientX+i,top:t.clientY});if(!o)return-1;const{pos:s}=o,a=xa(n.state.doc.resolve(s));if(!a)return-1;if(e=="right")return a.pos;const l=Ie.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function wb(n,t,e){const r=t.clientX-n.startX;return Math.max(e,n.startWidth+r)}function b0(n,t){n.dispatch(n.state.tr.setMeta(cn,{setHandle:t}))}function XO(n,t,e){const r=n.state.doc.resolve(t),i=r.node(-1),o=Ie.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=n.state.tr;for(let c=0;c<o.height;c++){const u=c*o.width+a;if(c&&o.map[u]==o.map[u-o.width])continue;const d=o.map[u],f=i.nodeAt(d).attrs,h=f.colspan==1?0:a-o.colCount(d);if(f.colwidth&&f.colwidth[h]==e)continue;const p=f.colwidth?f.colwidth.slice():ZO(f.colspan);p[h]=e,l.setNodeMarkup(s+d,null,{...f,colwidth:p})}l.docChanged&&n.dispatch(l)}function xb(n,t,e,r){const i=n.state.doc.resolve(t),o=i.node(-1),s=i.start(-1),a=Ie.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1;let l=n.domAtPos(i.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&af(o,l.firstChild,l,r,a,e)}function ZO(n){return Array(n).fill(0)}function QO(n,t){var e;const r=[],i=n.doc.resolve(t),o=i.node(-1);if(!o)return We.empty;const s=Ie.get(o),a=i.start(-1),l=s.colCount(i.pos-a)+i.nodeAfter.attrs.colspan-1;for(let c=0;c<s.height;c++){const u=l+c*s.width;if((l==s.width-1||s.map[u]!=s.map[u+1])&&(c==0||s.map[u]!=s.map[u-s.width])){const d=s.map[u],f=a+d+o.nodeAt(d).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",(e=cn.getState(n))!=null&&e.dragging&&r.push(ct.node(a+d,a+d+o.nodeAt(d).nodeSize,{class:"column-resize-dragging"})),r.push(ct.widget(f,h))}}return We.create(n.doc,r)}function eI({allowTableNodeSelection:n=!1}={}){return new et({key:$r,state:{init(){return null},apply(t,e){const r=t.getMeta($r);if(r!=null)return r==-1?null:r;if(e==null||!t.docChanged)return e;const{deleted:i,pos:o}=t.mapping.mapResult(e);return i?null:o}},props:{decorations:dO,handleDOMEvents:{mousedown:UO},createSelectionBetween(t){return $r.getState(t.state)!=null?t.state.selection:null},handleTripleClick:$O,handleKeyDown:FO,handlePaste:HO},appendTransaction(t,e,r){return pO(r,gO(r,e),n)}})}var Fl=typeof navigator<"u"?navigator:null,Yh=Fl&&Fl.userAgent||"",tI=/Edge\/(\d+)/.exec(Yh),nI=/MSIE \d/.exec(Yh),rI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Yh),iI=!!(nI||rI||tI),oI=!iI&&!!Fl&&/Apple Computer/.test(Fl.vendor),y0=new tt("safari-ime-span"),lf=!1,sI={key:y0,props:{decorations:aI,handleDOMEvents:{compositionstart:()=>{lf=!0},compositionend:()=>{lf=!1}}}};function aI(n){const{$from:t,$to:e,to:r}=n.selection;if(lf&&t.sameParent(e)){const i=ct.widget(r,lI,{ignoreSelection:!0,key:"safari-ime-span"});return We.create(n.doc,[i])}}function lI(n){const t=n.dom.ownerDocument.createElement("span");return t.className="ProseMirror-safari-ime-span",t}var cI=new et(oI?sI:{key:y0});function Eb(n,t){const e=String(n);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=e.indexOf(t);for(;i!==-1;)r++,i=e.indexOf(t,i+t.length);return r}function uI(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function dI(n,t,e){const i=Jl((e||{}).ignore||[]),o=fI(t);let s=-1;for(;++s<o.length;)Tf(n,"text",a);function a(c,u){let d=-1,f;for(;++d<u.length;){const h=u[d],p=f?f.children:void 0;if(i(h,p?p.indexOf(h):void 0,f))return;f=h}if(f)return l(c,u)}function l(c,u){const d=u[u.length-1],f=o[s][0],h=o[s][1];let p=0;const y=d.children.indexOf(c);let k=!1,v=[];f.lastIndex=0;let E=f.exec(c.value);for(;E;){const R=E.index,A={index:E.index,input:E.input,stack:[...u,c]};let w=h(...E,A);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?f.lastIndex=R+1:(p!==R&&v.push({type:"text",value:c.value.slice(p,R)}),Array.isArray(w)?v.push(...w):w&&v.push(w),p=R+E[0].length,k=!0),!f.global)break;E=f.exec(c.value)}return k?(p<c.value.length&&v.push({type:"text",value:c.value.slice(p)}),d.children.splice(y,1,...v)):v=[c],y+v.length}}function fI(n){const t=[];if(!Array.isArray(n))throw new TypeError("Expected find and replace tuple or list of tuples");const e=!n[0]||Array.isArray(n[0])?n:[n];let r=-1;for(;++r<e.length;){const i=e[r];t.push([hI(i[0]),pI(i[1])])}return t}function hI(n){return typeof n=="string"?new RegExp(uI(n),"g"):n}function pI(n){return typeof n=="function"?n:function(){return n}}const Ju="phrasing",Xu=["autolink","link","image","label"];function mI(){return{transforms:[EI],enter:{literalAutolink:bI,literalAutolinkEmail:Zu,literalAutolinkHttp:Zu,literalAutolinkWww:Zu},exit:{literalAutolink:xI,literalAutolinkEmail:wI,literalAutolinkHttp:yI,literalAutolinkWww:kI}}}function gI(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Ju,notInConstruct:Xu},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Ju,notInConstruct:Xu},{character:":",before:"[ps]",after:"\\/",inConstruct:Ju,notInConstruct:Xu}]}}function bI(n){this.enter({type:"link",title:null,url:"",children:[]},n)}function Zu(n){this.config.enter.autolinkProtocol.call(this,n)}function yI(n){this.config.exit.autolinkProtocol.call(this,n)}function kI(n){this.config.exit.data.call(this,n);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(n)}function wI(n){this.config.exit.autolinkEmail.call(this,n)}function xI(n){this.exit(n)}function EI(n){dI(n,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,CI],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),SI]],{ignore:["link","linkReference"]})}function CI(n,t,e,r,i){let o="";if(!k0(i)||(/^w/i.test(t)&&(e=t+e,t="",o="http://"),!vI(e)))return!1;const s=_I(e+r);if(!s[0])return!1;const a={type:"link",title:null,url:o+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[a,{type:"text",value:s[1]}]:a}function SI(n,t,e,r){return!k0(r,!0)||/[-\d_]$/.test(e)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+e,children:[{type:"text",value:t+"@"+e}]}}function vI(n){const t=n.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function _I(n){const t=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!t)return[n,void 0];n=n.slice(0,t.index);let e=t[0],r=e.indexOf(")");const i=Eb(n,"(");let o=Eb(n,")");for(;r!==-1&&i>o;)n+=e.slice(0,r+1),e=e.slice(r+1),r=e.indexOf(")"),o++;return[n,e]}function k0(n,t){const e=n.input.charCodeAt(n.index-1);return(n.index===0||Ui(e)||Gl(e))&&(!t||e!==47)}w0.peek=LI;function NI(){this.buffer()}function TI(n){this.enter({type:"footnoteReference",identifier:"",label:""},n)}function MI(){this.buffer()}function AI(n){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},n)}function OI(n){const t=this.resume(),e=this.stack[this.stack.length-1];e.type,e.identifier=Dn(this.sliceSerialize(n)).toLowerCase(),e.label=t}function II(n){this.exit(n)}function DI(n){const t=this.resume(),e=this.stack[this.stack.length-1];e.type,e.identifier=Dn(this.sliceSerialize(n)).toLowerCase(),e.label=t}function RI(n){this.exit(n)}function LI(){return"["}function w0(n,t,e,r){const i=e.createTracker(r);let o=i.move("[^");const s=e.enter("footnoteReference"),a=e.enter("reference");return o+=i.move(e.safe(e.associationId(n),{after:"]",before:o})),a(),s(),o+=i.move("]"),o}function PI(){return{enter:{gfmFootnoteCallString:NI,gfmFootnoteCall:TI,gfmFootnoteDefinitionLabelString:MI,gfmFootnoteDefinition:AI},exit:{gfmFootnoteCallString:OI,gfmFootnoteCall:II,gfmFootnoteDefinitionLabelString:DI,gfmFootnoteDefinition:RI}}}function BI(n){let t=!1;return n&&n.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:e,footnoteReference:w0},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function e(r,i,o,s){const a=o.createTracker(s);let l=a.move("[^");const c=o.enter("footnoteDefinition"),u=o.enter("label");return l+=a.move(o.safe(o.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((t?`
`:" ")+o.indentLines(o.containerFlow(r,a.current()),t?x0:zI))),c(),l}}function zI(n,t,e){return t===0?n:x0(n,t,e)}function x0(n,t,e){return(e?"":"    ")+n}const FI=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];E0.peek=WI;function $I(){return{canContainEols:["delete"],enter:{strikethrough:UI},exit:{strikethrough:qI}}}function HI(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:FI}],handlers:{delete:E0}}}function UI(n){this.enter({type:"delete",children:[]},n)}function qI(n){this.exit(n)}function E0(n,t,e,r){const i=e.createTracker(r),o=e.enter("strikethrough");let s=i.move("~~");return s+=e.containerPhrasing(n,{...i.current(),before:s,after:"~"}),s+=i.move("~~"),o(),s}function WI(){return"~"}function KI(n){return n.length}function VI(n,t){const e=t||{},r=(e.align||[]).concat(),i=e.stringLength||KI,o=[],s=[],a=[],l=[];let c=0,u=-1;for(;++u<n.length;){const g=[],y=[];let k=-1;for(n[u].length>c&&(c=n[u].length);++k<n[u].length;){const v=YI(n[u][k]);if(e.alignDelimiters!==!1){const E=i(v);y[k]=E,(l[k]===void 0||E>l[k])&&(l[k]=E)}g.push(v)}s[u]=g,a[u]=y}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<c;)o[d]=Cb(r[d]);else{const g=Cb(r);for(;++d<c;)o[d]=g}d=-1;const f=[],h=[];for(;++d<c;){const g=o[d];let y="",k="";g===99?(y=":",k=":"):g===108?y=":":g===114&&(k=":");let v=e.alignDelimiters===!1?1:Math.max(1,l[d]-y.length-k.length);const E=y+"-".repeat(v)+k;e.alignDelimiters!==!1&&(v=y.length+v+k.length,v>l[d]&&(l[d]=v),h[d]=v),f[d]=E}s.splice(1,0,f),a.splice(1,0,h),u=-1;const p=[];for(;++u<s.length;){const g=s[u],y=a[u];d=-1;const k=[];for(;++d<c;){const v=g[d]||"";let E="",R="";if(e.alignDelimiters!==!1){const A=l[d]-(y[d]||0),w=o[d];w===114?E=" ".repeat(A):w===99?A%2?(E=" ".repeat(A/2+.5),R=" ".repeat(A/2-.5)):(E=" ".repeat(A/2),R=E):R=" ".repeat(A)}e.delimiterStart!==!1&&!d&&k.push("|"),e.padding!==!1&&!(e.alignDelimiters===!1&&v==="")&&(e.delimiterStart!==!1||d)&&k.push(" "),e.alignDelimiters!==!1&&k.push(E),k.push(v),e.alignDelimiters!==!1&&k.push(R),e.padding!==!1&&k.push(" "),(e.delimiterEnd!==!1||d!==c-1)&&k.push("|")}p.push(e.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return p.join(`
`)}function YI(n){return n==null?"":String(n)}function Cb(n){const t=typeof n=="string"?n.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function GI(){return{enter:{table:jI,tableData:Sb,tableHeader:Sb,tableRow:XI},exit:{codeText:ZI,table:JI,tableData:Qu,tableHeader:Qu,tableRow:Qu}}}function jI(n){const t=n._align;this.enter({type:"table",align:t.map(function(e){return e==="none"?null:e}),children:[]},n),this.data.inTable=!0}function JI(n){this.exit(n),this.data.inTable=void 0}function XI(n){this.enter({type:"tableRow",children:[]},n)}function Qu(n){this.exit(n)}function Sb(n){this.enter({type:"tableCell",children:[]},n)}function ZI(n){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,QI));const e=this.stack[this.stack.length-1];e.type,e.value=t,this.exit(n)}function QI(n,t){return t==="|"?t:n}function eD(n){const t=n||{},e=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=e?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:s,tableCell:l,tableRow:a}};function s(h,p,g,y){return c(u(h,g,y),h.align)}function a(h,p,g,y){const k=d(h,g,y),v=c([k]);return v.slice(0,v.indexOf(`
`))}function l(h,p,g,y){const k=g.enter("tableCell"),v=g.enter("phrasing"),E=g.containerPhrasing(h,{...y,before:o,after:o});return v(),k(),E}function c(h,p){return VI(h,{align:p,alignDelimiters:r,padding:e,stringLength:i})}function u(h,p,g){const y=h.children;let k=-1;const v=[],E=p.enter("table");for(;++k<y.length;)v[k]=d(y[k],p,g);return E(),v}function d(h,p,g){const y=h.children;let k=-1;const v=[],E=p.enter("tableRow");for(;++k<y.length;)v[k]=l(y[k],h,p,g);return E(),v}function f(h,p,g){let y=Af.inlineCode(h,p,g);return g.stack.includes("tableCell")&&(y=y.replace(/\|/g,"\\$&")),y}}function tD(){return{exit:{taskListCheckValueChecked:vb,taskListCheckValueUnchecked:vb,paragraph:rD}}}function nD(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:iD}}}function vb(n){const t=this.stack[this.stack.length-2];t.type,t.checked=n.type==="taskListCheckValueChecked"}function rD(n){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const e=this.stack[this.stack.length-1];e.type;const r=e.children[0];if(r&&r.type==="text"){const i=t.children;let o=-1,s;for(;++o<i.length;){const a=i[o];if(a.type==="paragraph"){s=a;break}}s===e&&(r.value=r.value.slice(1),r.value.length===0?e.children.shift():e.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,e.position.start=Object.assign({},r.position.start)))}}this.exit(n)}function iD(n,t,e,r){const i=n.children[0],o=typeof n.checked=="boolean"&&i&&i.type==="paragraph",s="["+(n.checked?"x":" ")+"] ",a=e.createTracker(r);o&&a.move(s);let l=Af.listItem(n,t,e,{...r,...a.current()});return o&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+s}}function oD(){return[mI(),PI(),$I(),GI(),tD()]}function sD(n){return{extensions:[gI(),BI(n),HI(),eD(n),nD()]}}const aD={tokenize:hD,partial:!0},C0={tokenize:pD,partial:!0},S0={tokenize:mD,partial:!0},v0={tokenize:gD,partial:!0},lD={tokenize:bD,partial:!0},_0={name:"wwwAutolink",tokenize:dD,previous:T0},N0={name:"protocolAutolink",tokenize:fD,previous:M0},Mr={name:"emailAutolink",tokenize:uD,previous:A0},nr={};function cD(){return{text:nr}}let hi=48;for(;hi<123;)nr[hi]=Mr,hi++,hi===58?hi=65:hi===91&&(hi=97);nr[43]=Mr;nr[45]=Mr;nr[46]=Mr;nr[95]=Mr;nr[72]=[Mr,N0];nr[104]=[Mr,N0];nr[87]=[Mr,_0];nr[119]=[Mr,_0];function uD(n,t,e){const r=this;let i,o;return s;function s(d){return!cf(d)||!A0.call(r,r.previous)||Gh(r.events)?e(d):(n.enter("literalAutolink"),n.enter("literalAutolinkEmail"),a(d))}function a(d){return cf(d)?(n.consume(d),a):d===64?(n.consume(d),l):e(d)}function l(d){return d===46?n.check(lD,u,c)(d):d===45||d===95||Gt(d)?(o=!0,n.consume(d),l):u(d)}function c(d){return n.consume(d),i=!0,l}function u(d){return o&&i&&Rt(r.previous)?(n.exit("literalAutolinkEmail"),n.exit("literalAutolink"),t(d)):e(d)}}function dD(n,t,e){const r=this;return i;function i(s){return s!==87&&s!==119||!T0.call(r,r.previous)||Gh(r.events)?e(s):(n.enter("literalAutolink"),n.enter("literalAutolinkWww"),n.check(aD,n.attempt(C0,n.attempt(S0,o),e),e)(s))}function o(s){return n.exit("literalAutolinkWww"),n.exit("literalAutolink"),t(s)}}function fD(n,t,e){const r=this;let i="",o=!1;return s;function s(d){return(d===72||d===104)&&M0.call(r,r.previous)&&!Gh(r.events)?(n.enter("literalAutolink"),n.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),n.consume(d),a):e(d)}function a(d){if(Rt(d)&&i.length<5)return i+=String.fromCodePoint(d),n.consume(d),a;if(d===58){const f=i.toLowerCase();if(f==="http"||f==="https")return n.consume(d),l}return e(d)}function l(d){return d===47?(n.consume(d),o?c:(o=!0,l)):e(d)}function c(d){return d===null||Ml(d)||He(d)||Ui(d)||Gl(d)?e(d):n.attempt(C0,n.attempt(S0,u),e)(d)}function u(d){return n.exit("literalAutolinkHttp"),n.exit("literalAutolink"),t(d)}}function hD(n,t,e){let r=0;return i;function i(s){return(s===87||s===119)&&r<3?(r++,n.consume(s),i):s===46&&r===3?(n.consume(s),o):e(s)}function o(s){return s===null?e(s):t(s)}}function pD(n,t,e){let r,i,o;return s;function s(c){return c===46||c===95?n.check(v0,l,a)(c):c===null||He(c)||Ui(c)||c!==45&&Gl(c)?l(c):(o=!0,n.consume(c),s)}function a(c){return c===95?r=!0:(i=r,r=void 0),n.consume(c),s}function l(c){return i||r||!o?e(c):t(c)}}function mD(n,t){let e=0,r=0;return i;function i(s){return s===40?(e++,n.consume(s),i):s===41&&r<e?o(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?n.check(v0,t,o)(s):s===null||He(s)||Ui(s)?t(s):(n.consume(s),i)}function o(s){return s===41&&r++,n.consume(s),i}}function gD(n,t,e){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(n.consume(a),r):a===38?(n.consume(a),o):a===93?(n.consume(a),i):a===60||a===null||He(a)||Ui(a)?t(a):e(a)}function i(a){return a===null||a===40||a===91||He(a)||Ui(a)?t(a):r(a)}function o(a){return Rt(a)?s(a):e(a)}function s(a){return a===59?(n.consume(a),r):Rt(a)?(n.consume(a),s):e(a)}}function bD(n,t,e){return r;function r(o){return n.consume(o),i}function i(o){return Gt(o)?e(o):t(o)}}function T0(n){return n===null||n===40||n===42||n===95||n===91||n===93||n===126||He(n)}function M0(n){return!Rt(n)}function A0(n){return!(n===47||cf(n))}function cf(n){return n===43||n===45||n===46||n===95||Gt(n)}function Gh(n){let t=n.length,e=!1;for(;t--;){const r=n[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){e=!0;break}if(r._gfmAutolinkLiteralWalkedInto){e=!1;break}}return n.length>0&&!e&&(n[n.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),e}const yD={tokenize:_D,partial:!0};function kD(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:CD,continuation:{tokenize:SD},exit:vD}},text:{91:{name:"gfmFootnoteCall",tokenize:ED},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:wD,resolveTo:xD}}}}function wD(n,t,e){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){s=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!s||!s._balanced)return e(l);const c=Dn(r.sliceSerialize({start:s.end,end:r.now()}));return c.codePointAt(0)!==94||!o.includes(c.slice(1))?e(l):(n.enter("gfmFootnoteCallLabelMarker"),n.consume(l),n.exit("gfmFootnoteCallLabelMarker"),t(l))}}function xD(n,t){let e=n.length;for(;e--;)if(n[e][1].type==="labelImage"&&n[e][0]==="enter"){n[e][1];break}n[e+1][1].type="data",n[e+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},n[e+3][1].start),end:Object.assign({},n[n.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},n[e+3][1].end),end:Object.assign({},n[e+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},n[n.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},a=[n[e+1],n[e+2],["enter",r,t],n[e+3],n[e+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",s,t],["exit",s,t],["exit",o,t],n[n.length-2],n[n.length-1],["exit",r,t]];return n.splice(e,n.length-e+1,...a),n}function ED(n,t,e){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o=0,s;return a;function a(d){return n.enter("gfmFootnoteCall"),n.enter("gfmFootnoteCallLabelMarker"),n.consume(d),n.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?e(d):(n.enter("gfmFootnoteCallMarker"),n.consume(d),n.exit("gfmFootnoteCallMarker"),n.enter("gfmFootnoteCallString"),n.enter("chunkString").contentType="string",c)}function c(d){if(o>999||d===93&&!s||d===null||d===91||He(d))return e(d);if(d===93){n.exit("chunkString");const f=n.exit("gfmFootnoteCallString");return i.includes(Dn(r.sliceSerialize(f)))?(n.enter("gfmFootnoteCallLabelMarker"),n.consume(d),n.exit("gfmFootnoteCallLabelMarker"),n.exit("gfmFootnoteCall"),t):e(d)}return He(d)||(s=!0),o++,n.consume(d),d===92?u:c}function u(d){return d===91||d===92||d===93?(n.consume(d),o++,c):c(d)}}function CD(n,t,e){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,s=0,a;return l;function l(p){return n.enter("gfmFootnoteDefinition")._container=!0,n.enter("gfmFootnoteDefinitionLabel"),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(p),n.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(p){return p===94?(n.enter("gfmFootnoteDefinitionMarker"),n.consume(p),n.exit("gfmFootnoteDefinitionMarker"),n.enter("gfmFootnoteDefinitionLabelString"),n.enter("chunkString").contentType="string",u):e(p)}function u(p){if(s>999||p===93&&!a||p===null||p===91||He(p))return e(p);if(p===93){n.exit("chunkString");const g=n.exit("gfmFootnoteDefinitionLabelString");return o=Dn(r.sliceSerialize(g)),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(p),n.exit("gfmFootnoteDefinitionLabelMarker"),n.exit("gfmFootnoteDefinitionLabel"),f}return He(p)||(a=!0),s++,n.consume(p),p===92?d:u}function d(p){return p===91||p===92||p===93?(n.consume(p),s++,u):u(p)}function f(p){return p===58?(n.enter("definitionMarker"),n.consume(p),n.exit("definitionMarker"),i.includes(o)||i.push(o),Ce(n,h,"gfmFootnoteDefinitionWhitespace")):e(p)}function h(p){return t(p)}}function SD(n,t,e){return n.check(ua,t,n.attempt(yD,t,e))}function vD(n){n.exit("gfmFootnoteDefinition")}function _D(n,t,e){const r=this;return Ce(n,i,"gfmFootnoteDefinitionIndent",5);function i(o){const s=r.events[r.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?t(o):e(o)}}function ND(n){let e=(n||{}).singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return e==null&&(e=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(s,a){let l=-1;for(;++l<s.length;)if(s[l][0]==="enter"&&s[l][1].type==="strikethroughSequenceTemporary"&&s[l][1]._close){let c=l;for(;c--;)if(s[c][0]==="exit"&&s[c][1].type==="strikethroughSequenceTemporary"&&s[c][1]._open&&s[l][1].end.offset-s[l][1].start.offset===s[c][1].end.offset-s[c][1].start.offset){s[l][1].type="strikethroughSequence",s[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},s[c][1].start),end:Object.assign({},s[l][1].end)},d={type:"strikethroughText",start:Object.assign({},s[c][1].end),end:Object.assign({},s[l][1].start)},f=[["enter",u,a],["enter",s[c][1],a],["exit",s[c][1],a],["enter",d,a]],h=a.parser.constructs.insideSpan.null;h&&un(f,f.length,0,jl(h,s.slice(c+1,l),a)),un(f,f.length,0,[["exit",d,a],["enter",s[l][1],a],["exit",s[l][1],a],["exit",u,a]]),un(s,c-1,l-c+3,f),l=c+f.length-2;break}}for(l=-1;++l<s.length;)s[l][1].type==="strikethroughSequenceTemporary"&&(s[l][1].type="data");return s}function o(s,a,l){const c=this.previous,u=this.events;let d=0;return f;function f(p){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(p):(s.enter("strikethroughSequenceTemporary"),h(p))}function h(p){const g=Lo(c);if(p===126)return d>1?l(p):(s.consume(p),d++,h);if(d<2&&!e)return l(p);const y=s.exit("strikethroughSequenceTemporary"),k=Lo(p);return y._open=!k||k===2&&!!g,y._close=!g||g===2&&!!k,a(p)}}}class TD{constructor(){this.map=[]}add(t,e,r){MD(this,t,e,r)}consume(t){if(this.map.sort(function(o,s){return o[0]-s[0]}),this.map.length===0)return;let e=this.map.length;const r=[];for(;e>0;)e-=1,r.push(t.slice(this.map[e][0]+this.map[e][1]),this.map[e][2]),t.length=this.map[e][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const o of i)t.push(o);i=r.pop()}this.map.length=0}}function MD(n,t,e,r){let i=0;if(!(e===0&&r.length===0)){for(;i<n.map.length;){if(n.map[i][0]===t){n.map[i][1]+=e,n.map[i][2].push(...r);return}i+=1}n.map.push([t,e,r])}}function AD(n,t){let e=!1;const r=[];for(;t<n.length;){const i=n[t];if(e){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(n[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(n[t-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(e=!0);t+=1}return r}function OD(){return{flow:{null:{name:"table",tokenize:ID,resolveAll:DD}}}}function ID(n,t,e){const r=this;let i=0,o=0,s;return a;function a(N){let $=r.events.length-1;for(;$>-1;){const te=r.events[$][1].type;if(te==="lineEnding"||te==="linePrefix")$--;else break}const K=$>-1?r.events[$][1].type:null,Z=K==="tableHead"||K==="tableRow"?w:l;return Z===w&&r.parser.lazy[r.now().line]?e(N):Z(N)}function l(N){return n.enter("tableHead"),n.enter("tableRow"),c(N)}function c(N){return N===124||(s=!0,o+=1),u(N)}function u(N){return N===null?e(N):ie(N)?o>1?(o=0,r.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(N),n.exit("lineEnding"),h):e(N):be(N)?Ce(n,u,"whitespace")(N):(o+=1,s&&(s=!1,i+=1),N===124?(n.enter("tableCellDivider"),n.consume(N),n.exit("tableCellDivider"),s=!0,u):(n.enter("data"),d(N)))}function d(N){return N===null||N===124||He(N)?(n.exit("data"),u(N)):(n.consume(N),N===92?f:d)}function f(N){return N===92||N===124?(n.consume(N),d):d(N)}function h(N){return r.interrupt=!1,r.parser.lazy[r.now().line]?e(N):(n.enter("tableDelimiterRow"),s=!1,be(N)?Ce(n,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):p(N))}function p(N){return N===45||N===58?y(N):N===124?(s=!0,n.enter("tableCellDivider"),n.consume(N),n.exit("tableCellDivider"),g):A(N)}function g(N){return be(N)?Ce(n,y,"whitespace")(N):y(N)}function y(N){return N===58?(o+=1,s=!0,n.enter("tableDelimiterMarker"),n.consume(N),n.exit("tableDelimiterMarker"),k):N===45?(o+=1,k(N)):N===null||ie(N)?R(N):A(N)}function k(N){return N===45?(n.enter("tableDelimiterFiller"),v(N)):A(N)}function v(N){return N===45?(n.consume(N),v):N===58?(s=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(N),n.exit("tableDelimiterMarker"),E):(n.exit("tableDelimiterFiller"),E(N))}function E(N){return be(N)?Ce(n,R,"whitespace")(N):R(N)}function R(N){return N===124?p(N):N===null||ie(N)?!s||i!==o?A(N):(n.exit("tableDelimiterRow"),n.exit("tableHead"),t(N)):A(N)}function A(N){return e(N)}function w(N){return n.enter("tableRow"),T(N)}function T(N){return N===124?(n.enter("tableCellDivider"),n.consume(N),n.exit("tableCellDivider"),T):N===null||ie(N)?(n.exit("tableRow"),t(N)):be(N)?Ce(n,T,"whitespace")(N):(n.enter("data"),I(N))}function I(N){return N===null||N===124||He(N)?(n.exit("data"),T(N)):(n.consume(N),N===92?F:I)}function F(N){return N===92||N===124?(n.consume(N),I):I(N)}}function DD(n,t){let e=-1,r=!0,i=0,o=[0,0,0,0],s=[0,0,0,0],a=!1,l=0,c,u,d;const f=new TD;for(;++e<n.length;){const h=n[e],p=h[1];h[0]==="enter"?p.type==="tableHead"?(a=!1,l!==0&&(_b(f,t,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(e,0,[["enter",c,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,d=void 0,o=[0,0,0,0],s=[0,e+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(e,0,[["enter",u,t]])),i=p.type==="tableDelimiterRow"?2:u?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,s[2]===0&&(o[1]!==0&&(s[0]=s[1],d=Ja(f,t,o,i,void 0,d),o=[0,0,0,0]),s[2]=e)):p.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(s[0]=s[1],d=Ja(f,t,o,i,void 0,d)),o=s,s=[o[1],e,0,0])):p.type==="tableHead"?(a=!0,l=e):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=e,o[1]!==0?(s[0]=s[1],d=Ja(f,t,o,i,e,d)):s[1]!==0&&(d=Ja(f,t,s,i,e,d)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(s[3]=e)}for(l!==0&&_b(f,t,l,c,u),f.consume(t.events),e=-1;++e<t.events.length;){const h=t.events[e];h[0]==="enter"&&h[1].type==="table"&&(h[1]._align=AD(t.events,e))}return n}function Ja(n,t,e,r,i,o){const s=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";e[0]!==0&&(o.end=Object.assign({},so(t.events,e[0])),n.add(e[0],0,[["exit",o,t]]));const l=so(t.events,e[1]);if(o={type:s,start:Object.assign({},l),end:Object.assign({},l)},n.add(e[1],0,[["enter",o,t]]),e[2]!==0){const c=so(t.events,e[2]),u=so(t.events,e[3]),d={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(n.add(e[2],0,[["enter",d,t]]),r!==2){const f=t.events[e[2]],h=t.events[e[3]];if(f[1].end=Object.assign({},h[1].end),f[1].type="chunkText",f[1].contentType="text",e[3]>e[2]+1){const p=e[2]+1,g=e[3]-e[2]-1;n.add(p,g,[])}}n.add(e[3]+1,0,[["exit",d,t]])}return i!==void 0&&(o.end=Object.assign({},so(t.events,i)),n.add(i,0,[["exit",o,t]]),o=void 0),o}function _b(n,t,e,r,i){const o=[],s=so(t.events,e);i&&(i.end=Object.assign({},s),o.push(["exit",i,t])),r.end=Object.assign({},s),o.push(["exit",r,t]),n.add(e+1,0,o)}function so(n,t){const e=n[t],r=e[0]==="enter"?"start":"end";return e[1][r]}const RD={name:"tasklistCheck",tokenize:PD};function LD(){return{text:{91:RD}}}function PD(n,t,e){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?e(l):(n.enter("taskListCheck"),n.enter("taskListCheckMarker"),n.consume(l),n.exit("taskListCheckMarker"),o)}function o(l){return He(l)?(n.enter("taskListCheckValueUnchecked"),n.consume(l),n.exit("taskListCheckValueUnchecked"),s):l===88||l===120?(n.enter("taskListCheckValueChecked"),n.consume(l),n.exit("taskListCheckValueChecked"),s):e(l)}function s(l){return l===93?(n.enter("taskListCheckMarker"),n.consume(l),n.exit("taskListCheckMarker"),n.exit("taskListCheck"),a):e(l)}function a(l){return ie(l)?t(l):be(l)?n.check({tokenize:BD},t,e)(l):e(l)}}function BD(n,t,e){return Ce(n,r,"whitespace");function r(i){return i===null?e(i):t(i)}}function zD(n){return By([cD(),kD(),ND(n),OD(),LD()])}const FD={};function $D(n){const t=this,e=n||FD,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),o=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),s=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(zD(e)),o.push(oD()),s.push(sD(e))}function ae(n,t){return Object.assign(n,{meta:{package:"@milkdown/preset-gfm",...t}}),n}const jh=ga("strike_through");ae(jh,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const Ca=Uo("strike_through",n=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:t=>t==="line-through"}],toDOM:t=>["del",n.get(jh.key)(t)],parseMarkdown:{match:t=>t.type==="delete",runner:(t,e,r)=>{t.openMark(r),t.next(e.children),t.closeMark(r)}},toMarkdown:{match:t=>t.type.name==="strike_through",runner:(t,e)=>{t.withMark(e,"delete")}}}));ae(Ca.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});ae(Ca.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const Jh=ue("ToggleStrikeThrough",n=>()=>nc(Ca.type(n)));ae(Jh,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const O0=en(n=>fa(new RegExp("(?<![\\w:/])(~{1,2})(.+?)\\1(?!\\w|\\/)"),Ca.type(n)));ae(O0,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const Xh=tn("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:n=>{const t=n.get(Oe);return()=>t.call(Jh.key)}}});ae(Xh.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});ae(Xh.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});const Sa=oO({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:n=>n.style.textAlign||"left",setDOMAttr:(n,t)=>{t.style=`text-align: ${n||"left"}`}}}}),Yo=ut("table",()=>({...Sa.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="table",runner:(n,t,e)=>{const r=t.align,i=t.children.map((o,s)=>({...o,align:r,isHeader:s===0}));n.openNode(e),n.next(i),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table",runner:(n,t)=>{var i;const e=(i=t.content.firstChild)==null?void 0:i.content;if(!e)return;const r=[];e.forEach(o=>{r.push(o.attrs.alignment)}),n.openNode("table",void 0,{align:r}),n.next(t.content),n.closeNode()}}}));ae(Yo.node,{displayName:"NodeSchema<table>",group:"Table"});ae(Yo.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const uc=ut("table_header_row",()=>({...Sa.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:n=>!!(n.type==="tableRow"&&n.isHeader),runner:(n,t,e)=>{const r=t.align,i=t.children.map((o,s)=>({...o,align:r[s],isHeader:t.isHeader}));n.openNode(e),n.next(i),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_header_row",runner:(n,t)=>{n.openNode("tableRow",void 0,{isHeader:!0}),n.next(t.content),n.closeNode()}}}));ae(uc.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});ae(uc.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});const va=ut("table_row",()=>({...Sa.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:n=>n.type==="tableRow",runner:(n,t,e)=>{const r=t.align,i=t.children.map((o,s)=>({...o,align:r[s]}));n.openNode(e),n.next(i),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_row",runner:(n,t)=>{t.content.size!==0&&(n.openNode("tableRow"),n.next(t.content),n.closeNode())}}}));ae(va.node,{displayName:"NodeSchema<tableRow>",group:"Table"});ae(va.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const _a=ut("table_cell",()=>({...Sa.table_cell,disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="tableCell"&&!n.isHeader,runner:(n,t,e)=>{const r=t.align;n.openNode(e,{alignment:r}).openNode(n.schema.nodes.paragraph).next(t.children).closeNode().closeNode()}},toMarkdown:{match:n=>n.type.name==="table_cell",runner:(n,t)=>{n.openNode("tableCell").next(t.content).closeNode()}}}));ae(_a.node,{displayName:"NodeSchema<tableCell>",group:"Table"});ae(_a.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const dc=ut("table_header",()=>({...Sa.table_header,disableDropCursor:!0,parseMarkdown:{match:n=>n.type==="tableCell"&&!!n.isHeader,runner:(n,t,e)=>{const r=t.align;n.openNode(e,{alignment:r}),n.openNode(n.schema.nodes.paragraph),n.next(t.children),n.closeNode(),n.closeNode()}},toMarkdown:{match:n=>n.type.name==="table_header",runner:(n,t)=>{n.openNode("tableCell"),n.next(t.content),n.closeNode()}}}));ae(dc.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});ae(dc.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function I0(n,t=3,e=3){const r=Array(e).fill(0).map(()=>_a.type(n).createAndFill()),i=Array(e).fill(0).map(()=>dc.type(n).createAndFill()),o=Array(t).fill(0).map((s,a)=>a===0?uc.type(n).create(null,i):va.type(n).create(null,r));return Yo.type(n).create(null,o)}function D0(n){return(t,e)=>r=>{e=e??r.selection.from;const i=r.doc.resolve(e),o=pT(l=>l.type.name==="table")(i),s=o?{node:o.node,from:o.start}:void 0,a=n==="row";if(s){const l=Ie.get(s.node);if(t>=0&&t<(a?l.height:l.width)){const c=l.positionAt(a?t:l.height-1,a?l.width-1:t,s.node),u=r.doc.resolve(s.from+c),d=a?Ye.rowSelection:Ye.colSelection,f=l.positionAt(a?t:0,a?0:t,s.node),h=r.doc.resolve(s.from+f);return qk(r.setSelection(d(u,h)))}}return r}}const HD=D0("row"),UD=D0("col");function R0(n,t,{map:e,tableStart:r,table:i},o){const s=Array(o).fill(0).reduce((l,c,u)=>l+i.child(u).nodeSize,r),a=Array(e.width).fill(0).map((l,c)=>{const u=i.nodeAt(e.map[c]);return _a.type(n).createAndFill({alignment:u==null?void 0:u.attrs.alignment})});return t.insert(s,va.type(n).create(null,a)),t}function qD(n){const t=Ea(n.$from);if(!t)return;const e=Ie.get(t.node);return e.cellsInRect({left:0,right:e.width,top:0,bottom:e.height}).map(i=>{const o=t.node.nodeAt(i),s=i+t.start;return{pos:s,start:s+1,node:o}})}function WD(n){const t=qD(n.selection);if(t&&t[0]){const e=n.doc.resolve(t[0].pos),r=t[t.length-1];if(r){const i=n.doc.resolve(r.pos);return qk(n.setSelection(new Ye(i,e)))}}return n}const Zh=ue("GoToPrevTableCell",()=>()=>m0(-1));ae(Zh,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const Qh=ue("GoToNextTableCell",()=>()=>m0(1));ae(Qh,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const ep=ue("ExitTable",n=>()=>(t,e)=>{if(!vn(t))return!1;const{$head:r}=t.selection,i=fT(r,Yo.type(n));if(!i)return!1;const{to:o}=i,s=t.tr.replaceWith(o,o,si.type(n).createAndFill());return s.setSelection(le.near(s.doc.resolve(o),1)).scrollIntoView(),e==null||e(s),!0});ae(ep,{displayName:"Command<breakTableCommand>",group:"Table"});const L0=ue("InsertTable",n=>({row:t,col:e}={})=>(r,i)=>{const{selection:o,tr:s}=r,{from:a}=o,l=I0(n,t,e),c=s.replaceSelectionWith(l),u=le.findFrom(c.doc.resolve(a),1,!0);return u&&c.setSelection(u),i==null||i(c),!0});ae(L0,{displayName:"Command<insertTableCommand>",group:"Table"});const P0=ue("MoveRow",()=>({from:n,to:t,pos:e}={})=>DO({from:n??0,to:t??0,pos:e}));ae(P0,{displayName:"Command<moveRowCommand>",group:"Table"});const B0=ue("MoveCol",()=>({from:n,to:t,pos:e}={})=>RO({from:n??0,to:t??0,pos:e}));ae(B0,{displayName:"Command<moveColCommand>",group:"Table"});const z0=ue("SelectRow",()=>(n={index:0})=>(t,e)=>{const{tr:r}=t;return!!(e==null?void 0:e(HD(n.index,n.pos)(r)))});ae(z0,{displayName:"Command<selectRowCommand>",group:"Table"});const F0=ue("SelectCol",()=>(n={index:0})=>(t,e)=>{const{tr:r}=t;return!!(e==null?void 0:e(UD(n.index,n.pos)(r)))});ae(F0,{displayName:"Command<selectColCommand>",group:"Table"});const $0=ue("SelectTable",()=>()=>(n,t)=>{const{tr:e}=n;return!!(t==null?void 0:t(WD(e)))});ae($0,{displayName:"Command<selectTableCommand>",group:"Table"});const H0=ue("DeleteSelectedCells",()=>()=>(n,t)=>{const{selection:e}=n;if(!(e instanceof Ye))return!1;const r=e.isRowSelection(),i=e.isColSelection();return r&&i?IO(n,t):i?_O(n,t):TO(n,t)});ae(H0,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const U0=ue("AddColBefore",()=>()=>CO);ae(U0,{displayName:"Command<addColBeforeCommand>",group:"Table"});const q0=ue("AddColAfter",()=>()=>SO);ae(q0,{displayName:"Command<addColAfterCommand>",group:"Table"});const W0=ue("AddRowBefore",n=>()=>(t,e)=>{if(!vn(t))return!1;if(e){const r=ai(t);e(R0(n,t.tr,r,r.top))}return!0});ae(W0,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const K0=ue("AddRowAfter",n=>()=>(t,e)=>{if(!vn(t))return!1;if(e){const r=ai(t);e(R0(n,t.tr,r,r.bottom))}return!0});ae(K0,{displayName:"Command<addRowAfterCommand>",group:"Table"});const V0=ue("SetAlign",()=>(n="left")=>MO("alignment",n));ae(V0,{displayName:"Command<setAlignCommand>",group:"Table"});const Y0=en(n=>new hn(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(t,e,r,i)=>{var c,u;const o=t.doc.resolve(r);if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),Yo.type(n)))return null;const s=Math.max(Number(((c=e.groups)==null?void 0:c.row)??0),2),a=I0(n,s,Number((u=e.groups)==null?void 0:u.col)),l=t.tr.replaceRangeWith(r,i,a);return l.setSelection(ce.create(l.doc,r+3)).scrollIntoView()}));ae(Y0,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const tp=tn("tableKeymap",{NextCell:{priority:100,shortcuts:["Mod-]","Tab"],command:n=>{const t=n.get(Oe);return()=>t.call(Qh.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:n=>{const t=n.get(Oe);return()=>t.call(Zh.key)}},ExitTable:{shortcuts:["Mod-Enter","Enter"],command:n=>{const t=n.get(Oe);return()=>t.call(ep.key)}}});ae(tp.ctx,{displayName:"KeymapCtx<table>",group:"Table"});ae(tp.shortcuts,{displayName:"Keymap<table>",group:"Table"});const ed="footnote_definition",Nb="footnoteDefinition",np=ut("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`dl[data-type="${ed}"]`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw tr(n);return{label:n.dataset.label}},contentElement:"dd"}],toDOM:n=>{const t=n.attrs.label;return["dl",{"data-label":t,"data-type":ed},["dt",t],["dd",0]]},parseMarkdown:{match:({type:n})=>n===Nb,runner:(n,t,e)=>{n.openNode(e,{label:t.label}).next(t.children).closeNode()}},toMarkdown:{match:n=>n.type.name===ed,runner:(n,t)=>{n.openNode(Nb,void 0,{label:t.attrs.label,identifier:t.attrs.label}).next(t.content).closeNode()}}}));ae(np.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});ae(np.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const td="footnote_reference",rp=ut("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:"",validate:"string"}},parseDOM:[{tag:`sup[data-type="${td}"]`,getAttrs:n=>{if(!(n instanceof HTMLElement))throw tr(n);return{label:n.dataset.label}}}],toDOM:n=>{const t=n.attrs.label;return["sup",{"data-label":t,"data-type":td},t]},parseMarkdown:{match:({type:n})=>n==="footnoteReference",runner:(n,t,e)=>{n.addNode(e,{label:t.label})}},toMarkdown:{match:n=>n.type.name===td,runner:(n,t)=>{n.addNode("footnoteReference",void 0,void 0,{label:t.attrs.label,identifier:t.attrs.label})}}}));ae(rp.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});ae(rp.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const ip=Tr.extendSchema(n=>t=>{const e=n(t);return{...e,attrs:{...e.attrs,checked:{default:null,validate:"boolean|null"}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:r=>{if(!(r instanceof HTMLElement))throw tr(r);return{label:r.dataset.label,listType:r.dataset.listType,spread:r.dataset.spread,checked:r.dataset.checked?r.dataset.checked==="true":null}}},...(e==null?void 0:e.parseDOM)||[]],toDOM:r=>e.toDOM&&r.attrs.checked==null?e.toDOM(r):["li",{"data-item-type":"task","data-label":r.attrs.label,"data-list-type":r.attrs.listType,"data-spread":r.attrs.spread,"data-checked":r.attrs.checked},0],parseMarkdown:{match:({type:r})=>r==="listItem",runner:(r,i,o)=>{if(i.checked==null){e.parseMarkdown.runner(r,i,o);return}const s=i.label!=null?`${i.label}.`:"•",a=i.checked!=null?!!i.checked:null,l=i.label!=null?"ordered":"bullet",c=i.spread!=null?`${i.spread}`:"true";r.openNode(o,{label:s,listType:l,spread:c,checked:a}),r.next(i.children),r.closeNode()}},toMarkdown:{match:r=>r.type.name==="list_item",runner:(r,i)=>{if(i.attrs.checked==null){e.toMarkdown.runner(r,i);return}const o=i.attrs.label,s=i.attrs.listType,a=i.attrs.spread==="true",l=i.attrs.checked;r.openNode("listItem",void 0,{label:o,listType:s,spread:a,checked:l}),r.next(i.content),r.closeNode()}}}});ae(ip.node,{displayName:"NodeSchema<taskListItem>",group:"ListItem"});ae(ip.ctx,{displayName:"NodeSchemaCtx<taskListItem>",group:"ListItem"});const G0=en(()=>new hn(/^\[(?<checked>\s|x)\]\s$/,(n,t,e,r)=>{var u;const i=n.doc.resolve(e);let o=0,s=i.node(o);for(;s&&s.type.name!=="list_item";)o--,s=i.node(o);if(!s||s.attrs.checked!=null)return null;const a=((u=t.groups)==null?void 0:u.checked)==="x",l=i.before(o),c=n.tr;return c.deleteRange(e,r).setNodeMarkup(l,void 0,{...s.attrs,checked:a}),c}));ae(G0,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const KD=[Xh,tp].flat(),VD=[Y0,G0],YD=[O0],j0=Et(()=>cI);ae(j0,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});const GD=Et(()=>WO({}));ae(GD,{displayName:"Prose<columnResizingPlugin>",group:"Prose"});const J0=Et(()=>eI({allowTableNodeSelection:!0}));ae(J0,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});const op=ji("remarkGFM",()=>$D);ae(op.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});ae(op.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const jD=new tt("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function JD(n,t){let e=0;return t.forEach((r,i,o)=>{r===n&&(e=o)}),e}const X0=Et(()=>new et({key:jD,appendTransaction:(n,t,e)=>{let r;const i=(o,s)=>{if(r||(r=e.tr),o.type.name!=="table_cell")return;const a=e.doc.resolve(s),l=a.node(a.depth),u=a.node(a.depth-1).firstChild;if(!u)return;const d=JD(o,l),f=u.maybeChild(d);if(!f)return;const h=f.attrs.alignment,p=o.attrs.alignment;h!==p&&r.setNodeMarkup(s,void 0,{...o.attrs,alignment:h})};return t.doc!==e.doc&&e.doc.descendants(i),r}}));ae(X0,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});const XD=[X0,j0,op,J0].flat(),ZD=[ip,Yo,uc,va,dc,_a,np,rp,jh,Ca].flat(),QD=[Qh,Zh,ep,L0,P0,B0,z0,F0,$0,H0,W0,K0,U0,q0,V0,Jh],eR=[ZD,VD,YD,KD,QD,XD].flat();var tR=typeof global=="object"&&global&&global.Object===Object&&global,nR=typeof self=="object"&&self&&self.Object===Object&&self,Z0=tR||nR||Function("return this")(),$l=Z0.Symbol,Q0=Object.prototype,rR=Q0.hasOwnProperty,iR=Q0.toString,rs=$l?$l.toStringTag:void 0;function oR(n){var t=rR.call(n,rs),e=n[rs];try{n[rs]=void 0;var r=!0}catch{}var i=iR.call(n);return r&&(t?n[rs]=e:delete n[rs]),i}var sR=Object.prototype,aR=sR.toString;function lR(n){return aR.call(n)}var cR="[object Null]",uR="[object Undefined]",Tb=$l?$l.toStringTag:void 0;function dR(n){return n==null?n===void 0?uR:cR:Tb&&Tb in Object(n)?oR(n):lR(n)}function fR(n){return n!=null&&typeof n=="object"}var hR="[object Symbol]";function pR(n){return typeof n=="symbol"||fR(n)&&dR(n)==hR}var mR=/\s/;function gR(n){for(var t=n.length;t--&&mR.test(n.charAt(t)););return t}var bR=/^\s+/;function yR(n){return n&&n.slice(0,gR(n)+1).replace(bR,"")}function Hl(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var Mb=NaN,kR=/^[-+]0x[0-9a-f]+$/i,wR=/^0b[01]+$/i,xR=/^0o[0-7]+$/i,ER=parseInt;function Ab(n){if(typeof n=="number")return n;if(pR(n))return Mb;if(Hl(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=Hl(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=yR(n);var e=wR.test(n);return e||xR.test(n)?ER(n.slice(2),e?2:8):kR.test(n)?Mb:+n}var nd=function(){return Z0.Date.now()},CR="Expected a function",SR=Math.max,vR=Math.min;function ex(n,t,e){var r,i,o,s,a,l,c=0,u=!1,d=!1,f=!0;if(typeof n!="function")throw new TypeError(CR);t=Ab(t)||0,Hl(e)&&(u=!!e.leading,d="maxWait"in e,o=d?SR(Ab(e.maxWait)||0,t):o,f="trailing"in e?!!e.trailing:f);function h(w){var T=r,I=i;return r=i=void 0,c=w,s=n.apply(I,T),s}function p(w){return c=w,a=setTimeout(k,t),u?h(w):s}function g(w){var T=w-l,I=w-c,F=t-T;return d?vR(F,o-I):F}function y(w){var T=w-l,I=w-c;return l===void 0||T>=t||T<0||d&&I>=o}function k(){var w=nd();if(y(w))return v(w);a=setTimeout(k,g(w))}function v(w){return a=void 0,f&&r?h(w):(r=i=void 0,s)}function E(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function R(){return a===void 0?s:v(nd())}function A(){var w=nd(),T=y(w);if(r=arguments,i=this,l=w,T){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(k,t),h(l)}return a===void 0&&(a=setTimeout(k,t)),s}return A.cancel=E,A.flush=R,A}var _R="Expected a function";function NR(n,t,e){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(_R);return Hl(e)&&(r="leading"in e?!!e.leading:r,i="trailing"in e?!!e.trailing:i),ex(n,t,{leading:r,maxWait:t,trailing:i})}class tx{constructor(){this.beforeMountedListeners=[],this.mountedListeners=[],this.updatedListeners=[],this.selectionUpdatedListeners=[],this.markdownUpdatedListeners=[],this.blurListeners=[],this.focusListeners=[],this.destroyListeners=[],this.beforeMount=t=>(this.beforeMountedListeners.push(t),this),this.mounted=t=>(this.mountedListeners.push(t),this),this.updated=t=>(this.updatedListeners.push(t),this)}get listeners(){return{beforeMount:this.beforeMountedListeners,mounted:this.mountedListeners,updated:this.updatedListeners,markdownUpdated:this.markdownUpdatedListeners,blur:this.blurListeners,focus:this.focusListeners,destroy:this.destroyListeners,selectionUpdated:this.selectionUpdatedListeners}}markdownUpdated(t){return this.markdownUpdatedListeners.push(t),this}blur(t){return this.blurListeners.push(t),this}focus(t){return this.focusListeners.push(t),this}destroy(t){return this.destroyListeners.push(t),this}selectionUpdated(t){return this.selectionUpdatedListeners.push(t),this}}const uf=Se(new tx,"listener"),TR=new tt("MILKDOWN_LISTENER"),nx=n=>(n.inject(uf,new tx),async()=>{await n.wait(Li);const t=n.get(uf),{listeners:e}=t;e.beforeMount.forEach(l=>l(n)),await n.wait(Rs);const r=n.get(go);let i=null,o=null,s=null;const a=new et({key:TR,view:()=>({destroy:()=>{e.destroy.forEach(l=>l(n))}}),props:{handleDOMEvents:{focus:()=>(e.focus.forEach(l=>l(n)),!1),blur:()=>(e.blur.forEach(l=>l(n)),!1)}},state:{init:(l,c)=>{i=c.doc,o=r(c.doc)},apply:l=>{const c=l.selection;return(!s&&c||s&&!c.eq(s))&&(e.selectionUpdated.forEach(d=>{d(n,c,s)}),s=c),!l.docChanged||l.getMeta("addToHistory")===!1?void 0:ex(()=>{const{doc:d}=l;if(e.updated.length>0&&i&&!i.eq(d)&&e.updated.forEach(f=>{f(n,d,i)}),e.markdownUpdated.length>0&&i&&!i.eq(d)){const f=r(d);e.markdownUpdated.forEach(h=>{h(n,f,o)}),o=f}i=d},200)()}}});n.update(vr,l=>l.concat(a)),await n.wait(ml),e.mounted.forEach(l=>l(n))});nx.meta={package:"@milkdown/plugin-listener",displayName:"Listener"};var Ul=200,ht=function(){};ht.prototype.append=function(t){return t.length?(t=ht.from(t),!this.length&&t||t.length<Ul&&this.leafAppend(t)||this.length<Ul&&t.leafPrepend(this)||this.appendInner(t)):this};ht.prototype.prepend=function(t){return t.length?ht.from(t).append(this):this};ht.prototype.appendInner=function(t){return new MR(this,t)};ht.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?ht.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};ht.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};ht.prototype.forEach=function(t,e,r){e===void 0&&(e=0),r===void 0&&(r=this.length),e<=r?this.forEachInner(t,e,r,0):this.forEachInvertedInner(t,e,r,0)};ht.prototype.map=function(t,e,r){e===void 0&&(e=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(t(o,s))},e,r),i};ht.from=function(t){return t instanceof ht?t:t&&t.length?new rx(t):ht.empty};var rx=(function(n){function t(r){n.call(this),this.values=r}n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new t(this.values.slice(i,o))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=Ul)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=Ul)return new t(i.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t})(ht);ht.empty=new rx([]);var MR=(function(n){function t(e,r){n.call(this),this.left=e,this.right=r,this.length=e.length+r.length,this.depth=Math.max(e.depth,r.depth)+1}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(ht);const AR=500;class In{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;e&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=t.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,u.push(d);return}if(i){u.push(new Yn(d.map));let h=d.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new Yn(p,void 0,void 0,c.length+u.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(o)):d.selection,l=new In(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(t,e,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<t.steps.length;u++){let d=t.steps[u].invert(t.docs[u]),f=new Yn(t.mapping.maps[u],d,e),h;(h=l&&l.merge(f))&&(f=h,u?o.pop():a=a.slice(0,a.length-1)),o.push(f),e&&(s++,e=void 0),i||(l=f)}let c=s-r.depth;return c>IR&&(a=OR(a,c),s-=c),new In(a.append(o),s)}remapping(t,e){let r=new Hs;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},t,e),r}addMaps(t){return this.eventCount==0?this:new In(this.items.append(t.map(e=>new Yn(e))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-e),o=t.mapping,s=t.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=e;this.items.forEach(f=>{let h=o.getMirror(--l);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(f.step){let g=t.steps[h].invert(t.docs[h]),y=f.selection&&f.selection.map(o.slice(l+1,h));y&&a++,r.push(new Yn(p,g,y))}else r.push(new Yn(p))},i);let c=[];for(let f=e;f<s;f++)c.push(new Yn(o.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new In(u,a);return d.emptyItemCount()>AR&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),r=e.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=t)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(e.slice(r)),c=l&&l.getMap();if(r--,c&&e.appendMap(c,r),l){let u=s.selection&&s.selection.map(e.slice(r));u&&o++;let d=new Yn(c.invert(),l,u),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new In(ht.from(i.reverse()),o)}}In.empty=new In(ht.empty,0);function OR(n,t){let e;return n.forEach((r,i)=>{if(r.selection&&t--==0)return e=i,!1}),n.slice(e)}class Yn{constructor(t,e,r,i){this.map=t,this.step=e,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new Yn(e.getMap().invert(),e,this.selection)}}}class zr{constructor(t,e,r,i,o){this.done=t,this.undone=e,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const IR=20;function DR(n,t,e,r){let i=e.getMeta(zi),o;if(i)return i.historyState;e.getMeta(PR)&&(n=new zr(n.done,n.undone,null,0,-1));let s=e.getMeta("appendedTransaction");if(e.steps.length==0)return n;if(s&&s.getMeta(zi))return s.getMeta(zi).redo?new zr(n.done.addTransform(e,void 0,r,kl(t)),n.undone,Ob(e.mapping.maps),n.prevTime,n.prevComposition):new zr(n.done,n.undone.addTransform(e,void 0,r,kl(t)),null,n.prevTime,n.prevComposition);if(e.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=e.getMeta("composition"),l=n.prevTime==0||!s&&n.prevComposition!=a&&(n.prevTime<(e.time||0)-r.newGroupDelay||!RR(e,n.prevRanges)),c=s?rd(n.prevRanges,e.mapping):Ob(e.mapping.maps);return new zr(n.done.addTransform(e,l?t.selection.getBookmark():void 0,r,kl(t)),In.empty,c,e.time,a??n.prevComposition)}else return(o=e.getMeta("rebased"))?new zr(n.done.rebased(e,o),n.undone.rebased(e,o),rd(n.prevRanges,e.mapping),n.prevTime,n.prevComposition):new zr(n.done.addMaps(e.mapping.maps),n.undone.addMaps(e.mapping.maps),rd(n.prevRanges,e.mapping),n.prevTime,n.prevComposition)}function RR(n,t){if(!t)return!1;if(!n.docChanged)return!0;let e=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<t.length;o+=2)r<=t[o+1]&&i>=t[o]&&(e=!0)}),e}function Ob(n){let t=[];for(let e=n.length-1;e>=0&&t.length==0;e--)n[e].forEach((r,i,o,s)=>t.push(o,s));return t}function rd(n,t){if(!n)return null;let e=[];for(let r=0;r<n.length;r+=2){let i=t.map(n[r],1),o=t.map(n[r+1],-1);i<=o&&e.push(i,o)}return e}function LR(n,t,e){let r=kl(t),i=zi.get(t).spec.config,o=(e?n.undone:n.done).popEvent(t,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(e?n.done:n.undone).addTransform(o.transform,t.selection.getBookmark(),i,r),l=new zr(e?a:o.remaining,e?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(zi,{redo:e,historyState:l})}let id=!1,Ib=null;function kl(n){let t=n.plugins;if(Ib!=t){id=!1,Ib=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){id=!0;break}}return id}const zi=new tt("history"),PR=new tt("closeHistory");function BR(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new et({key:zi,state:{init(){return new zr(In.empty,In.empty,null,0,-1)},apply(t,e,r){return DR(e,r,t,n)}},config:n,props:{handleDOMEvents:{beforeinput(t,e){let r=e.inputType,i=r=="historyUndo"?ox:r=="historyRedo"?sx:null;return i?(e.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function ix(n,t){return(e,r)=>{let i=zi.getState(e);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let o=LR(i,e,n);o&&r(t?o.scrollIntoView():o)}return!0}}const ox=ix(!1,!0),sx=ix(!0,!0);function Go(n,t){return Object.assign(n,{meta:{package:"@milkdown/plugin-history",...t}}),n}const sp=ue("Undo",()=>()=>ox);Go(sp,{displayName:"Command<undo>"});const ap=ue("Redo",()=>()=>sx);Go(ap,{displayName:"Command<redo>"});const lp=pt({},"historyProviderConfig");Go(lp,{displayName:"Ctx<historyProviderConfig>"});const ax=Et(n=>BR(n.get(lp.key)));Go(ax,{displayName:"Ctx<historyProviderPlugin>"});const cp=tn("historyKeymap",{Undo:{shortcuts:"Mod-z",command:n=>{const t=n.get(Oe);return()=>t.call(sp.key)}},Redo:{shortcuts:["Mod-y","Shift-Mod-z"],command:n=>{const t=n.get(Oe);return()=>t.call(ap.key)}}});Go(cp.ctx,{displayName:"KeymapCtx<history>"});Go(cp.shortcuts,{displayName:"Keymap<history>"});const zR=[lp,ax,cp,sp,ap].flat();function df(n){if(!n)return!1;if(Array.isArray(n))return n.length>1?!1:df(n[0]);const t=n.content;return t?df(t):n.type==="text"}const lx=Et(n=>{const t=n.get(Xt);n.update(Ls,i=>({...i,editable:i.editable??(()=>!0)}));const e=new tt("MILKDOWN_CLIPBOARD");return new et({key:e,props:{handlePaste:(i,o)=>{var k,v;const s=n.get(Pi),a=(v=(k=i.props).editable)==null?void 0:v.call(k,i.state),{clipboardData:l}=o;if(!a||!l||i.state.selection.$from.node().type.spec.code)return!1;const u=l.getData("text/plain"),d=l.getData("vscode-editor-data");if(d){const E=JSON.parse(d),R=E==null?void 0:E.mode;if(u&&R){const{tr:A}=i.state,w=hT("code_block",t);return A.replaceSelectionWith(w.create({language:R})).setSelection(ce.near(A.doc.resolve(Math.max(0,A.selection.from-2)))).insertText(u.replace(/\r\n?/g,`
`)),i.dispatch(A),!0}}const f=l.getData("text/html");if(f.length===0&&u.length===0)return!1;const h=Zr.fromSchema(t);let p;if(f.length===0){const E=s(u);if(!E||typeof E=="string")return!1;p=Nr.fromSchema(t).serializeFragment(E.content)}else{const E=document.createElement("template");E.innerHTML=f,p=E.content.cloneNode(!0),E.remove()}const g=h.parseSlice(p),y=Wk(g);return y?(i.dispatch(i.state.tr.replaceSelectionWith(y,!0)),!0):(i.dispatch(i.state.tr.replaceSelection(g)),!0)},clipboardTextSerializer:i=>{const o=n.get(go);if(df(i.content.toJSON()))return i.content.textBetween(0,i.content.size,`

`);const a=t.topNodeType.createAndFill(void 0,i.content);return a?o(a):""}}})});lx.meta={displayName:"Prose<clipboard>",package:"@milkdown/plugin-clipboard"};function FR(n,t){const{doc:e,selection:r}=n;if(!e||!r||!(r instanceof ce||r instanceof jt))return n;const{to:i}=r,o=t.type==="space"?Array(t.size).fill(" ").join(""):"	";return n.insertText(o,i)}const up=pt({type:"space",size:2},"indentConfig");up.meta={package:"@milkdown/plugin-indent",displayName:"Ctx<indentConfig>"};const cx=zw(n=>({Tab:(t,e)=>{const r=n.get(up.key),{tr:i}=t,o=FR(i,r);return o.docChanged?(e==null||e(o),!0):!1}}));cx.meta={package:"@milkdown/plugin-indent",displayName:"Shortcut<indent>"};const $R=[up,cx];function Na(n,t){return Object.assign(n,{meta:{package:"@milkdown/plugin-block",...t}}),n}const HR=n=>!Kk(e=>e.type.name==="table")(n),dp=pt({filterNodes:HR},"blockConfig");Na(dp,{displayName:"Ctx<blockConfig>"});function UR(n,t,e){var i;if(!n.dom.parentElement)return null;try{const o=(i=n.posAtCoords({left:t.x,top:t.y}))==null?void 0:i.inside;if(o==null||o<0)return null;let s=n.state.doc.resolve(o),a=n.state.doc.nodeAt(o),l=n.nodeDOM(o);const c=d=>{const f=s.depth>=1&&s.index(s.depth)===0;if(!(d||f))return;const p=s.before(s.depth);a=n.state.doc.nodeAt(p),l=n.nodeDOM(p),s=n.state.doc.resolve(p),e(s,a)||c(!0)},u=e(s,a);return c(!u),!l||!a?null:{node:a,$pos:s,el:l}}catch{return null}}const Db=Va.ie&&Va.ie_version<15||Va.ios&&Va.webkit_version<604,Rb=20;var Ao,oa,_i,An,Oo,On,Er,ux,bs,Ni,Ti,sa,Io,Do,Ro,aa,Mi;class qR{constructor(){Q(this,Er);Q(this,Ao);Q(this,oa);Q(this,_i);Q(this,An);Q(this,Oo);Q(this,On);Q(this,Ni);Q(this,Ti);Q(this,sa);Q(this,Io);Q(this,Do);Q(this,Ro);Q(this,aa);Q(this,Mi);q(this,oa,()=>{if(!M(this,An))return null;const t=M(this,An),e=M(this,Er,bs);if(e&&re.isSelectable(t.node)){const r=re.create(e.state.doc,t.$pos.pos);return e.dispatch(e.state.tr.setSelection(r)),e.focus(),q(this,_i,r),r}return null}),q(this,_i,null),q(this,An,null),q(this,Oo,void 0),q(this,On,!1),q(this,Ti,()=>{var t;(t=M(this,Ni))==null||t.call(this,{type:"hide"}),q(this,An,null)}),q(this,sa,t=>{var e;q(this,An,t),(e=M(this,Ni))==null||e.call(this,{type:"show",active:t})}),this.bind=(t,e)=>{q(this,Ao,t),q(this,Ni,e)},this.addEvent=t=>{t.addEventListener("mousedown",M(this,Io)),t.addEventListener("mouseup",M(this,Do)),t.addEventListener("dragstart",M(this,Ro))},this.removeEvent=t=>{t.removeEventListener("mousedown",M(this,Io)),t.removeEventListener("mouseup",M(this,Do)),t.removeEventListener("dragstart",M(this,Ro))},this.unBind=()=>{q(this,Ni,void 0)},q(this,Io,()=>{var t;q(this,Oo,(t=M(this,An))==null?void 0:t.el.getBoundingClientRect()),M(this,oa).call(this)}),q(this,Do,()=>{if(!M(this,On)){requestAnimationFrame(()=>{var t;M(this,Oo)&&((t=M(this,Er,bs))==null||t.focus())});return}q(this,On,!1),q(this,_i,null)}),q(this,Ro,t=>{var i;q(this,On,!0);const e=M(this,Er,bs);if(!e)return;e.dom.dataset.dragging="true";const r=M(this,_i);if(t.dataTransfer&&r){const o=r.content();t.dataTransfer.effectAllowed="copyMove";const{dom:s,text:a}=e.serializeForClipboard(o);t.dataTransfer.clearData(),t.dataTransfer.setData(Db?"Text":"text/html",s.innerHTML),Db||t.dataTransfer.setData("text/plain",a);const l=(i=M(this,An))==null?void 0:i.el;l&&t.dataTransfer.setDragImage(l,0,0),e.dragging={slice:o,move:!0}}}),this.keydownCallback=t=>(M(this,Ti).call(this),q(this,On,!1),t.dom.dataset.dragging="false",!1),q(this,aa,NR((t,e)=>{if(!t.editable)return;const r=t.dom.getBoundingClientRect(),i=r.left+r.width/2;if(!(t.root.elementFromPoint(i,e.clientY)instanceof Element)){M(this,Ti).call(this);return}const s=M(this,Er,ux);if(!s)return;const a=UR(t,{x:i,y:e.clientY},s);if(!a){M(this,Ti).call(this);return}M(this,sa).call(this,a)},200)),this.mousemoveCallback=(t,e)=>(t.composing||!t.editable||M(this,aa).call(this,t,e),!1),this.dragoverCallback=(t,e)=>{var r;if(M(this,On)){const i=(r=M(this,Er,bs))==null?void 0:r.dom.parentElement;if(!i)return!1;const o=i.scrollHeight>i.clientHeight,s=i.getBoundingClientRect();if(o){if(i.scrollTop>0&&Math.abs(e.y-s.y)<Rb){const c=i.scrollTop>10?i.scrollTop-10:0;return i.scrollTop=c,!1}const a=Math.round(t.dom.getBoundingClientRect().height);if(Math.round(i.scrollTop+s.height)<a&&Math.abs(e.y-(s.height+s.y))<Rb){const c=i.scrollTop+10;return i.scrollTop=c,!1}}}return!1},this.dragenterCallback=t=>{t.dragging&&(q(this,On,!0),t.dom.dataset.dragging="true")},this.dragleaveCallback=(t,e)=>{const r=e.clientX,i=e.clientY;(r<0||i<0||r>window.innerWidth||i>window.innerHeight)&&(q(this,An,null),M(this,Mi).call(this,t))},this.dropCallback=t=>(M(this,Mi).call(this,t),!1),this.dragendCallback=t=>{M(this,Mi).call(this,t)},q(this,Mi,t=>{q(this,On,!1),t.dom.dataset.dragging="false"})}}Ao=new WeakMap,oa=new WeakMap,_i=new WeakMap,An=new WeakMap,Oo=new WeakMap,On=new WeakMap,Er=new WeakSet,ux=function(){var t;try{return(t=M(this,Ao))==null?void 0:t.get(dp.key).filterNodes}catch{return}},bs=function(){var t;return(t=M(this,Ao))==null?void 0:t.get(dn)},Ni=new WeakMap,Ti=new WeakMap,sa=new WeakMap,Io=new WeakMap,Do=new WeakMap,Ro=new WeakMap,aa=new WeakMap,Mi=new WeakMap;const fp=pt(()=>new qR,"blockService"),hp=pt({},"blockServiceInstance");Na(fp,{displayName:"Ctx<blockService>"});Na(hp,{displayName:"Ctx<blockServiceInstance>"});const fc=pt({},"blockSpec");Na(fc,{displayName:"Ctx<blockSpec>"});const pp=Et(n=>{const t=new tt("MILKDOWN_BLOCK"),r=n.get(fp.key)();n.set(hp.key,r);const i=n.get(fc.key);return new et({key:t,...i,props:{...i.props,handleDOMEvents:{drop:o=>r.dropCallback(o),pointermove:(o,s)=>r.mousemoveCallback(o,s),keydown:o=>r.keydownCallback(o),dragover:(o,s)=>r.dragoverCallback(o,s),dragleave:(o,s)=>r.dragleaveCallback(o,s),dragenter:o=>r.dragenterCallback(o),dragend:o=>r.dragendCallback(o)}}})});Na(pp,{displayName:"Prose<block>"});const mp=[fc,dp,fp,hp,pp];mp.key=fc.key;mp.pluginKey=pp.key;const gp=pt({shouldAppend:n=>!(!n||["heading","paragraph"].includes(n.type.name)),getNode:n=>n.schema.nodes.paragraph.create()},"trailingConfig");gp.meta={package:"@milkdown/plugin-trailing",displayName:"Ctx<trailingConfig>"};const dx=Et(n=>{const t=new tt("MILKDOWN_TRAILING"),{shouldAppend:e,getNode:r}=n.get(gp.key),i=new et({key:t,state:{init:(o,s)=>{const a=s.tr.doc.lastChild;return e(a,s)},apply:(o,s,a,l)=>{if(!o.docChanged)return s;const c=o.doc.lastChild;return e(c,l)}},appendTransaction:(o,s,a)=>{const{doc:l,tr:c}=a,u=r==null?void 0:r(a),d=i.getState(a),f=l.content.size;if(!(!d||!u))return c.insert(f,u)}});return i});dx.meta={package:"@milkdown/plugin-trailing",displayName:"Prose<trailing>"};const WR=[gp,dx];function KR(n){return n.nodeType===1}function VR(n){return KR(n)&&n.namespaceURI==="http://www.w3.org/1999/xhtml"}function YR(n){let t=[[-1,n.state.doc]],e=[];for(;t.length>0;){const[r,i]=t.pop();if(r>=0){let o=n.nodeDOM(r);if(o&&VR(o)){let{top:s,bottom:a,left:l,right:c}=o.getBoundingClientRect();e.push([r,[l,s,c,s]],[r+i.nodeSize,[l,a,c,a]])}}if(i.isBlock&&!i.isTextblock){let o=r+1;for(let s of i.children)t.push([o,s]),o+=s.nodeSize}}return e}function GR(n,t){let e=[],r,i;const o=()=>{const u=n.dom.getBoundingClientRect(),d=n.state.doc;return e&&r&&i&&u.width===i.width&&u.height===i.height&&u.x===i.x&&u.y===i.y&&r.eq(d)||(i=u,r=d,e=YR(n)),e},s=(u,d)=>{if(!n.editable||n.isDestroyed)return;const f=(g,y)=>{const[k,v]=g,[E,R]=y,A=Pb(u,v),w=Pb(u,R);return A-w||k-E};let h=o();h.sort(f),h=h.slice(0,8);const p=h.find(g=>(t==null?void 0:t({view:n,pos:g[0],event:d}))!==!1);if(!(p&&JR(n,p[0])))return p};let a,l;return(u,d)=>(a&&jR(a,u)||(a=u,l=s(u,d)),l)}function jR(n,t){return n[0]===t[0]&&n[1]===t[1]}function Lb(n,t){return Math.abs(n[0]-t[0])+Math.abs(n[1]-t[1])}function Pb(n,t){return Math.min(Lb(n,[t[0],t[1]]),Lb(n,[t[2],t[3]]))}function JR(n,t){const e=n.dragging;if(!e)return;const{move:r}=e;if(!r)return;const i=n.state.selection;if(!(i instanceof re))return;const{from:o,to:s}=i;return o<=t&&t<=s}function XR(n){let t;return new et({key:new tt("prosekit-drop-indicator"),view:e=>(t=GR(e,n.onDrag),QR(e,t,n)),props:{handleDrop(e,r,i,o){if(!t)return!1;const s=t([r.clientX,r.clientY],r);if(!s)return!1;r.preventDefault();let a=s[0],l=e.state.tr;if(o){let{node:h}=e.dragging||{};h?h.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,d=l.doc;if(u?l.replaceRangeWith(c,c,i.content.firstChild):l.replaceRange(c,c,i),l.doc.eq(d))return!0;let f=l.doc.resolve(c);if(u&&re.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new re(f));else{let h=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((p,g,y,k)=>h=k),l.setSelection(ZR(e,f,l.doc.resolve(h)))}return e.focus(),e.dispatch(l.setMeta("uiEvent","drop")),!0}}})}function ZR(n,t,e,r){return n.someProp("createSelectionBetween",i=>i(n,t,e))||ce.between(t,e,r)}function QR(n,t,e){let r=n.dom,i,o,s,a=!1;const l=()=>{i&&clearTimeout(i),a=!1,i=setTimeout(()=>{var d;a||(d=e.onHide)==null||d.call(e)},30)},c=d=>{var g;a=!0;const{clientX:f,clientY:h}=d;if(o===f&&s===h)return;o=f,s=h;let p=t([f,h],d);if(p){const[y,[k,v,E,R]]=p,A={p1:{x:k,y:v},p2:{x:E,y:R}};(g=e.onShow)==null||g.call(e,{view:n,pos:y,line:A})}else{l();return}};return r.addEventListener("dragover",c),r.addEventListener("dragend",l),r.addEventListener("drop",l),r.addEventListener("dragleave",l),{destroy:()=>{r.removeEventListener("dragover",c),r.removeEventListener("dragend",l),r.removeEventListener("drop",l),r.removeEventListener("dragleave",l)}}}class Qe extends le{constructor(t){super(t,t)}map(t,e){let r=t.resolve(e.map(this.head));return Qe.valid(r)?new Qe(r):le.near(r)}content(){return G.empty}eq(t){return t instanceof Qe&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Qe(t.resolve(e.pos))}getBookmark(){return new bp(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!eL(t)||!tL(t))return!1;let r=e.type.spec.allowGapCursor;if(r!=null)return r;let i=e.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,e,r=!1){e:for(;;){if(!r&&Qe.valid(t))return t;let i=t.pos,o=null;for(let s=t.depth;;s--){let a=t.node(s);if(e>0?t.indexAfter(s)<a.childCount:t.index(s)>0){o=a.child(e>0?t.indexAfter(s):t.index(s)-1);break}else if(s==0)return null;i+=e;let l=t.doc.resolve(i);if(Qe.valid(l))return l}for(;;){let s=e>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!re.isSelectable(o)){t=t.doc.resolve(i+o.nodeSize*e),r=!1;continue e}break}o=s,i+=e;let a=t.doc.resolve(i);if(Qe.valid(a))return a}return null}}}Qe.prototype.visible=!1;Qe.findFrom=Qe.findGapCursorFrom;le.jsonID("gapcursor",Qe);class bp{constructor(t){this.pos=t}map(t){return new bp(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return Qe.valid(e)?new Qe(e):le.near(e)}}function eL(n){for(let t=n.depth;t>=0;t--){let e=n.index(t),r=n.node(t);if(e==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(e-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function tL(n){for(let t=n.depth;t>=0;t--){let e=n.indexAfter(t),r=n.node(t);if(e==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(e);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function nL(){return new et({props:{decorations:sL,createSelectionBetween(n,t,e){return t.pos==e.pos&&Qe.valid(e)?new Qe(e):null},handleClick:iL,handleKeyDown:rL,handleDOMEvents:{beforeinput:oL}}})}const rL=Uf({ArrowLeft:Xa("horiz",-1),ArrowRight:Xa("horiz",1),ArrowUp:Xa("vert",-1),ArrowDown:Xa("vert",1)});function Xa(n,t){const e=n=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,o){let s=r.selection,a=t>0?s.$to:s.$from,l=s.empty;if(s instanceof ce){if(!o.endOfTextblock(e)||a.depth==0)return!1;l=!1,a=r.doc.resolve(t>0?a.after():a.before())}let c=Qe.findGapCursorFrom(a,t,l);return c?(i&&i(r.tr.setSelection(new Qe(c))),!0):!1}}function iL(n,t,e){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(t);if(!Qe.valid(r))return!1;let i=n.posAtCoords({left:e.clientX,top:e.clientY});return i&&i.inside>-1&&re.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Qe(r))),!0)}function oL(n,t){if(t.inputType!="insertCompositionText"||!(n.state.selection instanceof Qe))return!1;let{$from:e}=n.state.selection,r=e.parent.contentMatchAt(e.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=B.empty;for(let s=r.length-1;s>=0;s--)i=B.from(r[s].createAndFill(null,i));let o=n.state.tr.replace(e.pos,e.pos,new G(i,0,0));return o.setSelection(ce.near(o.doc.resolve(e.pos+1))),n.dispatch(o),!1}function sL(n){if(!(n.selection instanceof Qe))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",We.create(n.doc,[ct.widget(n.selection.head,t,{key:"gapcursor"})])}function Ta(n,t){return Object.assign(n,{meta:{package:"@milkdown/plugin-cursor",...t}}),n}const js=pt(null,"dropIndicatorState");Ta(js,{displayName:"Ctx<dropIndicatorState>"});const yp=pt({width:2,color:!1,class:"milkdown-drop-indicator"},"dropIndicatorConfig");Ta(yp,{displayName:"Ctx<dropIndicatorConfig>"});const aL=new tt("MILKDOWN_DROP_INDICATOR_DOM"),fx=Et(n=>new et({key:aL,view:t=>{var s;const e=n.get(yp.key),r=document.createElement("div");Object.assign(r.style,{position:"fixed",pointerEvents:"none",display:"none",backgroundColor:e.color,top:"0",left:"0"}),r.classList.add(e.class),r.classList.add("milkdown-drop-indicator"),(s=t.dom.parentNode)==null||s.appendChild(r);const i=n.use(js.key),o=a=>{lL(r,a,e)};return i.on(o),{destroy:()=>{i.off(o),r.remove()}}}}));Ta(fx,{displayName:"Prose<dropIndicatorDOM>"});function lL(n,t,e){if(!t){Object.assign(n.style,{display:"none"});return}const{line:r}=t,{width:i}=e,{p1:{x:o,y:s},p2:{x:a,y:l}}=r,c=s===l;let u,d,f=s,h=o;c?(u=a-o,d=i,f-=i/2):(u=i,d=l-s,h-=i/2),f=Math.round(f),h=Math.round(h),Object.assign(n.style,{display:"block",width:`${u}px`,height:`${d}px`,transform:`translate(${h}px, ${f}px)`})}const hx=Et(n=>XR({onShow:i=>{n.set(js.key,i)},onHide:()=>{n.set(js.key,null)},onDrag:()=>!0}));Ta(hx,{displayName:"Prose<dropIndicator>"});const px=Et(()=>nL());Ta(px,{displayName:"Prose<gapCursor>"});const cL=[px,yp,js,fx,hx].flat();function uL(n){return new Promise(t=>{const e=new FileReader;e.addEventListener("load",()=>{t({alt:n.name,src:e.result})},!1),e.readAsDataURL(n)})}const dL=async(n,t)=>{const e=[];for(let o=0;o<n.length;o++){const s=n.item(o);s&&s.type.includes("image")&&e.push(s)}const{image:r}=t.nodes;if(!r)throw gy("image");return(await Promise.all(e.map(o=>uL(o)))).map(({alt:o,src:s})=>r.createAndFill({src:s,alt:o}))},yo=pt({uploader:dL,enableHtmlFileUploader:!1,uploadWidgetFactory:(n,t)=>{const e=document.createElement("span");return e.textContent="Upload in progress...",ct.widget(n,e,t)}},"uploadConfig");yo.meta={package:"@milkdown/plugin-upload",displayName:"Ctx<uploadConfig>"};const mx=Et(n=>{const t=new tt("MILKDOWN_UPLOAD"),e=(i,o)=>{var l;const s=t.getState(i);if(!s)return-1;const a=s.find(void 0,void 0,c=>c.id===o);return a.length?((l=a[0])==null?void 0:l.from)??-1:-1},r=(i,o,s)=>{var f;if(!s||s.length<=0)return!1;const a=Symbol("upload symbol"),l=n.get(Xt),{tr:c}=i.state,u=o instanceof DragEvent?((f=i.posAtCoords({left:o.clientX,top:o.clientY}))==null?void 0:f.pos)??c.selection.from:c.selection.from;i.dispatch(c.setMeta(t,{add:{id:a,pos:u}}));const{uploader:d}=n.get(yo.key);return d(s,l).then(h=>{const p=e(i.state,a);p<0||i.dispatch(i.state.tr.replaceWith(p,p,h).setMeta(t,{remove:{id:a}}))}).catch(h=>{console.error(h)}),!0};return new et({key:t,state:{init(){return We.empty},apply(i,o){const s=o.map(i.mapping,i.doc),a=i.getMeta(this);if(!a)return s;if(a.add){const{uploadWidgetFactory:l}=n.get(yo.key),c=l(a.add.pos,{id:a.add.id});return s.add(i.doc,[c])}if(a.remove){const l=s.find(void 0,void 0,c=>c.id===a.remove.id);return s.remove(l)}return s}},props:{decorations(i){return this.getState(i)},handlePaste:(i,o)=>{var a,l;const{enableHtmlFileUploader:s}=n.get(yo.key);return!(o instanceof ClipboardEvent)||!s&&((a=o.clipboardData)!=null&&a.getData("text/html"))?!1:r(i,o,(l=o.clipboardData)==null?void 0:l.files)},handleDrop:(i,o)=>{var s;return o instanceof DragEvent?r(i,o,(s=o.dataTransfer)==null?void 0:s.files):!1}}})});mx.meta={package:"@milkdown/plugin-upload",displayName:"Prose<upload>"};const fL=[yo,mx];globalThis.htmx=Mx;globalThis.Alpine=zb;globalThis.flatpickr=rt;globalThis.Cropper=ry;globalThis.hljs=hC;rt.localize(zx.Mandarin);De.setOptions({gfm:!0,breaks:!0});const hL=n=>n?typeof n=="string"?document.querySelector(n):n:null,pL=n=>Array.isArray(n)?n:n?[n]:[],mL=async({element:n,initialValue:t="",onChange:e,uploadImage:r})=>{const i=hL(n);if(!i)throw new Error("Milkdown root element not found");if(i.__milkdownInstance)return i.__milkdownInstance;if(i.__milkdownInstancePromise)return i.__milkdownInstancePromise;i.hasChildNodes()&&(i.innerHTML="");const o=(async()=>{const s=tf.make().config(c=>{c.set(gl,i),c.set(fl,t||""),c.get(uf).markdownUpdated((d,f)=>{typeof e=="function"&&e(f)}),typeof r=="function"&&c.update(yo.key,d=>({...d,uploader:async(f,h)=>{var y,k;const p=Array.from(f||[]),g=[];for(const v of p)try{const E=await r(v),R=typeof E=="string"?E:E==null?void 0:E.url;if(!R)continue;const A=typeof E=="object"&&E&&(E.alt||E.name)||"",w=(y=h.nodes.image)==null?void 0:y.createAndFill({src:R,alt:A||v.name||""});w&&g.push(w)}catch(E){console.error("图片上传失败",E)}return g.length?g.length===1?g[0]:g:((k=h.nodes.paragraph)==null?void 0:k.createAndFill())||h.topNodeType.createAndFill()}}))}).use(gA).use(QA).use(eR).use(nx).use(zR).use(lx).use($R).use(mp).use(WR).use(cL);typeof r=="function"&&s.use(fL);const a=await s.create(),l={instance:a,getMarkdown:()=>a.action(kA()),getHTML:()=>a.action(yA()),setMarkdown:c=>a.action(xA(c||"",!0)),insertMarkdown:c=>{const u=pL(c).filter(Boolean);u.length&&u.forEach(d=>{a.action(wA(d))})},destroy:()=>{a.destroy(),i.__milkdownInstance=null,i.__milkdownInstancePromise=null,delete i.dataset.milkdownMounted}};return i.__milkdownInstance=l,i.dataset.milkdownMounted="true",l})();return i.__milkdownInstancePromise=o.then(s=>(i.__milkdownInstancePromise=null,s)).catch(s=>{throw i.__milkdownInstancePromise=null,s}),o};globalThis.AdminMilkdown={createEditor:mL,renderMarkdown:n=>De.parse(n||"")};zb.start();
